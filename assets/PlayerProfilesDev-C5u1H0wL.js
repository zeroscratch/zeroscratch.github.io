import{H as we}from"./HeaderGPT-Bmu7kA_4.js";import{_ as le,d as ne,c as d,o as f,a as s,p as $,F as D,b as U,t as k,u as W,e as K,n as G,C as Me,E as je,D as Re,r as u,m as Ce,g as _e,f as ae}from"./index-Bo3c9Yz3.js";import"./elden_squares-BChk0GbN.js";/* empty css                                                                  */const Be=ne({name:"PlayerProfiles",setup(){const o=u({}),l=u([]),I=u(null),T=u(""),E=u([]),Y="/img/profilePics/Ignite_Logo.png",b=u({}),S=u({}),r=u([]),j=u([]),F=u([]),re=u({}),L=u({}),te=u({}),z=u({}),x=u({}),ee=u({}),se=u({}),oe=u({}),J=u(!1),Q=u(null),y=a=>(a??"").toString().trim().toLowerCase(),X=(a,c)=>{const p=y(a);for(const g of c||[])if(p&&p===y(g))return!0;return!1},ie=(a,c)=>{T.value=a,I.value=c;const p=Object.entries(b.value||{}).find(([,i])=>{var P,m;return((P=i==null?void 0:i.player1)==null?void 0:P.name)===a||((m=i==null?void 0:i.player2)==null?void 0:m.name)===a}),g=p?p[0]:null;let _=null;for(const i of Object.values(S.value||{})){const P=Object.entries(i||{}).find(([,m])=>{var e,n;return((e=m==null?void 0:m.player1)==null?void 0:e.name)===a||((n=m==null?void 0:m.player2)==null?void 0:n.name)===a});if(P){_=P[0];break}}let R=null;for(const i of Object.values(o.value||{}))if(i&&i[a]){R=i[a];break}const C=[];if(R){const i=(R["veilbreak-team1"]||"").trim(),P=(R["veilbreak-team2"]||"").trim();i&&C.push(i),P&&C.push(P)}const B=[...new Set(C)];E.value=fe(a,g,_,B)},ce=Ce(()=>{const a={};for(const c of E.value){const p=c.source||"Other";a[p]||(a[p]=[]),a[p].push(c)}return a}),q=u([]),ue=a=>{const c=q.value.indexOf(a);c>=0?q.value.splice(c,1):q.value.push(a)},de=a=>q.value.includes(a),fe=(a,c,p,g)=>{const _=[],R=(a||"").toString(),C=(e,n,t,v)=>{var w,O;_.push({gameId:e.gameId||e.gameid||`${(w=e.player1)==null?void 0:w.name}-${(O=e.player2)==null?void 0:O.name}-${e.matchTime||""}`,week:e._week??v.week??null,round:e._round??v.round??null,source:e._source||t||v.source||"Player-based",playerScore:n?e.player1.score:e.player2.score,opponentScore:n?e.player2.score:e.player1.score,opponent:n?e.player2.name:e.player1.name,outcome:n?e.player1.outcome:e.player2.outcome,vodLink:e.vodLink||"",imageLink:e.imageLink||"",matchTime:e.matchTime||null})},B=(e,n)=>{if(!e||!e.player1||!e.player2)return;const t=e.player1.name,v=e.player2.name;if(n.source==="ESS3 Golden Order"&&c&&(y(t)===y(c)||y(v)===y(c))){const w=y(t)===y(c);C(e,w,"Golden Order",n)}if(n.source==="ESS3 Crucible"&&p&&(y(t)===y(p)||y(v)===y(p))){const w=y(t)===y(p);C(e,w,"Crucible",n)}if(n.source==="veilBreak"&&Array.isArray(g)&&g.length>0&&(X(t,g)||X(v,g))){const w=X(t,g)?t:v,O=y(t)===y(w);C(e,O,"VeilBreak",n)}(t===R||v===R)&&C(e,t===R,"Player-based",n)},i=(e,n={source:"player",round:null,week:null})=>{if(e){if(Array.isArray(e)){for(const t of e)if(t)if(t.player1&&t.player2)B(t,n);else if(t.matches&&Array.isArray(t.matches))for(const v of t.matches)B({...v,_week:t.week??v._week,_source:n.source},n);else i(t,n)}else if(typeof e=="object")for(const[t,v]of Object.entries(e)){const w=/quarter|semi|final|loser/i.test(t)&&!n.round?t:n.round;i(v,{...n,round:w})}}};i(l.value,{source:"player"}),c&&Array.isArray(r.value)&&i(r.value,{source:"ESS3 Golden Order"}),p&&Array.isArray(j.value)&&i(j.value,{source:"ESS3 Crucible"}),Array.isArray(g)&&g.length>0&&(L.value&&i(L.value,{source:"veilBreak"}),z.value&&i(z.value,{source:"veilBreak"})),Array.isArray(F.value)&&i(F.value,{source:"ESS3 Rookie Rumble"});const P=[],m=new Set;for(const e of _){const n=[(e.gameId??"").toString(),e.source??"",e.round??"",e.opponent??"",e.playerScore??"",e.opponentScore??""].join("|").toLowerCase();m.has(n)||(m.add(n),P.push(e))}return P},pe=a=>{if(typeof a=="string"){const c=a.toLowerCase();if(c.includes("bingo")||c.includes("majority"))return"winner";if(c.includes("lost")||c.includes("defeat"))return"loser"}return""},ye=a=>a&&window.open(a,"_blank"),ve=a=>{Q.value=a,J.value=!0},ke=()=>{J.value=!1,Q.value=null};return _e(async()=>{try{const[a,c,p,g,_,R,C,B,i,P,m,e,n,t,v,w,O,me]=await Promise.all([fetch("/data/ESS3/allPlayers.json"),fetch("/data/normalizedResults.json"),fetch("/data/playerPlayoffs.json"),fetch("/data/ESS3/GO/goldenOrderTeams.json"),fetch("/data/ESS3/Crucible/crucibleTeams.json"),fetch("/data/ESS3/GO/goldenOrderSeasonMatches.json"),fetch("/data/ESS3/Crucible/crucibleSeasonMatches.json"),fetch("/data/ESS3/RookieRumble/rookieRumbleSeasonMatches.json"),fetch("/data/RookieRumbleData/rookieRumbleMatchResults.json"),fetch("/data/RookieRumbleData/rookieRumblePlayoffMatches.json"),fetch("/data/cruciblePlayoffs.json"),fetch("/data/ScadubingoData/moonwalkMatches.json"),fetch("/data/ScadubingoData/omenVeilGroupsListed.json"),fetch("/data/ScadubingoData/omenVeilBracket.json"),fetch("/data/VeilBreakData/veilBreakTeams.json"),fetch("/data/VeilBreakData/veilBreakBracketMatches.json"),fetch("/data/VeilBreakData/veilBreakTeams2.json"),fetch("/data/VeilBreakData/veilBreakBracketMatches2.json")]);o.value=await a.json();const he=await c.json(),be=await p.json();b.value=await g.json(),S.value=await _.json(),r.value=await R.json(),j.value=await C.json(),F.value=await B.json(),x.value=await P.json(),ee.value=await m.json(),se.value=await e.json(),oe.value=await t.json(),re.value=await v.json(),te.value=await O.json(),L.value=await w.json(),z.value=await me.json();const Se=await n.json(),ge=await i.json(),h=(H,A,N=null)=>{if(!A)return[];const V=[];if(Array.isArray(A)){for(const M of A)if(M)if(M.matches&&Array.isArray(M.matches))for(const Z of M.matches)V.push({...Z,_source:H,_round:N,_week:M.week||null});else M.player1&&M.player2?V.push({...M,_source:H,_round:N}):V.push(...h(H,M,N))}else if(typeof A=="object")for(const[M,Z]of Object.entries(A)){const Pe=/quarter|semi|final|loser/i.test(M)?M:N;V.push(...h(H,Z,Pe))}return V};l.value=[...h("Elden Squares Season 2",he),...h("ESS2 Golden Order Playoffs",be),...h("Off Season Rookie Rumble",ge),...h("Off Season Rookie Rumble Playoffs",x.value),...h("Golden Order",r.value),...h("Crucible",j.value),...h("ESS2 Crucible Playoffs",ee.value),...h("Moonwalk",se.value),...h("Omenveil Groups",Se),...h("Omenveil Bracket",oe.value),...h("VeilBreak 1",L.value),...h("VeilBreak 2",z.value)]}catch(a){console.error("Error loading player or match data:",a)}}),{allPlayers:o,selectedPlayer:I,selectedPlayerName:T,selectPlayer:ie,defaultProfilePic:Y,playerMatches:E,getPlayerClass:pe,openLink:ye,openImageModal:ve,closeModal:ke,showModal:J,modalImage:Q,groupedMatches:ce,toggleSource:ue,isSourceOpen:de}}}),Oe={class:"player-profiles"},Ee={key:0,class:"player-list-section"},Ae={class:"division-title"},Ve={class:"player-grid"},$e=["onClick"],De=["src"],Ge={class:"player-name"},Ie={class:"player-team"},Te={class:"player-record"},Fe={key:1,class:"player-details fade-in"},Le={class:"player-layout"},ze={class:"player-info"},qe=["src"],He={class:"player-meta"},Ne=["href"],Ue={class:"player-matches"},We=["onClick"],Ye={key:0,class:"matches-list"},Je={class:"match-header"},Qe={class:"match-source"},Xe={class:"match-time"},Ze={class:"match-line"},Ke={class:"score-line"},xe={class:"match-buttons"},es=["onClick"],ss=["onClick"],os={key:1,class:"no-matches"},as={class:"modal-content"},ls=["src"];function ns(o,l,I,T,E,Y){return f(),d("div",Oe,[l[10]||(l[10]=s("h1",{class:"title"},"Player Profiles",-1)),o.selectedPlayer?(f(),d("div",Fe,[s("button",{class:"back-button",onClick:l[0]||(l[0]=b=>o.selectedPlayer=null)},"← Back to All Players"),s("div",Le,[s("div",ze,[s("img",{src:o.selectedPlayer["profile-pic"]||o.defaultProfilePic,alt:"Profile Picture",class:"player-large-pic"},null,8,qe),s("div",He,[s("h2",null,k(o.selectedPlayerName),1),s("p",null,[l[3]||(l[3]=s("strong",null,"Team:",-1)),W(" "+k(o.selectedPlayer.team),1)]),s("p",null,[l[4]||(l[4]=s("strong",null,"Nickname:",-1)),W(" "+k(o.selectedPlayer.nickname),1)]),s("p",null,[l[5]||(l[5]=s("strong",null,"Accolades:",-1)),W(" "+k(o.selectedPlayer.accolades),1)]),s("p",null,[l[6]||(l[6]=s("strong",null,"Bio:",-1)),W(" "+k(o.selectedPlayer.bio),1)]),o.selectedPlayer.twitch?(f(),d("a",{key:0,href:o.selectedPlayer.twitch,target:"_blank",class:"twitch-link"}," Watch on Twitch ",8,Ne)):$("",!0)])]),s("div",Ue,[o.playerMatches.length>0?(f(),d(D,{key:0},[l[9]||(l[9]=s("h3",null,"Match History",-1)),(f(!0),d(D,null,U(o.groupedMatches,(b,S)=>(f(),d("div",{key:S,class:"source-group"},[s("div",{class:"source-header",onClick:r=>o.toggleSource(S)},[s("span",null,k(S),1),s("span",{class:G(["arrow",{open:o.isSourceOpen(S)}])},"▾",2)],8,We),K(je,{name:"fade"},{default:Me(()=>[o.isSourceOpen(S)?(f(),d("div",Ye,[(f(!0),d(D,null,U(b,r=>(f(),d("div",{key:r.gameId,class:"match-card"},[s("div",Je,[s("span",Qe,k(r.round||"Round"),1),s("span",Xe,k(r.matchTime),1)]),s("div",Ze,[s("span",{class:G(["player-name",o.getPlayerClass(r.outcome)])},k(o.selectedPlayerName),3),l[7]||(l[7]=s("span",{class:"vs-text"},"vs",-1)),s("span",{class:G(["player-name",o.getPlayerClass(r.outcome)])},k(r.opponent),3)]),s("div",Ke,[s("span",{class:G(["player-score",o.getPlayerClass(r.outcome)])},k(r.playerScore),3),l[8]||(l[8]=s("span",{class:"dash"}," - ",-1)),s("span",{class:G(["player-score",o.getPlayerClass(r.outcome)])},k(r.opponentScore),3)]),s("div",xe,[r.imageLink?(f(),d("button",{key:0,class:"match-button",onClick:j=>o.openImageModal(r.imageLink)}," View Board ",8,es)):$("",!0),r.vodLink?(f(),d("button",{key:1,class:"match-button",onClick:j=>o.openLink(r.vodLink)}," Watch VOD ",8,ss)):$("",!0)])]))),128))])):$("",!0)]),_:2},1024)]))),128))],64)):(f(),d("div",os,"No matches found for this player."))])])])):(f(),d("div",Ee,[(f(!0),d(D,null,U(o.allPlayers,(b,S)=>(f(),d("div",{key:S,class:"division-section fade-in"},[s("h2",Ae,k(S),1),s("div",Ve,[(f(!0),d(D,null,U(b,(r,j)=>(f(),d("div",{key:j,class:"player-card",onClick:F=>o.selectPlayer(j,r)},[s("img",{src:r["profile-pic"]||o.defaultProfilePic,alt:"Profile Picture",class:"profile-pic"},null,8,De),s("div",Ge,k(j),1),s("div",Ie,k(r.team),1),s("div",Te,k(r["current-record"]),1)],8,$e))),128))])]))),128))])),o.showModal?(f(),d("div",{key:2,class:"modal-overlay",onClick:l[2]||(l[2]=Re((...b)=>o.closeModal&&o.closeModal(...b),["self"]))},[s("div",as,[s("button",{class:"close-button",onClick:l[1]||(l[1]=(...b)=>o.closeModal&&o.closeModal(...b))},"✕"),s("img",{src:o.modalImage,alt:"Match Board",class:"modal-image"},null,8,ls)])])):$("",!0)])}const rs=le(Be,[["render",ns],["__scopeId","data-v-7e769904"]]),ts=ne({name:"MainProfiles",components:{Navigation:we,FullProfiles:rs},setup(){return{openForm:()=>{window.open("https://forms.gle/suE71bKuSxwDkdyr9","_blank")}}},mounted(){document.body.style.background="linear-gradient(190deg,rgba(0, 1, 3, 1) 0%, rgba(92, 0, 153, 1) 100%)"},beforeUnmount(){document.body.style.background="#0d1321"}}),is={class:"main-container"};function cs(o,l,I,T,E,Y){const b=ae("Navigation"),S=ae("FullProfiles");return f(),d("div",null,[K(b),s("div",is,[l[1]||(l[1]=s("h1",{class:"Title"},"Under Contruction",-1)),l[2]||(l[2]=s("h1",null,"Update or Change Info on Your Profile:",-1)),s("button",{class:"submit-button",onClick:l[0]||(l[0]=(...r)=>o.openForm&&o.openForm(...r))},"Submit"),K(S)])])}const ys=le(ts,[["render",cs],["__scopeId","data-v-06296b9d"]]);export{ys as default};
