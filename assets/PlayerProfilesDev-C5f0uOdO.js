import{_ as le,d as ne,c as d,o as f,a as s,g as $,F as D,b as W,t as k,x as H,i as K,n as G,w as we,m as Me,y as je,r as u,e as Re,f as _e,j as ae,N as Be}from"./index-CqRBkKZZ.js";const Ce=ne({name:"PlayerProfiles",setup(){const o=u({}),l=u([]),T=u(null),I=u(""),E=u([]),J="/img/profilePics/Ignite_Logo.png",S=u({}),b=u({}),i=u([]),j=u([]),L=u([]),re=u({}),F=u({}),te=u({}),z=u({}),x=u({}),ee=u({}),se=u({}),oe=u({}),Q=u(!1),X=u(null),y=a=>(a??"").toString().trim().toLowerCase(),Y=(a,c)=>{const p=y(a);for(const g of c||[])if(p&&p===y(g))return!0;return!1},ie=(a,c)=>{I.value=a,T.value=c;const p=Object.entries(S.value||{}).find(([,t])=>{var P,h;return((P=t==null?void 0:t.player1)==null?void 0:P.name)===a||((h=t==null?void 0:t.player2)==null?void 0:h.name)===a}),g=p?p[0]:null;let B=null;for(const t of Object.values(b.value||{})){const P=Object.entries(t||{}).find(([,h])=>{var e,n;return((e=h==null?void 0:h.player1)==null?void 0:e.name)===a||((n=h==null?void 0:h.player2)==null?void 0:n.name)===a});if(P){B=P[0];break}}let R=null;for(const t of Object.values(o.value||{}))if(t&&t[a]){R=t[a];break}const _=[];if(R){const t=(R["veilbreak-team1"]||"").trim(),P=(R["veilbreak-team2"]||"").trim();t&&_.push(t),P&&_.push(P)}const C=[...new Set(_)];E.value=fe(a,g,B,C)},ce=Re(()=>{const a={};for(const c of E.value){const p=c.source||"Other";a[p]||(a[p]=[]),a[p].push(c)}return a}),q=u([]),ue=a=>{const c=q.value.indexOf(a);c>=0?q.value.splice(c,1):q.value.push(a)},de=a=>q.value.includes(a),fe=(a,c,p,g)=>{const B=[],R=(a||"").toString(),_=(e,n,r,v)=>{var w,O;B.push({gameId:e.gameId||e.gameid||`${(w=e.player1)==null?void 0:w.name}-${(O=e.player2)==null?void 0:O.name}-${e.matchTime||""}`,week:e._week??v.week??null,round:e._round??v.round??null,source:e._source||r||v.source||"Player-based",playerScore:n?e.player1.score:e.player2.score,opponentScore:n?e.player2.score:e.player1.score,opponent:n?e.player2.name:e.player1.name,outcome:n?e.player1.outcome:e.player2.outcome,vodLink:e.vodLink||"",imageLink:e.imageLink||"",matchTime:e.matchTime||null})},C=(e,n)=>{if(!e||!e.player1||!e.player2)return;const r=e.player1.name,v=e.player2.name;if(n.source==="ESS3 Golden Order"&&c&&(y(r)===y(c)||y(v)===y(c))){const w=y(r)===y(c);_(e,w,"Golden Order",n)}if(n.source==="ESS3 Crucible"&&p&&(y(r)===y(p)||y(v)===y(p))){const w=y(r)===y(p);_(e,w,"Crucible",n)}if(n.source==="veilBreak"&&Array.isArray(g)&&g.length>0&&(Y(r,g)||Y(v,g))){const w=Y(r,g)?r:v,O=y(r)===y(w);_(e,O,"VeilBreak",n)}(r===R||v===R)&&_(e,r===R,"Player-based",n)},t=(e,n={source:"player",round:null,week:null})=>{if(e){if(Array.isArray(e)){for(const r of e)if(r)if(r.player1&&r.player2)C(r,n);else if(r.matches&&Array.isArray(r.matches))for(const v of r.matches)C({...v,_week:r.week??v._week,_source:n.source},n);else t(r,n)}else if(typeof e=="object")for(const[r,v]of Object.entries(e)){const w=/quarter|semi|final|loser/i.test(r)&&!n.round?r:n.round;t(v,{...n,round:w})}}};t(l.value,{source:"player"}),c&&Array.isArray(i.value)&&t(i.value,{source:"ESS3 Golden Order"}),p&&Array.isArray(j.value)&&t(j.value,{source:"ESS3 Crucible"}),Array.isArray(g)&&g.length>0&&(F.value&&t(F.value,{source:"veilBreak"}),z.value&&t(z.value,{source:"veilBreak"})),Array.isArray(L.value)&&t(L.value,{source:"ESS3 Rookie Rumble"});const P=[],h=new Set;for(const e of B){const n=[(e.gameId??"").toString(),e.source??"",e.round??"",e.opponent??"",e.playerScore??"",e.opponentScore??""].join("|").toLowerCase();h.has(n)||(h.add(n),P.push(e))}return P},pe=a=>{if(typeof a=="string"){const c=a.toLowerCase();if(c.includes("bingo")||c.includes("majority"))return"winner";if(c.includes("lost")||c.includes("defeat"))return"loser"}return""},ye=a=>a&&window.open(a,"_blank"),ve=a=>{X.value=a,Q.value=!0},ke=()=>{Q.value=!1,X.value=null};return _e(async()=>{try{const[a,c,p,g,B,R,_,C,t,P,h,e,n,r,v,w,O,he]=await Promise.all([fetch("/data/ESS3/allPlayers.json"),fetch("/data/normalizedResults.json"),fetch("/data/playerPlayoffs.json"),fetch("/data/ESS3/GO/goldenOrderTeams.json"),fetch("/data/ESS3/Crucible/crucibleTeams.json"),fetch("/data/ESS3/GO/goldenOrderSeasonMatches.json"),fetch("/data/ESS3/Crucible/crucibleSeasonMatches.json"),fetch("/data/ESS3/RookieRumble/rookieRumbleSeasonMatches.json"),fetch("/data/RookieRumbleData/rookieRumbleMatchResults.json"),fetch("/data/RookieRumbleData/rookieRumblePlayoffMatches.json"),fetch("/data/cruciblePlayoffs.json"),fetch("/data/ScadubingoData/moonwalkMatches.json"),fetch("/data/ScadubingoData/omenVeilGroupsListed.json"),fetch("/data/ScadubingoData/omenVeilBracket.json"),fetch("/data/VeilBreakData/veilBreakTeams.json"),fetch("/data/VeilBreakData/veilBreakBracketMatches.json"),fetch("/data/VeilBreakData/veilBreakTeams2.json"),fetch("/data/VeilBreakData/veilBreakBracketMatches2.json")]);o.value=await a.json();const me=await c.json(),Se=await p.json();S.value=await g.json(),b.value=await B.json(),i.value=await R.json(),j.value=await _.json(),L.value=await C.json(),x.value=await P.json(),ee.value=await h.json(),se.value=await e.json(),oe.value=await r.json(),re.value=await v.json(),te.value=await O.json(),F.value=await w.json(),z.value=await he.json();const be=await n.json(),ge=await t.json(),m=(N,A,U=null)=>{if(!A)return[];const V=[];if(Array.isArray(A)){for(const M of A)if(M)if(M.matches&&Array.isArray(M.matches))for(const Z of M.matches)V.push({...Z,_source:N,_round:U,_week:M.week||null});else M.player1&&M.player2?V.push({...M,_source:N,_round:U}):V.push(...m(N,M,U))}else if(typeof A=="object")for(const[M,Z]of Object.entries(A)){const Pe=/quarter|semi|final|loser/i.test(M)?M:U;V.push(...m(N,Z,Pe))}return V};l.value=[...m("Elden Squares Season 2",me),...m("ESS2 Golden Order Playoffs",Se),...m("Off Season Rookie Rumble",ge),...m("Off Season Rookie Rumble Playoffs",x.value),...m("Golden Order",i.value),...m("Crucible",j.value),...m("ESS2 Crucible Playoffs",ee.value),...m("Moonwalk",se.value),...m("Omenveil Groups",be),...m("Omenveil Bracket",oe.value),...m("VeilBreak 1",F.value),...m("VeilBreak 2",z.value)]}catch(a){console.error("Error loading player or match data:",a)}}),{allPlayers:o,selectedPlayer:T,selectedPlayerName:I,selectPlayer:ie,defaultProfilePic:J,playerMatches:E,getPlayerClass:pe,openLink:ye,openImageModal:ve,closeModal:ke,showModal:Q,modalImage:X,groupedMatches:ce,toggleSource:ue,isSourceOpen:de}}}),Oe={class:"player-profiles"},Ee={key:0,class:"player-list-section"},Ae={class:"division-title"},Ve={class:"player-grid"},$e=["onClick"],De=["src"],Ge={class:"player-name"},Te={class:"player-team"},Ie={class:"player-record"},Le={key:1,class:"player-details fade-in"},Fe={class:"player-layout"},ze={class:"player-info"},qe=["src"],Ne={class:"player-meta"},Ue=["href"],We={class:"player-matches"},He=["onClick"],Je={key:0,class:"matches-list"},Qe={class:"match-header"},Xe={class:"match-source"},Ye={class:"match-time"},Ze={class:"match-line"},Ke={class:"score-line"},xe={class:"match-buttons"},es=["onClick"],ss=["onClick"],os={key:1,class:"no-matches"},as={class:"modal-content"},ls=["src"];function ns(o,l,T,I,E,J){return f(),d("div",Oe,[l[10]||(l[10]=s("h1",{class:"title"},"Player Profiles",-1)),o.selectedPlayer?(f(),d("div",Le,[s("button",{class:"back-button",onClick:l[0]||(l[0]=S=>o.selectedPlayer=null)},"← Back to All Players"),s("div",Fe,[s("div",ze,[s("img",{src:o.selectedPlayer["profile-pic"]||o.defaultProfilePic,alt:"Profile Picture",class:"player-large-pic"},null,8,qe),s("div",Ne,[s("h2",null,k(o.selectedPlayerName),1),s("p",null,[l[3]||(l[3]=s("strong",null,"Team:",-1)),H(" "+k(o.selectedPlayer.team),1)]),s("p",null,[l[4]||(l[4]=s("strong",null,"Nickname:",-1)),H(" "+k(o.selectedPlayer.nickname),1)]),s("p",null,[l[5]||(l[5]=s("strong",null,"Accolades:",-1)),H(" "+k(o.selectedPlayer.accolades),1)]),s("p",null,[l[6]||(l[6]=s("strong",null,"Bio:",-1)),H(" "+k(o.selectedPlayer.bio),1)]),o.selectedPlayer.twitch?(f(),d("a",{key:0,href:o.selectedPlayer.twitch,target:"_blank",class:"twitch-link"}," Watch on Twitch ",8,Ue)):$("",!0)])]),s("div",We,[o.playerMatches.length>0?(f(),d(D,{key:0},[l[9]||(l[9]=s("h3",null,"Match History",-1)),(f(!0),d(D,null,W(o.groupedMatches,(S,b)=>(f(),d("div",{key:b,class:"source-group"},[s("div",{class:"source-header",onClick:i=>o.toggleSource(b)},[s("span",null,k(b),1),s("span",{class:G(["arrow",{open:o.isSourceOpen(b)}])},"▾",2)],8,He),K(Me,{name:"fade"},{default:we(()=>[o.isSourceOpen(b)?(f(),d("div",Je,[(f(!0),d(D,null,W(S,i=>(f(),d("div",{key:i.gameId,class:"match-card"},[s("div",Qe,[s("span",Xe,k(i.round||"Round"),1),s("span",Ye,k(i.matchTime),1)]),s("div",Ze,[s("span",{class:G(["player-name",o.getPlayerClass(i.outcome)])},k(o.selectedPlayerName),3),l[7]||(l[7]=s("span",{class:"vs-text"},"vs",-1)),s("span",{class:G(["player-name",o.getPlayerClass(i.outcome)])},k(i.opponent),3)]),s("div",Ke,[s("span",{class:G(["player-score",o.getPlayerClass(i.outcome)])},k(i.playerScore),3),l[8]||(l[8]=s("span",{class:"dash"}," - ",-1)),s("span",{class:G(["player-score",o.getPlayerClass(i.outcome)])},k(i.opponentScore),3)]),s("div",xe,[i.imageLink?(f(),d("button",{key:0,class:"match-button",onClick:j=>o.openImageModal(i.imageLink)}," View Board ",8,es)):$("",!0),i.vodLink?(f(),d("button",{key:1,class:"match-button",onClick:j=>o.openLink(i.vodLink)}," Watch VOD ",8,ss)):$("",!0)])]))),128))])):$("",!0)]),_:2},1024)]))),128))],64)):(f(),d("div",os,"No matches found for this player."))])])])):(f(),d("div",Ee,[(f(!0),d(D,null,W(o.allPlayers,(S,b)=>(f(),d("div",{key:b,class:"division-section fade-in"},[s("h2",Ae,k(b),1),s("div",Ve,[(f(!0),d(D,null,W(S,(i,j)=>(f(),d("div",{key:j,class:"player-card",onClick:L=>o.selectPlayer(j,i)},[s("img",{src:i["profile-pic"]||o.defaultProfilePic,alt:"Profile Picture",class:"profile-pic"},null,8,De),s("div",Ge,k(j),1),s("div",Te,k(i.team),1),s("div",Ie,k(i["current-record"]),1)],8,$e))),128))])]))),128))])),o.showModal?(f(),d("div",{key:2,class:"modal-overlay",onClick:l[2]||(l[2]=je((...S)=>o.closeModal&&o.closeModal(...S),["self"]))},[s("div",as,[s("button",{class:"close-button",onClick:l[1]||(l[1]=(...S)=>o.closeModal&&o.closeModal(...S))},"✕"),s("img",{src:o.modalImage,alt:"Match Board",class:"modal-image"},null,8,ls)])])):$("",!0)])}const rs=le(Ce,[["render",ns],["__scopeId","data-v-7e769904"]]),ts=ne({name:"MainProfiles",components:{Navigation:Be,FullProfiles:rs},mounted(){document.body.style.background="linear-gradient(190deg,rgba(0, 1, 3, 1) 0%, rgba(92, 0, 153, 1) 100%)"},beforeUnmount(){document.body.style.background="#0d1321"}}),is={class:"main-container"};function cs(o,l,T,I,E,J){const S=ae("Navigation"),b=ae("FullProfiles");return f(),d("div",null,[K(S),s("div",is,[l[0]||(l[0]=s("h1",{class:"Title"},"Under Contruction",-1)),K(b)])])}const ds=le(ts,[["render",cs],["__scopeId","data-v-baef0f8d"]]);export{ds as default};
