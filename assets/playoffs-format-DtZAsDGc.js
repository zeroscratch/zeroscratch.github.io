function I(c,u,d){const l={};return c.forEach(r=>{const f=r.wins+r.losses,w=u-f,h=r.wins,y=r.wins+w;if(c.filter(i=>{if(i.teamId===r.teamId)return!1;const m=u-(i.wins+i.losses);return i.wins+m>h}).length<d){l[r.teamId]="yes";return}if(c.filter(i=>i.teamId===r.teamId?!1:i.wins>y).length>=d){l[r.teamId]="no";return}l[r.teamId]="maybe"}),l}function q(c,u,d,l,r=[],f=[]){const{matches:w,individualMaxGamesPlayed:h,playoffSlots:y}=c,p={};Object.values(u).forEach(s=>{p[s.id]=s});const n={};Object.entries(d).forEach(([s,e])=>{const a=p[s];a&&(n[s]={teamId:s,teamName:a.displayName,wins:0,losses:0,squares:0,lines:0,h2h:{},players:e.players})}),w.forEach(s=>{const[e,a]=s.participants,t=s.winner,o=e.id===t?a.id:e.id;!n[t]||!n[o]||(n[t].wins++,n[o].losses++,n[e.id].squares+=e.score,n[a.id].squares+=a.score,s.method==="Bingo"&&n[t].lines++,n[t].h2h[o]=!0)}),r.forEach(s=>{!n[s.winner]||!n[s.loser]||(n[s.winner].wins++,n[s.loser].losses++,n[s.winner].squares+=s.squaresAwarded,s.countsAsLine&&n[s.winner].lines++,n[s.winner].h2h[s.loser]=!0)}),f.forEach(s=>{n[s.receiver]&&(n[s.receiver].lines+=s.linesAwarded)});const i=Object.values(n).map(s=>{const e=s.wins+s.losses,a=e>0?(s.wins/e*100).toFixed(1):"0.0",t=l[s.players[0]],o=l[s.players[1]];return{teamId:s.teamId,teamName:s.teamName,wins:s.wins,losses:s.losses,record:`${s.wins}-${s.losses}`,gamesPlayed:e,WR:a,squares:s.squares,lines:s.lines,h2h:s.h2h,Playoffs:"maybe",player1:t?{name:t.displayName,nickname:t.nickname,twitch:t.twitch,profilePic:t.profilePic}:null,player2:o?{name:o.displayName,nickname:o.nickname,twitch:o.twitch,profilePic:o.profilePic}:null}});i.sort((s,e)=>e.wins!==s.wins?e.wins-s.wins:s.losses!==e.losses?s.losses-e.losses:s.h2h[e.teamId]?-1:e.h2h[s.teamId]?1:e.lines!==s.lines?e.lines-s.lines:e.squares!==s.squares?e.squares-s.squares:0);const m=I(i,h,y);return i.forEach(s=>{s.Playoffs=m[s.teamId]}),i}export{q as b};
