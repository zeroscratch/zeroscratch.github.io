import{_,q as T,r as p,f as $,j as v,o as u,c as d,a as e,F as k,b as y,t as r,i as M,g,d as C,M as L,I as A,e as R,n as w,h as b,w as D,T as E}from"./index-eLRCVqe1.js";const W="/data/RookieRumbleData/rookieRumbleStandings.json";async function S(){const o=await(await fetch(W)).json(),h=Object.entries(o).map(([i,t])=>{const m=t.wins,c=t.losses,a=m+c;return{...t,name:i,games:a,wr:j(m,a)}});return h.sort((i,t)=>{if(t.wins!==i.wins)return t.wins-i.wins;const m=parseInt(i.wr),c=parseInt(t.wr);return c!==m?c-m:t.victory.includes(i.name)?t.wins-i.wins:t.lines!==i.lines?t.lines-i.lines:t.squares-i.squares}).forEach((i,t)=>{i.standing=t+1}),h}function j(s,o){if(o===0)return"0%";const h=s/o*100;return`${Math.round(h)}%`}const B={name:"RookieRumbleTable",components:{TwitchIcon:T},setup(){const s=p([]);return $(async()=>{s.value=await S()}),{players:s}}},P={class:"table-container"},q=["href"];function F(s,o,h,i,t,m){const c=v("TwitchIcon");return u(),d("div",P,[e("table",null,[o[0]||(o[0]=e("thead",null,[e("tr",null,[e("th",null,"Standing"),e("th",null,"Player"),e("th",null,"Wins"),e("th",null,"Losses"),e("th",null,"WR"),e("th",null,"Games"),e("th",null,"Squares"),e("th",null,"Lines"),e("th",null,"Twitch")])],-1)),e("tbody",null,[(u(!0),d(k,null,y(i.players,a=>(u(),d("tr",{key:a.name},[e("td",null,r(a.standing),1),e("td",null,r(a.name),1),e("td",null,r(a.wins),1),e("td",null,r(a.losses),1),e("td",null,r(a.wr),1),e("td",null,r(a.games),1),e("td",null,r(a.squares),1),e("td",null,r(a.lines),1),e("td",null,[a.twitch?(u(),d("a",{key:0,href:a.twitch,class:"twitch-link"},[M(c,{class:"icon"})],8,q)):g("",!0)])]))),128))])])])}const he=_(B,[["render",F],["__scopeId","data-v-c13bff33"]]);async function U(){const s="/data/RookieRumbleData/rookieRumbleMatchResults.json";try{const o=await fetch(s);if(!o.ok)throw new Error(`Failed to fetch stats: ${o.statusText}`);const h=await o.json();if(!Array.isArray(h))throw new Error("Invalid format: expected an array of weeks.");return{matches:h.flatMap(t=>t.matches.map(m=>({...m,week:t.week})))}}catch(o){throw console.error(o),new Error("Failed to load Rookie Rumble Match Results. Please try again later.")}}const N=C({name:"RookieRumbleResultsTable",components:{Modal:L,IconMarikasEye:A},setup(){const s=p({matches:[]}),o=p(!1),h=p(null),i=p(null),t=p(null),m=l=>{h.value=l,o.value=!0},c=l=>l==="Bingo"?"highlight-green":l==="Lost"?"highlight-red":"",a=R(()=>{const l=new Set(s.value.matches.map(f=>f.week));return Array.from(l).sort((f,I)=>f-I)}),n=R(()=>t.value!==null?s.value.matches.filter(l=>l.week===t.value):s.value.matches);return $(async()=>{try{s.value=await U();const l=a.value;l.length>0&&(t.value=l[l.length-1])}catch(l){i.value=l.message}}),{currentResults:s,showModal:o,modalImage:h,errorMessage:i,selectedWeek:t,weeks:a,filteredMatches:n,openModal:m,getCellClass:c}}}),V={class:"container"},G={key:0,class:"error"},H={class:"table-container"},O={class:"results-table"},z={class:"table-caption"},Y={class:"week-button-group"},Z=["onClick"],J={rowspan:2},K={rowspan:2},Q={rowspan:2},X=["src"];function x(s,o,h,i,t,m){const c=v("IconMarikasEye"),a=v("Modal");return u(),d("div",V,[s.errorMessage?(u(),d("div",G,r(s.errorMessage),1)):g("",!0),e("div",H,[e("table",O,[e("caption",z,[e("div",Y,[(u(!0),d(k,null,y(s.weeks,n=>(u(),d("button",{key:n,class:w(["week-button",{active:s.selectedWeek===n}]),onClick:l=>s.selectedWeek=n}," Week "+r(n),11,Z))),128)),e("button",{class:w(["week-button",{active:s.selectedWeek===null}]),onClick:o[0]||(o[0]=n=>s.selectedWeek=null)}," All Weeks ",2)])]),o[2]||(o[2]=e("thead",null,[e("tr",null,[e("th",null,"Game"),e("th",null,"Player"),e("th",null,"Score"),e("th",null,"Outcome"),e("th",null,"Time"),e("th",null,"Board")])],-1)),e("tbody",null,[(u(!0),d(k,null,y(s.filteredMatches,(n,l)=>(u(),d(k,{key:l},[e("tr",{class:w({"new-game-row":l===0||s.filteredMatches[l-1].gameId!==n.gameId})},[e("td",J,r(n.gameId),1),e("td",{class:w(s.getCellClass(n.player1.outcome))},r(n.player1.name),3),e("td",{class:w(s.getCellClass(n.player1.outcome))},r(n.player1.score),3),e("td",{class:w(s.getCellClass(n.player1.outcome))},r(n.player1.outcome),3),e("td",K,r(n.matchTime),1),e("td",Q,[n.imageLink?(u(),b(c,{key:0,onClick:f=>s.openModal(n.imageLink),class:"marika-eye"},null,8,["onClick"])):g("",!0)])],2),e("tr",null,[e("td",{class:w(s.getCellClass(n.player2.outcome))},r(n.player2.name),3),e("td",{class:w(s.getCellClass(n.player2.outcome))},r(n.player2.score),3),e("td",{class:w(s.getCellClass(n.player2.outcome))},r(n.player2.outcome),3)])],64))),128))])])]),(u(),b(E,{to:"body"},[M(a,{show:s.showModal,onClose:o[1]||(o[1]=n=>s.showModal=!1)},{default:D(()=>[e("img",{src:s.modalImage,alt:"Board",style:{"max-width":"100%",height:"auto"}},null,8,X)]),_:1},8,["show"])]))])}const me=_(N,[["render",x],["__scopeId","data-v-7271ab63"]]),ee=C({name:"UpcomingMatchCards",setup(){const s=p([]),o=p(null),h=async()=>{try{const t=await fetch("/data/RookieRumbleData/rookieRumbleUpcomingMatches.json");if(!t.ok)throw new Error(`Failed to fetch: ${t.statusText}`);const m=await t.json(),c=new Date;s.value=m.map(a=>{const n=new Date(a.scheduledAt),l=new Date(c.getTime()-2*60*60*1e3),f=n<=c&&n>=l;return{...a,isLive:f}}).filter(a=>{const n=new Date(a.scheduledAt),l=new Date(c.getTime()-2*60*60*1e3);return n>l})}catch(t){o.value=t.message}},i=t=>new Date(t).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZoneName:"short"});return $(h),{matches:s,errorMessage:o,formatDate:i}}}),se={class:"upcoming-matches"},te={key:0,class:"error"},ne={class:"match-grid"},oe={class:"players"},ae={class:"player"},le={class:"player"},re={class:"scheduled"},ie={key:0,class:"type"},ce={key:1,class:"live-badge"};function ue(s,o,h,i,t,m){return u(),d("div",se,[s.errorMessage?(u(),d("div",te,r(s.errorMessage),1)):g("",!0),e("div",ne,[(u(!0),d(k,null,y(s.matches.slice(0,3),(c,a)=>(u(),d("div",{key:a,class:w(["match-card",{live:c.isLive}])},[e("h3",null,r(c.title),1),e("div",oe,[e("span",ae,r(c.firstPlayer),1),o[0]||(o[0]=e("span",{class:"vs"},"vs",-1)),e("span",le,r(c.secondPlayer),1)]),e("div",re,r(s.formatDate(c.scheduledAt)),1),c.matchType===2?(u(),d("div",ie,"Best of 3")):g("",!0),c.isLive?(u(),d("div",ce,"LIVE")):g("",!0)],2))),128))])])}const we=_(ee,[["render",ue],["__scopeId","data-v-509a8d9a"]]);export{he as R,me as a,we as b};
