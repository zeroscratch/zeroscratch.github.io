import{_ as lt,r as oe,C as $e,e as Pe,f as qe,E as Be,z as pt,o as x,c as W,a as s,t as B,g as ae,A as ie,B as se,v as Z,n as ce,x as A,i as je,w as ht,m as vt,F as mt,b as gt,y as ze,H as bt,d as yt,N as wt,l as De}from"./index-DphLMEoe.js";function kt(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var de={exports:{}},Ue;function St(){return Ue||(Ue=1,function(u){var a=function(o){var p=Object.prototype,c=p.hasOwnProperty,m=Object.defineProperty||function(r,e,n){r[e]=n.value},y,E=typeof Symbol=="function"?Symbol:{},O=E.iterator||"@@iterator",h=E.asyncIterator||"@@asyncIterator",w=E.toStringTag||"@@toStringTag";function k(r,e,n){return Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),r[e]}try{k({},"")}catch{k=function(e,n,d){return e[n]=d}}function F(r,e,n,d){var i=e&&e.prototype instanceof C?e:C,b=Object.create(i.prototype),I=new N(d||[]);return m(b,"_invoke",{value:f(r,n,I)}),b}o.wrap=F;function Y(r,e,n){try{return{type:"normal",arg:r.call(e,n)}}catch(d){return{type:"throw",arg:d}}}var Q="suspendedStart",R="suspendedYield",_="executing",z="completed",T={};function C(){}function j(){}function P(){}var X={};k(X,O,function(){return this});var re=Object.getPrototypeOf,H=re&&re(re(J([])));H&&H!==p&&c.call(H,O)&&(X=H);var D=P.prototype=C.prototype=Object.create(X);j.prototype=P,m(D,"constructor",{value:P,configurable:!0}),m(P,"constructor",{value:j,configurable:!0}),j.displayName=k(P,w,"GeneratorFunction");function ne(r){["next","throw","return"].forEach(function(e){k(r,e,function(n){return this._invoke(e,n)})})}o.isGeneratorFunction=function(r){var e=typeof r=="function"&&r.constructor;return e?e===j||(e.displayName||e.name)==="GeneratorFunction":!1},o.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,P):(r.__proto__=P,k(r,w,"GeneratorFunction")),r.prototype=Object.create(D),r},o.awrap=function(r){return{__await:r}};function ee(r,e){function n(b,I,M,q){var $=Y(r[b],r,I);if($.type==="throw")q($.arg);else{var v=$.arg,g=v.value;return g&&typeof g=="object"&&c.call(g,"__await")?e.resolve(g.__await).then(function(L){n("next",L,M,q)},function(L){n("throw",L,M,q)}):e.resolve(g).then(function(L){v.value=L,M(v)},function(L){return n("throw",L,M,q)})}}var d;function i(b,I){function M(){return new e(function(q,$){n(b,I,q,$)})}return d=d?d.then(M,M):M()}m(this,"_invoke",{value:i})}ne(ee.prototype),k(ee.prototype,h,function(){return this}),o.AsyncIterator=ee,o.async=function(r,e,n,d,i){i===void 0&&(i=Promise);var b=new ee(F(r,e,n,d),i);return o.isGeneratorFunction(e)?b:b.next().then(function(I){return I.done?I.value:b.next()})};function f(r,e,n){var d=Q;return function(b,I){if(d===_)throw new Error("Generator is already running");if(d===z){if(b==="throw")throw I;return te()}for(n.method=b,n.arg=I;;){var M=n.delegate;if(M){var q=t(M,n);if(q){if(q===T)continue;return q}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(d===Q)throw d=z,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);d=_;var $=Y(r,e,n);if($.type==="normal"){if(d=n.done?z:R,$.arg===T)continue;return{value:$.arg,done:n.done}}else $.type==="throw"&&(d=z,n.method="throw",n.arg=$.arg)}}}function t(r,e){var n=e.method,d=r.iterator[n];if(d===y)return e.delegate=null,n==="throw"&&r.iterator.return&&(e.method="return",e.arg=y,t(r,e),e.method==="throw")||n!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),T;var i=Y(d,r.iterator,e.arg);if(i.type==="throw")return e.method="throw",e.arg=i.arg,e.delegate=null,T;var b=i.arg;if(!b)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,T;if(b.done)e[r.resultName]=b.value,e.next=r.nextLoc,e.method!=="return"&&(e.method="next",e.arg=y);else return b;return e.delegate=null,T}ne(D),k(D,w,"Generator"),k(D,O,function(){return this}),k(D,"toString",function(){return"[object Generator]"});function l(r){var e={tryLoc:r[0]};1 in r&&(e.catchLoc=r[1]),2 in r&&(e.finallyLoc=r[2],e.afterLoc=r[3]),this.tryEntries.push(e)}function S(r){var e=r.completion||{};e.type="normal",delete e.arg,r.completion=e}function N(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(l,this),this.reset(!0)}o.keys=function(r){var e=Object(r),n=[];for(var d in e)n.push(d);return n.reverse(),function i(){for(;n.length;){var b=n.pop();if(b in e)return i.value=b,i.done=!1,i}return i.done=!0,i}};function J(r){if(r){var e=r[O];if(e)return e.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var n=-1,d=function i(){for(;++n<r.length;)if(c.call(r,n))return i.value=r[n],i.done=!1,i;return i.value=y,i.done=!0,i};return d.next=d}}return{next:te}}o.values=J;function te(){return{value:y,done:!0}}return N.prototype={constructor:N,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(S),!r)for(var e in this)e.charAt(0)==="t"&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=y)},stop:function(){this.done=!0;var r=this.tryEntries[0],e=r.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(q,$){return b.type="throw",b.arg=r,e.next=q,$&&(e.method="next",e.arg=y),!!$}for(var d=this.tryEntries.length-1;d>=0;--d){var i=this.tryEntries[d],b=i.completion;if(i.tryLoc==="root")return n("end");if(i.tryLoc<=this.prev){var I=c.call(i,"catchLoc"),M=c.call(i,"finallyLoc");if(I&&M){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(I){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else if(M){if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(r,e){for(var n=this.tryEntries.length-1;n>=0;--n){var d=this.tryEntries[n];if(d.tryLoc<=this.prev&&c.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var i=d;break}}i&&(r==="break"||r==="continue")&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var b=i?i.completion:{};return b.type=r,b.arg=e,i?(this.method="next",this.next=i.finallyLoc,T):this.complete(b)},complete:function(r,e){if(r.type==="throw")throw r.arg;return r.type==="break"||r.type==="continue"?this.next=r.arg:r.type==="return"?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):r.type==="normal"&&e&&(this.next=e),T},finish:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===r)return this.complete(n.completion,n.afterLoc),S(n),T}},catch:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===r){var d=n.completion;if(d.type==="throw"){var i=d.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={iterator:J(r),resultName:e,nextLoc:n},this.method==="next"&&(this.arg=y),T}},o}(u.exports);try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}}(de)),de.exports}var fe,Ge;function Ie(){return Ge||(Ge=1,fe=(u,a)=>`${u}-${a}-${Math.random().toString(16).slice(3,8)}`),fe}var pe,xe;function ut(){if(xe)return pe;xe=1;const u=Ie();let a=0;return pe=({id:o,action:p,payload:c={}})=>{let m=o;return typeof m>"u"&&(m=u("Job",a),a+=1),{id:m,action:p,payload:c}},pe}var le={},We;function Me(){if(We)return le;We=1;let u=!1;return le.logging=u,le.setLogging=a=>{u=a},le.log=(...a)=>u?console.log.apply(this,a):null,le}var he,Fe;function Lt(){if(Fe)return he;Fe=1;const u=ut(),{log:a}=Me(),o=Ie();let p=0;return he=()=>{const c=o("Scheduler",p),m={},y={};let E=[];p+=1;const O=()=>E.length,h=()=>Object.keys(m).length,w=()=>{if(E.length!==0){const R=Object.keys(m);for(let _=0;_<R.length;_+=1)if(typeof y[R[_]]>"u"){E[0](m[R[_]]);break}}},k=(R,_)=>new Promise((z,T)=>{const C=u({action:R,payload:_});E.push(async j=>{E.shift(),y[j.id]=C;try{z(await j[R].apply(this,[..._,C.id]))}catch(P){T(P)}finally{delete y[j.id],w()}}),a(`[${c}]: Add ${C.id} to JobQueue`),a(`[${c}]: JobQueue length=${E.length}`),w()});return{addWorker:R=>(m[R.id]=R,a(`[${c}]: Add ${R.id}`),a(`[${c}]: Number of workers=${h()}`),w(),R.id),addJob:async(R,..._)=>{if(h()===0)throw Error(`[${c}]: You need to have at least one worker before adding jobs`);return k(R,_)},terminate:async()=>{Object.keys(m).forEach(async R=>{await m[R].terminate()}),E=[]},getQueueLen:O,getNumWorkers:h}},he}function Rt(u){throw new Error('Could not dynamically require "'+u+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ve,Ke;function Et(){return Ke||(Ke=1,ve=u=>{const a={};return typeof WorkerGlobalScope<"u"?a.type="webworker":typeof document=="object"?a.type="browser":typeof process=="object"&&typeof Rt=="function"&&(a.type="node"),typeof u>"u"?a:a[u]}),ve}var me,Ye;function Ot(){if(Ye)return me;Ye=1;const a=Et()("type")==="browser"?o=>new URL(o,window.location.href).href:o=>o;return me=o=>{const p={...o};return["corePath","workerPath","langPath"].forEach(c=>{o[c]&&(p[c]=a(p[c]))}),p},me}var ge,He;function ct(){return He||(He=1,ge={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),ge}const Ct="tesseract.js",At="6.0.1",_t="Pure Javascript Multilingual OCR",Tt="src/index.js",Nt="commonjs",jt="src/index.d.ts",It="dist/tesseract.min.js",Mt="dist/tesseract.min.js",$t={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser test:node:all","test:browser":"karma start karma.conf.js","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.mjs","test:node:all":"npm run test:node -- ./tests/*.test.mjs",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},Pt={"./src/worker/node/index.js":"./src/worker/browser/index.js"},qt="",Bt=["jeromewu"],zt="Apache-2.0",Dt={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","npm-run-all":"^4.1.5",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-webpack":"^5.0.0",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},Ut={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},Gt={"@rollup/pluginutils":"^5.0.2"},xt={type:"git",url:"https://github.com/naptha/tesseract.js.git"},Wt={url:"https://github.com/naptha/tesseract.js/issues"},Ft="https://github.com/naptha/tesseract.js",Kt={type:"opencollective",url:"https://opencollective.com/tesseractjs"},Yt={name:Ct,version:At,description:_t,main:Tt,type:Nt,types:jt,unpkg:It,jsdelivr:Mt,scripts:$t,browser:Pt,author:qt,contributors:Bt,license:zt,devDependencies:Dt,dependencies:Ut,overrides:Gt,repository:xt,bugs:Wt,homepage:Ft,collective:Kt};var be,Je;function Ht(){return Je||(Je=1,be={workerBlobURL:!0,logger:()=>{}}),be}var ye,Ve;function Jt(){if(Ve)return ye;Ve=1;const u=Yt.version;return ye={...Ht(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${u}/dist/worker.min.js`},ye}var we,Ze;function Vt(){return Ze||(Ze=1,we=({workerPath:u,workerBlobURL:a})=>{let o;if(Blob&&URL&&a){const p=new Blob([`importScripts("${u}");`],{type:"application/javascript"});o=new Worker(URL.createObjectURL(p))}else o=new Worker(u);return o}),we}var ke,Qe;function Zt(){return Qe||(Qe=1,ke=u=>{u.terminate()}),ke}var Se,Xe;function Qt(){return Xe||(Xe=1,Se=(u,a)=>{u.onmessage=({data:o})=>{a(o)}}),Se}var Le,et;function Xt(){return et||(et=1,Le=async(u,a)=>{u.postMessage(a)}),Le}var Re,tt;function er(){if(tt)return Re;tt=1;const u=o=>new Promise((p,c)=>{const m=new FileReader;m.onload=()=>{p(m.result)},m.onerror=({target:{error:{code:y}}})=>{c(Error(`File could not be read! Code=${y}`))},m.readAsArrayBuffer(o)}),a=async o=>{let p=o;if(typeof o>"u")return"undefined";if(typeof o=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(o)?p=atob(o.split(",")[1]).split("").map(c=>c.charCodeAt(0)):p=await(await fetch(o)).arrayBuffer();else if(typeof HTMLElement<"u"&&o instanceof HTMLElement)o.tagName==="IMG"&&(p=await a(o.src)),o.tagName==="VIDEO"&&(p=await a(o.poster)),o.tagName==="CANVAS"&&await new Promise(c=>{o.toBlob(async m=>{p=await u(m),c()})});else if(typeof OffscreenCanvas<"u"&&o instanceof OffscreenCanvas){const c=await o.convertToBlob();p=await u(c)}else(o instanceof File||o instanceof Blob)&&(p=await u(o));return new Uint8Array(p)};return Re=a,Re}var Ee,rt;function tr(){if(rt)return Ee;rt=1;const u=Jt(),a=Vt(),o=Zt(),p=Qt(),c=Xt(),m=er();return Ee={defaultOptions:u,spawnWorker:a,terminateWorker:o,onMessage:p,send:c,loadImage:m},Ee}var Oe,nt;function dt(){if(nt)return Oe;nt=1;const u=Ot(),a=ut(),{log:o}=Me(),p=Ie(),c=ct(),{defaultOptions:m,spawnWorker:y,terminateWorker:E,onMessage:O,loadImage:h,send:w}=tr();let k=0;return Oe=async(F="eng",Y=c.LSTM_ONLY,Q={},R={})=>{const _=p("Worker",k),{logger:z,errorHandler:T,...C}=u({...m,...Q}),j={},P=typeof F=="string"?F.split("+"):F;let X=Y,re=R;const H=[c.DEFAULT,c.LSTM_ONLY].includes(Y)&&!C.legacyCore;let D,ne;const ee=new Promise((v,g)=>{ne=v,D=g}),f=v=>{D(v.message)};let t=y(C);t.onerror=f,k+=1;const l=({id:v,action:g,payload:L})=>new Promise((U,G)=>{o(`[${_}]: Start ${v}, action=${g}`);const V=`${g}-${v}`;j[V]={resolve:U,reject:G},w(t,{workerId:_,jobId:v,action:g,payload:L})}),S=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),N=v=>l(a({id:v,action:"load",payload:{options:{lstmOnly:H,corePath:C.corePath,logging:C.logging}}})),J=(v,g,L)=>l(a({id:L,action:"FS",payload:{method:"writeFile",args:[v,g]}})),te=(v,g)=>l(a({id:g,action:"FS",payload:{method:"readFile",args:[v,{encoding:"utf8"}]}})),r=(v,g)=>l(a({id:g,action:"FS",payload:{method:"unlink",args:[v]}})),e=(v,g,L)=>l(a({id:L,action:"FS",payload:{method:v,args:g}})),n=(v,g)=>l(a({id:g,action:"loadLanguage",payload:{langs:v,options:{langPath:C.langPath,dataPath:C.dataPath,cachePath:C.cachePath,cacheMethod:C.cacheMethod,gzip:C.gzip,lstmOnly:[c.DEFAULT,c.LSTM_ONLY].includes(X)&&!C.legacyLang}}})),d=(v,g,L,U)=>l(a({id:U,action:"initialize",payload:{langs:v,oem:g,config:L}})),i=(v="eng",g,L,U)=>{if(H&&[c.TESSERACT_ONLY,c.TESSERACT_LSTM_COMBINED].includes(g))throw Error("Legacy model requested but code missing.");const G=g||X;X=G;const V=L||re;re=V;const ue=(typeof v=="string"?v.split("+"):v).filter(ft=>!P.includes(ft));return P.push(...ue),ue.length>0?n(ue,U).then(()=>d(v,G,V,U)):d(v,G,V,U)},b=(v={},g)=>l(a({id:g,action:"setParameters",payload:{params:v}})),I=async(v,g={},L={text:!0},U)=>l(a({id:U,action:"recognize",payload:{image:await h(v),options:g,output:L}})),M=async(v,g)=>{if(H)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return l(a({id:g,action:"detect",payload:{image:await h(v)}}))},q=async()=>(t!==null&&(E(t),t=null),Promise.resolve());O(t,({workerId:v,jobId:g,status:L,action:U,data:G})=>{const V=`${U}-${g}`;if(L==="resolve")o(`[${v}]: Complete ${g}`),j[V].resolve({jobId:g,data:G}),delete j[V];else if(L==="reject")if(j[V].reject(G),delete j[V],U==="load"&&D(G),T)T(G);else throw Error(G);else L==="progress"&&z({...G,userJobId:g})});const $={id:_,worker:t,load:S,writeText:J,readText:te,removeFile:r,FS:e,reinitialize:i,setParameters:b,recognize:I,detect:M,terminate:q};return N().then(()=>n(F)).then(()=>d(F,Y,R)).then(()=>ne($)).catch(()=>{}),ee},Oe}var Ce,ot;function rr(){if(ot)return Ce;ot=1;const u=dt();return Ce={recognize:async(p,c,m)=>{const y=await u(c,1,m);return y.recognize(p).finally(async()=>{await y.terminate()})},detect:async(p,c)=>{const m=await u("osd",0,c);return m.detect(p).finally(async()=>{await m.terminate()})}},Ce}var Ae,at;function nr(){return at||(at=1,Ae={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Ae}var _e,it;function or(){return it||(it=1,_e={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),_e}var Te,st;function ar(){if(st)return Te;st=1,St();const u=Lt(),a=dt(),o=rr(),p=nr(),c=ct(),m=or(),{setLogging:y}=Me();return Te={languages:p,OEM:c,PSM:m,createScheduler:u,createWorker:a,setLogging:y,...o},Te}var ir=ar();const sr=kt(ir),lr={class:"bingo-page"},ur={class:"info-panel"},cr={key:0,class:"ocr-status"},dr={class:"team-config"},fr={class:"team-selector"},pr={class:"scoreboard"},hr={class:"font-size-control"},vr=["src"],mr={class:"instructions-container"},gr={key:0,class:"instructions"},br=["src"],yr=["onClick","onWheel","onDblclick"],wr={key:0,class:"square-text"},kr=["onBlur","onKeydown"],K=5,Ne="bingoRefereeBoardState",Sr={__name:"RefBoardGPT",setup(u){const a=oe(100),o=oe(null),p=oe(null),c=oe(!1),m=oe(0),y=oe(!1),E=oe(!1),O=oe(.85),h=$e({red:{name:"Red Team",color:"#ff4c4c"},blue:{name:"Blue Team",color:"#4c8bff"}}),w=$e(Array.from({length:K*K},()=>({redActive:!1,blueActive:!1,redCount:0,blueCount:0,text:"",editing:!1}))),k=()=>{localStorage.setItem(Ne,JSON.stringify({imageSrc:p.value,board:w,teams:h,fontSize:O.value}))},F=()=>{const f=localStorage.getItem(Ne);if(f)try{const t=JSON.parse(f);t.imageSrc&&(p.value=t.imageSrc),Array.isArray(t.board)&&t.board.forEach((l,S)=>Object.assign(w[S],l)),t.teams&&(h.red=Object.assign(h.red,t.teams.red||{}),h.blue=Object.assign(h.blue,t.teams.blue||{})),t.fontSize&&(O.value=t.fontSize)}catch(t){console.warn("Failed to load board state:",t)}},Y=()=>{confirm(`âš ï¸ This will completely erase all saved data â€” including OCR results, team names, colors, and current board progress.

Are you sure you want to reset everything?`)&&(localStorage.removeItem(Ne),o.value=null,p.value=null,Object.assign(h.red,{name:"Red Team",color:"#ff4c4c"}),Object.assign(h.blue,{name:"Blue Team",color:"#4c8bff"}),w.forEach(t=>{t.redActive=t.blueActive=!1,t.redCount=t.blueCount=0,t.text="",t.editing=!1}),alert(`âœ… All persistent data has been cleared.
The board and team settings have been reset to defaults.`))},Q=()=>{const t=Math.min(window.innerWidth-320,window.innerHeight*.85);a.value=t/K};async function R(f){const t=f.target.files[0];if(!t)return;const l=URL.createObjectURL(t);p.value=l,await _(l),k()}async function _(f){y.value=!0,m.value=0;const t=new Image;t.src=f,await new Promise(n=>t.onload=n);const l=document.createElement("canvas"),S=l.getContext("2d");l.width=t.width,l.height=t.height,S.drawImage(t,0,0);const N=t.width/K,J=t.height/K,te=[];for(let n=0;n<K;n++)for(let d=0;d<K;d++){const i=document.createElement("canvas"),b=i.getContext("2d");i.width=N,i.height=J,b.filter="grayscale(1) contrast(180%) brightness(1.1)",b.drawImage(t,d*N,n*J,N,J,0,0,N,J),te.push(i.toDataURL("image/png"))}const r=4;let e=0;for(let n=0;n<te.length;n+=r)await Promise.all(te.slice(n,n+r).map((d,i)=>sr.recognize(d,"eng",{tessedit_char_whitelist:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 ()-.,'"`}).then(({data:{text:b}})=>{w[n+i].text=b.replace(/\s+/g," ").trim()}).catch(()=>w[n+i].text="(unreadable)").finally(()=>{e++,m.value=Math.round(e/te.length*100),k()})));y.value=!1}const z=f=>o.value=o.value===f?null:f,T=f=>{if(!o.value)return;const t=w[f];o.value==="red"?t.redActive=!t.redActive:t.blueActive=!t.blueActive,k()},C=(f,t)=>{if(!o.value)return;f.preventDefault();const l=Math.sign(f.deltaY)*-1,S=w[t];o.value==="red"?S.redCount=Math.max(0,S.redCount+l):S.blueCount=Math.max(0,S.blueCount+l),k()},j=f=>w[f].editing=!0,P=(f,t)=>{w[f].text=t.target.innerText.trim(),w[f].editing=!1,k()},X=()=>{confirm(`This will clear all active colors and counters on the board, but keep your team names, colors, and OCR text intact.

Do you want to continue?`)&&(w.forEach(t=>{t.redActive=t.blueActive=!1,t.redCount=t.blueCount=0}),alert(`âœ… Board squares have been reset.
Team settings and text remain unchanged.`),k())},re=Pe(()=>w.filter(f=>f.redActive).length),H=Pe(()=>w.filter(f=>f.blueActive).length),D=f=>{const t=h.red.color,l=h.blue.color;return f.redActive&&f.blueActive?`linear-gradient(135deg, ${t}55 50%, ${l}55 50%)`:f.redActive?`${t}55`:f.blueActive?`${l}55`:"transparent"};qe(()=>{F(),Q(),window.addEventListener("resize",Q)}),Be(()=>window.removeEventListener("resize",Q)),pt([w,h],k,{deep:!0});const ne=f=>{const t=Math.min(Math.max(O.value+f,.6),3);O.value=parseFloat(t.toFixed(2)),k()},ee=f=>{(f.ctrlKey||f.metaKey)&&(f.key==="+"||f.key==="="?(f.preventDefault(),ne(.05)):f.key==="-"?(f.preventDefault(),ne(-.05)):f.key==="0"&&(f.preventDefault(),O.value=.85,k()))};return qe(()=>{window.addEventListener("keydown",ee)}),Be(()=>{window.removeEventListener("keydown",ee)}),(f,t)=>(x(),W("div",lr,[s("div",ur,[t[15]||(t[15]=s("h2",{class:"title"},"Bingo Referee Board",-1)),s("input",{type:"file",accept:"image/*",onChange:R,class:"file-input"},null,32),y.value?(x(),W("div",cr,"ðŸ§  Scanning "+B(m.value)+"%",1)):ae("",!0),s("div",dr,[s("div",null,[t[11]||(t[11]=s("label",null,"Name:",-1)),ie(s("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>h.red.name=l),style:Z({borderColor:h.red.color})},null,4),[[se,h.red.name]]),ie(s("input",{type:"color","onUpdate:modelValue":t[1]||(t[1]=l=>h.red.color=l)},null,512),[[se,h.red.color]])]),s("div",null,[t[12]||(t[12]=s("label",null,"Name:",-1)),ie(s("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>h.blue.name=l),style:Z({borderColor:h.blue.color})},null,4),[[se,h.blue.name]]),ie(s("input",{type:"color","onUpdate:modelValue":t[3]||(t[3]=l=>h.blue.color=l)},null,512),[[se,h.blue.color]])])]),s("div",fr,[s("button",{class:ce({active:o.value==="red"}),onClick:t[4]||(t[4]=l=>z("red")),style:Z({color:h.red.color,borderColor:h.red.color,boxShadow:o.value==="red"?`0 0 12px ${h.red.color}`:"none"})},B(h.red.name),7),s("button",{class:ce({active:o.value==="blue"}),onClick:t[5]||(t[5]=l=>z("blue")),style:Z({color:h.blue.color,borderColor:h.blue.color,boxShadow:o.value==="blue"?`0 0 12px ${h.blue.color}`:"none"})},B(h.blue.name),7),s("button",{class:ce([{active:o.value===null},"neutral"]),onClick:t[6]||(t[6]=l=>z(null))}," None ",2)]),s("div",pr,[s("div",{style:Z({color:h.red.color})},"â— "+B(h.red.name)+": "+B(re.value),5),s("div",{style:Z({color:h.blue.color})},"â— "+B(h.blue.name)+": "+B(H.value),5)]),s("div",hr,[t[13]||(t[13]=s("label",{for:"fontSize"},"Font Size",-1)),ie(s("input",{id:"fontSize",type:"range",min:"0.1",max:"3",step:"0.05","onUpdate:modelValue":t[7]||(t[7]=l=>O.value=l)},null,512),[[se,O.value,void 0,{number:!0}]]),s("span",null,B((O.value*100).toFixed(0))+"%",1)]),t[16]||(t[16]=s("p",{class:"font-size-tip"},[A("Use "),s("kbd",null,"Ctrl"),A(),s("kbd",null,"+"),A("/"),s("kbd",null,"-"),A(" or "),s("kbd",null,"Ctrl 0"),A(" to adjust quickly.")],-1)),s("div",{class:"control-buttons"},[s("button",{class:"reset-button",onClick:X},"ðŸ”„ Reset"),s("button",{class:"clear-button",onClick:Y},"ðŸ§¹ Clear Data")]),p.value?(x(),W("div",{key:1,class:"thumb",onClick:t[8]||(t[8]=l=>c.value=!0)},[s("img",{src:p.value},null,8,vr)])):ae("",!0),s("div",mr,[s("button",{class:"toggle-instructions",onClick:t[9]||(t[9]=l=>E.value=!E.value)},B(E.value?"ðŸ“– Hide Instructions":"â„¹ï¸ Show Instructions"),1),je(vt,{name:"fade"},{default:ht(()=>[E.value?(x(),W("div",gr,t[14]||(t[14]=[s("h3",null,"How to Use",-1),s("ol",null,[s("li",null,[s("strong",null,"Upload the board image"),A(" (e.g., "),s("code",null,"board.png"),A(").")]),s("li",null,"Wait for OCR to fill in the 25 bingo squares automatically."),s("li",null,[s("strong",null,"Rename teams"),A(" and choose custom colors if desired.")]),s("li",null,[A("Select a team, then: "),s("ul",null,[s("li",null,[A("ðŸ–±ï¸ "),s("strong",null,"Click"),A(" a square â†’ mark it for that team.")]),s("li",null,[A("ðŸ–±ï¸ "),s("strong",null,"Scroll"),A(" on a square â†’ adjust its progress counter.")]),s("li",null,[A("ðŸ–±ï¸ "),s("strong",null,"Double-click"),A(" a square â†’ edit the square text manually.")])])]),s("li",null,[A("Use "),s("strong",null,"Reset"),A(" to clear colors and counters, or "),s("strong",null,"Clear Data"),A(" to wipe all saved info.")]),s("li",null,[A("Your board state is "),s("em",null,"automatically saved"),A(" between sessions.")])],-1)]))):ae("",!0)]),_:1})])]),c.value?(x(),W("div",{key:0,class:"image-popup",onClick:t[10]||(t[10]=l=>c.value=!1)},[s("img",{src:p.value},null,8,br)])):ae("",!0),s("div",{class:"board-wrapper",style:Z({width:`${a.value*K}px`,height:`${a.value*K}px`})},[(x(!0),W(mt,null,gt(w,(l,S)=>(x(),W("div",{key:S,class:"square-overlay",style:Z({width:`${a.value}px`,height:`${a.value}px`,left:`${S%K*a.value}px`,top:`${Math.floor(S/K)*a.value}px`,background:D(l),fontSize:`${O.value}em`}),onClick:N=>T(S),onWheel:N=>C(N,S),onDblclick:ze(N=>j(S),["stop"])},[l.editing?(x(),W("div",{key:1,class:"square-text editable",contenteditable:"true",onBlur:N=>P(S,N),onKeydown:bt(ze(N=>P(S,N),["prevent"]),["enter"])},B(l.text),41,kr)):(x(),W("div",wr,B(l.text||"â€¦"),1)),l.redCount>0?(x(),W("div",{key:2,class:"counter",style:Z({color:h.red.color,left:"6px",fontSize:`${O.value*.65}em`})},B(l.redCount),5)):ae("",!0),l.blueCount>0?(x(),W("div",{key:3,class:"counter",style:Z({color:h.blue.color,right:"6px",fontSize:`${O.value*.65}em`})},B(l.blueCount),5)):ae("",!0)],44,yr))),128))],4)]))}},Lr=lt(Sr,[["__scopeId","data-v-e69717b7"]]),Rr=yt({name:"Bingo Ref",components:{Navigation:wt,Board:Lr},mounted(){document.body.style.background="linear-gradient(135deg, rgba(0, 4, 87, 1) 0%, rgba(91, 0, 107, 1) 100%)"},beforeUnmount(){document.body.style.background="#0d1321"}}),Er={class:"main-container"};function Or(u,a,o,p,c,m){const y=De("Navigation"),E=De("Board");return x(),W("div",null,[je(y),s("div",Er,[je(E)])])}const _r=lt(Rr,[["render",Or],["__scopeId","data-v-79741672"]]);export{_r as default};
