import{_,m as I,r as h,f as C,j as f,o as m,c as p,a as e,F as w,b as R,t as r,i as v,g as b,d as M,M as L,I as A,e as S,n as g,h as T,w as j,T as D,N as E}from"./index-WgSXVT5i.js";const P="/data/RookieRumbleData/rookieRumbleStandings.json";async function W(){const t=await(await fetch(P)).json(),d=Object.entries(t).map(([u,a])=>{const c=a.wins,n=a.losses,l=c+n;return{...a,name:u,games:l,wr:q(c,l)}});return d.sort((u,a)=>{if(a.wins!==u.wins)return a.wins-u.wins;const c=parseInt(u.wr),n=parseInt(a.wr);return n!==c?n-c:a.victory.includes(u.name)?a.wins-u.wins:a.lines!==u.lines?a.lines-u.lines:a.squares-u.squares}).forEach((u,a)=>{u.standing=a+1}),d}function q(s,t){if(t===0)return"0%";const d=s/t*100;return`${Math.round(d)}%`}const B={name:"RookieRumbleTable",components:{TwitchIcon:I},setup(){const s=h([]);return C(async()=>{s.value=await W()}),{players:s}}},F={class:"table-container"},U=["href"];function N(s,t,d,u,a,c){const n=f("TwitchIcon");return m(),p("div",F,[e("table",null,[t[0]||(t[0]=e("thead",null,[e("tr",null,[e("th",null,"Standing"),e("th",null,"Player"),e("th",null,"Wins"),e("th",null,"Losses"),e("th",null,"WR"),e("th",null,"Games"),e("th",null,"Squares"),e("th",null,"Lines"),e("th",null,"Twitch")])],-1)),e("tbody",null,[(m(!0),p(w,null,R(u.players,l=>(m(),p("tr",{key:l.name},[e("td",null,r(l.standing),1),e("td",null,r(l.name),1),e("td",null,r(l.wins),1),e("td",null,r(l.losses),1),e("td",null,r(l.wr),1),e("td",null,r(l.games),1),e("td",null,r(l.squares),1),e("td",null,r(l.lines),1),e("td",null,[l.twitch?(m(),p("a",{key:0,href:l.twitch,class:"twitch-link"},[v(n,{class:"icon"})],8,U)):b("",!0)])]))),128))])])])}const G=_(B,[["render",N],["__scopeId","data-v-7236a3fd"]]);async function V(){const s="/data/RookieRumbleData/rookieRumbleMatchResults.json";try{const t=await fetch(s);if(!t.ok)throw new Error(`Failed to fetch stats: ${t.statusText}`);const d=await t.json();if(!Array.isArray(d))throw new Error("Invalid format: expected an array of weeks.");return{matches:d.flatMap(a=>a.matches.map(c=>({...c,week:a.week})))}}catch(t){throw console.error(t),new Error("Failed to load Rookie Rumble Match Results. Please try again later.")}}const O=M({name:"RookieRumbleResultsTable",components:{Modal:L,IconMarikasEye:A},setup(){const s=h({matches:[]}),t=h(!1),d=h(null),u=h(null),a=h(null),c=i=>{d.value=i,t.value=!0},n=i=>i==="Bingo"||i==="Majority"?"highlight-green":i==="Lost"?"highlight-red":"",l=S(()=>{const i=new Set(s.value.matches.map(k=>k.week));return Array.from(i).sort((k,y)=>k-y)}),o=S(()=>a.value!==null?s.value.matches.filter(i=>i.week===a.value):s.value.matches);return C(async()=>{try{s.value=await V();const i=l.value;i.length>0&&(a.value=i[i.length-1])}catch(i){u.value=i.message}}),{currentResults:s,showModal:t,modalImage:d,errorMessage:u,selectedWeek:a,weeks:l,filteredMatches:o,openModal:c,getCellClass:n}}}),H={class:"container"},z={key:0,class:"error"},K={class:"table-container"},Y={class:"results-table"},Z={class:"table-caption"},J={class:"week-button-group"},Q=["onClick"],X={rowspan:2},x={rowspan:2},ee={rowspan:2},te=["src"];function se(s,t,d,u,a,c){const n=f("IconMarikasEye"),l=f("Modal");return m(),p("div",H,[s.errorMessage?(m(),p("div",z,r(s.errorMessage),1)):b("",!0),e("div",K,[e("table",Y,[e("caption",Z,[e("div",J,[(m(!0),p(w,null,R(s.weeks,o=>(m(),p("button",{key:o,class:g(["week-button",{active:s.selectedWeek===o}]),onClick:i=>s.selectedWeek=o}," Week "+r(o),11,Q))),128)),e("button",{class:g(["week-button",{active:s.selectedWeek===null}]),onClick:t[0]||(t[0]=o=>s.selectedWeek=null)}," All Weeks ",2)])]),t[2]||(t[2]=e("thead",null,[e("tr",null,[e("th",null,"Game"),e("th",null,"Player"),e("th",null,"Score"),e("th",null,"Outcome"),e("th",null,"Time"),e("th",null,"Board")])],-1)),e("tbody",null,[(m(!0),p(w,null,R(s.filteredMatches,(o,i)=>(m(),p(w,{key:i},[e("tr",{class:g({"new-game-row":i===0||s.filteredMatches[i-1].gameId!==o.gameId})},[e("td",X,r(o.gameId),1),e("td",{class:g(s.getCellClass(o.player1.outcome))},r(o.player1.name),3),e("td",{class:g(s.getCellClass(o.player1.outcome))},r(o.player1.score),3),e("td",{class:g(s.getCellClass(o.player1.outcome))},r(o.player1.outcome),3),e("td",x,r(o.matchTime),1),e("td",ee,[o.imageLink?(m(),T(n,{key:0,onClick:k=>s.openModal(o.imageLink),class:"marika-eye"},null,8,["onClick"])):b("",!0)])],2),e("tr",null,[e("td",{class:g(s.getCellClass(o.player2.outcome))},r(o.player2.name),3),e("td",{class:g(s.getCellClass(o.player2.outcome))},r(o.player2.score),3),e("td",{class:g(s.getCellClass(o.player2.outcome))},r(o.player2.outcome),3)])],64))),128))])])]),(m(),T(D,{to:"body"},[v(l,{show:s.showModal,onClose:t[1]||(t[1]=o=>s.showModal=!1)},{default:j(()=>[e("img",{src:s.modalImage,alt:"Board",style:{"max-width":"100%",height:"auto"}},null,8,te)]),_:1},8,["show"])]))])}const oe=_(O,[["render",se],["__scopeId","data-v-40f2a17e"]]),ne=M({name:"UpcomingMatchCards",setup(){const s=h([]),t=h(null),d=async()=>{try{const a=await fetch("/data/RookieRumbleData/rookieRumbleUpcomingMatches.json");if(!a.ok)throw new Error(`Failed to fetch: ${a.statusText}`);const c=await a.json(),n=new Date;s.value=c.map(l=>{const o=new Date(l.scheduledAt),i=new Date(n.getTime()-2*60*60*1e3),k=o<=n&&o>=i;return{...l,isLive:k}}).filter(l=>{const o=new Date(l.scheduledAt),i=new Date(n.getTime()-2*60*60*1e3);return o>i})}catch(a){t.value=a.message}},u=a=>new Date(a).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZoneName:"short"});return C(d),{matches:s,errorMessage:t,formatDate:u}}}),ae={class:"upcoming-matches"},le={key:0,class:"error"},re={class:"match-grid"},ie={class:"players"},ce={class:"player"},ue={class:"player"},de={class:"scheduled"},me={class:"referee"},pe={key:0,class:"type"},he={key:1,class:"live-badge"};function ge(s,t,d,u,a,c){return m(),p("div",ae,[s.errorMessage?(m(),p("div",le,r(s.errorMessage),1)):b("",!0),e("div",re,[(m(!0),p(w,null,R(s.matches.slice(0,3),(n,l)=>(m(),p("div",{key:l,class:g(["match-card",{live:n.isLive}])},[e("h3",null,r(n.title),1),e("div",ie,[e("span",ce,r(n.firstPlayer),1),t[0]||(t[0]=e("span",{class:"vs"},"vs",-1)),e("span",ue,r(n.secondPlayer),1)]),e("div",de,r(s.formatDate(n.scheduledAt)),1),e("div",me," Match Referee: "+r(n.ref),1),n.matchType===2?(m(),p("div",pe,"Best of 3")):b("",!0),n.isLive?(m(),p("div",he,"LIVE")):b("",!0)],2))),128))])])}const ke=_(ne,[["render",ge],["__scopeId","data-v-fb61dc65"]]),fe=M({name:"RookieRumbleSquareStats",setup(){const s=h([]),t=h("name"),d=h("asc"),u=S(()=>[...s.value].sort((c,n)=>{const l=d.value==="asc"?1:-1,o=t.value;return typeof c[o]=="string"?c[o].localeCompare(n[o])*l:(parseFloat(c[o])-parseFloat(n[o]))*l}));C(async()=>{try{const n=await(await fetch("/data/RookieRumbleData/rookieRumbleSquareStats.json")).json(),l=Object.entries(n),o=42;s.value=l.map(([i,k])=>{const y=k.Completed||0,$=k.Appeared||0;return{name:i,completed:y,appeared:$,completedPercentage:$>0?(y/$*100).toFixed(1):"0.0",appearedPercentage:o>0?($/o*100).toFixed(1):"0.0"}})}catch(c){console.error("Error loading square stats:",c)}});function a(c){t.value===c?d.value=d.value==="asc"?"desc":"asc":(t.value=c,d.value="desc")}return{sortedSquares:u,changeSort:a,sortKey:t,sortDirection:d}}}),ve={class:"stats-table-container"},we={class:"square-stats-table"};function be(s,t,d,u,a,c){return m(),p("div",ve,[e("table",we,[e("thead",null,[e("tr",null,[e("th",{onClick:t[0]||(t[0]=n=>s.changeSort("name"))},"Square ▲▼"),e("th",{onClick:t[1]||(t[1]=n=>s.changeSort("completed"))},"Completed ▲▼"),e("th",{onClick:t[2]||(t[2]=n=>s.changeSort("appeared"))},"Appeared ▲▼"),e("th",{onClick:t[3]||(t[3]=n=>s.changeSort("completedPercentage"))},"Completed % ▲▼"),e("th",{onClick:t[4]||(t[4]=n=>s.changeSort("appearedPercentage"))},"Appeared % ▲▼")])]),e("tbody",null,[(m(!0),p(w,null,R(s.sortedSquares,(n,l)=>(m(),p("tr",{key:l},[e("td",null,r(n.name),1),e("td",null,r(n.completed),1),e("td",null,r(n.appeared),1),e("td",null,r(n.completedPercentage)+"%",1),e("td",null,r(n.appearedPercentage)+"%",1)]))),128))])])])}const Re=_(fe,[["render",be],["__scopeId","data-v-deedb2b1"]]),_e="/rookie-rumble-public/the-erdtree-elden-ring-thumb.jpg",ye="/rookie-rumble-public/Rookie_Rumble_2_Logo.png",$e=M({name:"RookieRumble",components:{RookieRumbleTable:G,Navigation:E,RookieRumbleResultsTable:oe,RookieRumbleUpcomingMatches:ke,RookieRumbleSquareStats:Re},mounted(){document.body.style.backgroundColor="#10002b"},beforeUnmount(){document.body.style.backgroundColor="#0d1321"}}),Ce={class:"main-container"};function Me(s,t,d,u,a,c){const n=f("Navigation"),l=f("RookieRumbleUpcomingMatches"),o=f("RookieRumbleTable"),i=f("RookieRumbleResultsTable");return m(),p("div",null,[v(n),e("div",Ce,[t[0]||(t[0]=e("div",{class:"top-image-container"},[e("img",{src:_e,class:"background-img"}),e("img",{src:ye,class:"logo"})],-1)),t[1]||(t[1]=e("h1",{class:"Title"},"Upcoming Matches",-1)),v(l),t[2]||(t[2]=e("h1",{class:"Title"},"Rookie Rumble Standings",-1)),v(o),t[3]||(t[3]=e("h1",{class:"Title"},"Rookie Rumble Match Results",-1)),v(i)])])}const Te=_($e,[["render",Me],["__scopeId","data-v-e2d9bde9"]]);export{Te as default};
