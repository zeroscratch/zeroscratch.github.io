import{N as Q}from"./HeaderGPT-DHrvsZJa.js";import{T as G}from"./twitch-icon-CS_mEnYX.js";import{d as x,r as M,g as H,c as l,a as e,t as d,F as C,B as X,b as A,n as P,u as B,p as $,e as T,o as r,_ as z,D as Z,m as K,A as j,z as O,f as F}from"./index-DUEESiPZ.js";import{l as ss,f as es,a as ts,i as Y,b as J,g as as}from"./ess3BuildPlayoffs-CwWSUyFB.js";import{b as ns}from"./SoloBuildStandings-DTpAlalr.js";import{I as os}from"./IconMarikasEye-bsvpPkxj.js";import"./elden_squares-BChk0GbN.js";/* empty css                                                                  */function is(m,o,g){const _={};return m.forEach(c=>{const f=c.wins+c.losses,u=o-f,t=c.wins,i=c.wins+u;if(m.filter(k=>{if(k.playerId===c.playerId)return!1;const b=o-(k.wins+k.losses);return k.wins+b>=t}).length<g){_[c.playerId]="yes";return}if(m.filter(k=>k.playerId===c.playerId?!1:k.wins>i).length>=g){_[c.playerId]="no";return}_[c.playerId]="maybe"}),_}function ls(m,o,g=[],_=[],c=[]){const{matches:f,individualMaxGamesPlayed:u,playoffSlots:t}=m,i={};function h(s){if(i[s])return;const a=o[s];a&&(i[s]={id:s,displayName:a.displayName,wins:0,losses:0,squares:0,lines:0,h2h:{},gamesRemoved:0})}const y={};function k(s,a){y[s]??(y[s]={}),y[s][a]=(y[s][a]??0)+1}f.forEach(s=>{const[a,v]=s.participants,p=s.winner,n=a.id===p?v.id:a.id;h(a.id),h(v.id),!(!i[p]||!i[n])&&(k(a.id,v.id),k(v.id,a.id),i[p].wins++,i[n].losses++,i[a.id].squares+=a.score,i[v.id].squares+=v.score,s.method==="Bingo"&&i[p].lines++,i[p].h2h[n]=!0)}),g.forEach(s=>{h(s.winner),h(s.loser),!(!i[s.winner]||!i[s.loser])&&(k(s.winner,s.loser),k(s.loser,s.winner),i[s.winner].wins++,i[s.loser].losses++,i[s.winner].squares+=s.squaresAwarded,s.countsAsLine&&i[s.winner].lines++,i[s.winner].h2h[s.loser]=!0)}),_.forEach(s=>{h(s.receiver),i[s.receiver]&&(i[s.receiver].lines+=s.linesAwarded)}),c.forEach(s=>{if(h(s.receiver),!i[s.receiver])return;const a=Number(s.gamesRemoved??0)||0;i[s.receiver].gamesRemoved+=a,i[s.receiver].wins-=s.gamesWon,i[s.receiver].losses+=s.gamesLost,i[s.receiver].squares-=s.squaresLost,i[s.receiver].lines-=s.linesLost});const b=Object.values(i).map(s=>{const a=s.wins+s.losses,v=Math.max(0,a-(s.gamesRemoved||0)),p=v>0?(s.wins/v*100).toFixed(1):"0.0",n=o[s.id];return{playerId:s.id,displayName:s.displayName,wins:s.wins,losses:s.losses,record:`${s.wins}-${s.losses}`,gamesPlayed:v,WR:p,squares:s.squares,lines:s.lines,h2h:s.h2h,Playoffs:"maybe",nickname:n==null?void 0:n.nickname,twitch:n==null?void 0:n.twitch,profilePic:n==null?void 0:n.profilePic,SoS:"0.0"}}),I={};b.forEach(s=>I[s.playerId]={wins:s.wins,losses:s.losses});function R(s,a){const v=s+a;return v>0?s/v:0}if(b.forEach(s=>{const a=y[s.playerId]??{};let v=0,p=0;for(const w in a){const L=w,N=a[L],S=I[L];if(!S)continue;const W=R(S.wins,S.losses);v+=N,p+=W*N}const n=v>0?p/v*100:0;s.SoS=n.toFixed(1)}),b.sort((s,a)=>{if(a.wins!==s.wins)return a.wins-s.wins;if(s.losses!==a.losses)return s.losses-a.losses;if(s.h2h[a.playerId]&&!a.h2h[s.playerId])return-1;if(a.h2h[s.playerId]&&!s.h2h[a.playerId])return 1;const v=Number(s.SoS)||0,p=Number(a.SoS)||0;return v!==p?p-v:a.lines!==s.lines?a.lines-s.lines:a.squares!==s.squares?a.squares-s.squares:0}),b.every(s=>s.gamesPlayed>=u))return b.forEach((s,a)=>{s.Playoffs=a<t?"yes":"no"}),b;const D=is(b,u,t);b.forEach(s=>{s.Playoffs=D[s.playerId]});let q=0;for(const s of b)s.Playoffs==="yes"&&(q++,q>t&&(s.Playoffs="maybe"));return b}const rs={class:"standings-wrapper"},cs={key:0,class:"loading"},ds={key:1,class:"error"},us={class:"standings-list"},vs={class:"col-rank-number"},ms={class:"col-player"},ps={class:"player-name"},hs=["href"],fs={class:"col-record-spacing"},_s={class:"col-wr"},ys={class:"col-games"},ws={class:"col-squares"},gs={class:"col-lines"},ks=x({__name:"StandingsAnamnesis",setup(m){const o=M([]),g=M(!0),_=M(null);async function c(f){const u=await fetch(f);if(!u.ok)throw new Error(`Failed to fetch ${f} (${u.status})`);return await u.json()}return H(async()=>{g.value=!0,_.value=null;try{const f=await c("/data/ScadubingoData/anamnesis/matches.json"),u=await c("/data/entries/players.json");let t=[],i=[];const h=[{receiver:"psiphicode",gamesRemoved:0,gamesWon:0,gamesLost:4,squaresLost:0,linesLost:0},{receiver:"blaze",gamesRemoved:0,gamesWon:0,gamesLost:4,squaresLost:0,linesLost:0},{receiver:"jxxman",gamesRemoved:0,gamesWon:0,gamesLost:0,squaresLost:0,linesLost:0},{receiver:"thomas",gamesRemoved:0,gamesWon:1,gamesLost:1,squaresLost:0,linesLost:0}];o.value=ls(f,u,t,i,h)}catch(f){console.error(f),_.value=(f==null?void 0:f.message)??"Unknown error",o.value=[]}finally{g.value=!1}}),(f,u)=>(r(),l("div",rs,[u[1]||(u[1]=e("h1",{class:"title"},"Anamnesis Standings",-1)),g.value?(r(),l("p",cs,"Loadingâ€¦")):_.value?(r(),l("p",ds,d(_.value),1)):(r(),l(C,{key:2},[u[0]||(u[0]=X('<div class="standings-header" data-v-00c9212b><div class="col-rank" data-v-00c9212b>Rank</div><div class="col-player" data-v-00c9212b>Player</div><div class="col-record" data-v-00c9212b>Record</div><div class="col-wr" data-v-00c9212b>WR%</div><div class="col-games" data-v-00c9212b>GP</div><div class="col-squares" data-v-00c9212b>Squares</div><div class="col-lines" data-v-00c9212b>Lines</div></div>',1)),e("div",us,[(r(!0),l(C,null,A(o.value,(t,i)=>(r(),l("div",{key:t.playerId,class:P(["team-card",{"playoff-yes":t.Playoffs==="yes","playoff-no":t.Playoffs==="no","playoff-maybe":t.Playoffs==="maybe"}])},[e("div",vs,d(i+1),1),e("div",ms,[e("h2",ps,[B(d(t.nickname?`${t.displayName}`:t.displayName)+" ",1),t.twitch?(r(),l("a",{key:0,href:t.twitch,class:"twitch-link",target:"_blank",rel:"noreferrer"},[T(G,{class:"icon"})],8,hs)):$("",!0)])]),e("div",fs,d(t.record),1),e("div",_s,d(t.WR)+"%",1),e("div",ys,d(t.gamesPlayed),1),e("div",ws,d(t.squares),1),e("div",gs,d(t.lines),1)],2))),128))])],64))]))}}),bs=z(ks,[["__scopeId","data-v-00c9212b"]]);function $s(m,o){const g={};Object.values(o).forEach(c=>{g[c.id]=c.displayName});const _={};return m.forEach(c=>{var i,h;_[c.week]||(_[c.week]={week:c.week,matches:[]});const[f,u]=c.participants,t=c.winner;_[c.week].matches.push({gameId:c.id,player1:{name:g[f.id]??String(f.id),score:f.score,outcome:f.id===t?c.method:"Lost"},player2:{name:g[u.id]??String(u.id),score:u.score,outcome:u.id===t?c.method:"Lost"},matchTime:c.duration,vodLink:(i=c.media)==null?void 0:i.vod,imageLink:(h=c.media)==null?void 0:h.image})}),Object.values(_).sort((c,f)=>c.week-f.week)}const Ss=x({name:"AnamnesisResults",setup(){const m=M([]),o=M(3),g=M(!1),_=M(null),c=[{label:"Week 1",value:1},{label:"Week 2",value:2},{label:"Week 3",value:3},{label:"All Weeks",value:"all"}];H(async()=>{try{const[y,k]=await Promise.all([fetch("/data/ScadubingoData/anamnesis/matches.json"),fetch("/data/entries/players.json")]);if(!y.ok)throw new Error("Failed to load matches.json");if(!k.ok)throw new Error("Failed to load players.json");const b=await y.json(),I=await k.json(),R=I.players??I;m.value=$s(b.matches??b,R)}catch(y){console.error("Failed to load Anamnesis Match Results:",y)}});const f=K(()=>o.value==="all"?m.value:m.value.filter(y=>y.week===o.value));return{selectedWeek:o,weekOptions:c,filteredWeeks:f,openLink:y=>{window.open(y,"_blank")},openImageModal:y=>{_.value=y,g.value=!0},closeModal:()=>{g.value=!1,_.value=null},getPlayerClass:y=>y==="Bingo"||y==="Majority"?"winner":y==="Lost"?"loser":"",showModal:g,modalImage:_}}}),Ps={class:"match-results-container"},Ms={class:"week-selector"},Ls=["onClick"],Ns={class:"week-title"},Cs={class:"matches-list"},Is={class:"match-line"},Rs={class:"score-line"},As={class:"match-details"},Ts={class:"match-buttons"},Ws=["onClick"],qs=["onClick"],Es={key:0,class:"no-results"},Bs={class:"modal-content"},js=["src"];function Os(m,o,g,_,c,f){return r(),l("div",Ps,[o[4]||(o[4]=e("h2",{class:"title"},"Anamnesis Match Results",-1)),e("div",Ms,[(r(!0),l(C,null,A(m.weekOptions,u=>(r(),l("button",{key:u.value,onClick:t=>m.selectedWeek=u.value,class:P(["week-button",{active:m.selectedWeek===u.value}])},d(u.label),11,Ls))),128))]),(r(!0),l(C,null,A(m.filteredWeeks,u=>(r(),l("div",{key:u.week,class:"week-block"},[e("h3",Ns,"Week "+d(u.week),1),e("div",Cs,[(r(!0),l(C,null,A(u.matches,t=>(r(),l("div",{key:t.gameId,class:"match-card"},[e("div",Is,[e("span",{class:P(["player-name",m.getPlayerClass(t.player1.outcome)])},d(t.player1.name),3),o[2]||(o[2]=e("span",{class:"vs-text"},"vs",-1)),e("span",{class:P(["player-name",m.getPlayerClass(t.player2.outcome)])},d(t.player2.name),3)]),e("div",Rs,[e("span",{class:P(["player-score",m.getPlayerClass(t.player1.outcome)])},d(t.player1.score),3),o[3]||(o[3]=e("span",{class:"dash"}," - ",-1)),e("span",{class:P(["player-score",m.getPlayerClass(t.player2.outcome)])},d(t.player2.score),3)]),e("div",As,[e("p",null,"Match Time: "+d(t.matchTime),1)]),e("div",Ts,[t.imageLink?(r(),l("button",{key:0,class:"match-button",onClick:i=>m.openImageModal(t.imageLink)}," View Board ",8,Ws)):$("",!0),t.vodLink?(r(),l("button",{key:1,class:"match-button",onClick:i=>m.openLink(t.vodLink)}," Watch VOD ",8,qs)):$("",!0)])]))),128))])]))),128)),m.filteredWeeks.length===0?(r(),l("div",Es," No match data available for this week. ")):$("",!0),m.showModal?(r(),l("div",{key:1,class:"modal-overlay",onClick:o[1]||(o[1]=Z((...u)=>m.closeModal&&m.closeModal(...u),["self"]))},[e("div",Bs,[e("button",{class:"close-button",onClick:o[0]||(o[0]=(...u)=>m.closeModal&&m.closeModal(...u))},"âœ•"),e("img",{src:m.modalImage,alt:"Match Board",class:"modal-image"},null,8,js)])])):$("",!0)])}const Fs=z(Ss,[["render",Os],["__scopeId","data-v-c4826ac8"]]),xs={class:"team-colors"},Ds={class:"status-bar"},Vs={key:0},Gs={key:1},Hs={key:2},zs={key:0,class:"next-match-pill"},Us={class:"round-tag-bar"},Ys={class:"round-pill"},Js={class:"round-subtitle"},Zs={class:"series-pill-row"},Ks=["onClick"],Qs={class:"layout"},Xs={class:"teams-column"},se={class:"team-card-header"},ee={class:"team-title"},te={key:0,class:"winner-crown"},ae={class:"team-stats-grid"},ne={class:"team-stat"},oe={class:"team-stat"},ie={class:"team-stat"},le={class:"twitch-links"},re=["href"],ce={class:"twitch-text"},de={class:"center-column"},ue={class:"series-header"},ve={class:"bo3-title"},me={class:"is-match-ongoing"},pe={class:"series-outcome"},he={key:0,class:"series-winner-banner"},fe={key:1},_e={class:"bo3-scoreboard"},ye={class:"team-score side left"},we={class:"label"},ge={class:"score"},ke={class:"game-dots"},be={class:"team-score side right"},$e={class:"score"},Se={class:"label"},Pe={class:"games-list"},Me={class:"game-box-header"},Le={class:"game-title"},Ne={key:0,class:"game-time"},Ce={class:"game-media"},Ie=["onClick"],Re=["href"],Ae={class:"scores"},Te={class:"outcome-text"},We={class:"modal-content"},qe=["src"],Ee="/data/ScadubingoData/anamnesis/playoffs.json",Be="/data/ScadubingoData/anamnesis/matches.json",je="/data/entries/players.json",Oe=x({__name:"PlayoffsAnamnesis",setup(m){const o=M([]),g=M({}),_=M(!1),c=M("");function f(s){s&&(c.value=s,_.value=!0)}function u(){_.value=!1,c.value=""}const t=M(0);function i(s){t.value=s}H(async()=>{const s=await ss(Ee);o.value=es(s),t.value=ts(o.value);const[a,v]=await Promise.all([fetch(Be).then(w=>w.json()),fetch(je).then(w=>w.json())]),p=ns(a,v),n={};p.forEach(w=>n[w.playerId]=w),g.value=n});function h(s){return g.value[s]??null}function y(s){var a;return s.series.winner?((a=h(s.series.winner))==null?void 0:a.displayName)??"":""}function k(s){var p,n;const[a,v]=s.series.participants;return`${s.round} â€” ${((p=h(a))==null?void 0:p.displayName)??a} vs ${((n=h(v))==null?void 0:n.displayName)??v}`}function b(s){if(typeof s!="string")return`Game ${s}`;const a=s.match(/-G(\d+)$/i);return a?`Game ${a[1]}`:s}function I(s){const a=as(s);return a?a.toLocaleString(void 0,{month:"short",day:"2-digit",hour:"numeric",minute:"2-digit",timeZoneName:"short"}):""}function R(s){return s?`var(--${s}, var(--team-unknown))`:"var(--team-unknown)"}function U(s,a){const v=s.series.games[a];if(!v||!v.winner)return{background:"#222",borderColor:"#555",opacity:.35};const p=R(v.winner);return{background:`color-mix(in srgb, ${p} 35%, #000 65%)`,borderColor:p,boxShadow:`0 0 12px ${p}`,opacity:1}}const D=K(()=>{var N,S;const s=o.value[t.value];if(!s)return"";const[a,v]=s.series.participants,p=s.series.winsByTeam[a]??0,n=s.series.winsByTeam[v]??0,w=((N=h(a))==null?void 0:N.displayName)??a,L=((S=h(v))==null?void 0:S.displayName)??v;return p===0&&n===0?"Series not started":s.series.winner?"MATCH COMPLETED":p===n?`Series tied ${p}-${n}`:p>n?`${w} leads ${p}-${n}`:`${L} leads ${n}-${p}`});function q(s){const a=h(s);return a?{name:a.displayName,twitch:a.twitch}:null}return(s,a)=>{var v,p;return r(),l(C,null,[e("div",xs,[o.value.length?(r(),l("div",{key:0,class:"match-wrapper",style:j({"--team-color":R(o.value[t.value].series.winner)})},[e("div",Ds,[e("div",{class:P(["status-pill",{live:O(J)(o.value[t.value]),finished:O(Y)(o.value[t.value])}])},[O(J)(o.value[t.value])?(r(),l("span",Vs,"LIVE")):O(Y)(o.value[t.value])?(r(),l("span",Gs," Completed Series")):(r(),l("span",Hs,"UPCOMING"))],2),I(o.value[t.value])?(r(),l("p",zs," Next Match: "+d(I(o.value[t.value])),1)):$("",!0)]),e("div",Us,[e("span",Ys,d(o.value[t.value].round),1),e("p",null,d(o.value[t.value].tag),1),e("span",Js," Best of "+d(o.value[t.value].series.bestOf),1)]),e("div",Zs,[(r(!0),l(C,null,A(o.value,(n,w)=>(r(),l("button",{key:n.series.id,class:P(["series-pill",{active:w===t.value}]),onClick:L=>i(w)},d(k(n)),11,Ks))),128))]),e("div",Qs,[e("div",Xs,[(r(!0),l(C,null,A(o.value[t.value].series.participants,n=>{var w,L,N,S,W,V,E;return r(),l("div",{key:n,class:P(["team-card-inner",{"winner-glow":o.value[t.value].series.winner===n}]),style:j({"--team-color":R(n)})},[e("div",se,[e("h2",ee,[B(d(((w=h(n))==null?void 0:w.displayName)??n)+" ",1),o.value[t.value].series.winner===n?(r(),l("span",te,"ðŸ‘‘")):$("",!0)])]),e("div",ae,[e("p",ne,[a[0]||(a[0]=e("span",null,"Record",-1)),e("strong",null,d(((L=h(n))==null?void 0:L.record)??"â€”"),1)]),e("p",oe,[a[1]||(a[1]=e("span",null,"Squares",-1)),e("strong",null,d(((N=h(n))==null?void 0:N.squares)??"â€”"),1)]),e("p",ie,[a[2]||(a[2]=e("span",null,"Lines",-1)),e("strong",null,d(((S=h(n))==null?void 0:S.lines)??"â€”"),1)])]),e("div",le,[(W=q(n))!=null&&W.twitch?(r(),l("a",{key:0,href:(V=q(n))==null?void 0:V.twitch,target:"_blank",class:"twitch-link"},[T(G,{class:"twitch-icon"}),e("span",ce,d((E=q(n))==null?void 0:E.name),1)],8,re)):$("",!0)])],6)}),128))]),e("div",de,[e("div",ue,[e("h3",ve,"BEST OF "+d(o.value[t.value].series.bestOf),1),e("p",me,d(D.value),1),e("p",pe,[o.value[t.value].series.winner?(r(),l("span",he,[a[3]||(a[3]=e("span",{class:"crown-icon"},"ðŸ‘‘",-1)),B(" "+d(y(o.value[t.value]))+" wins the series! ",1)])):(r(),l("span",fe,"Series in progress"))])]),e("div",_e,[e("div",ye,[e("span",we,d((v=h(o.value[t.value].series.participants[0]))==null?void 0:v.displayName),1),e("span",ge,d(o.value[t.value].series.winsByTeam[o.value[t.value].series.participants[0]]??0),1)]),e("div",ke,[(r(!0),l(C,null,A(o.value[t.value].series.bestOf,n=>{var w;return r(),l("div",{key:"dot-"+n,class:P(["game-dot",{"not-played":!((w=o.value[t.value].series.games[n-1])!=null&&w.winner)}]),style:j(U(o.value[t.value],n-1))},d(n),7)}),128))]),e("div",be,[e("span",$e,d(o.value[t.value].series.winsByTeam[o.value[t.value].series.participants[1]]??0),1),e("span",Se,d((p=h(o.value[t.value].series.participants[1]))==null?void 0:p.displayName),1)])]),e("div",Pe,[(r(!0),l(C,null,A(o.value[t.value].series.games,n=>{var w,L,N,S,W;return r(),l("div",{key:n.id,class:"game-box",style:j({"--team-color":R(n.winner)})},[e("div",Me,[e("h4",Le,d(b(n.id)),1),n.duration?(r(),l("span",Ne," â± "+d(n.duration),1)):$("",!0)]),e("div",Ce,[(w=n.media)!=null&&w.image?(r(),l("button",{key:0,class:"image-button",onClick:V=>{var E;return f((E=n.media)==null?void 0:E.image)}},[T(os,{class:"marika-eye"})],8,Ie)):$("",!0),(L=n.media)!=null&&L.vod?(r(),l("a",{key:1,class:"vod-button",href:(N=n.media)==null?void 0:N.vod,target:"_blank"},[T(G,{class:"youtube-icon"})],8,Re)):$("",!0)]),e("div",Ae,[e("p",{class:P({winner:n.winner===n.participants[0].id})},[B(d(((S=h(n.participants[0].id))==null?void 0:S.displayName)??n.participants[0].id)+" â€” ",1),e("strong",null,d(n.participants[0].score),1)],2),e("p",{class:P({winner:n.winner===n.participants[1].id})},[B(d(((W=h(n.participants[1].id))==null?void 0:W.displayName)??n.participants[1].id)+" â€” ",1),e("strong",null,d(n.participants[1].score),1)],2)]),e("p",Te,d(n.method??"No result yet"),1)],4)}),128))])])])],4)):$("",!0)]),_.value?(r(),l("div",{key:0,class:"modal-overlay",onClick:Z(u,["self"])},[e("div",We,[e("button",{class:"close-button",onClick:u},"âœ•"),e("img",{src:c.value,alt:"Match Board",class:"modal-image"},null,8,qe)])])):$("",!0)],64)}}}),Fe="/scadubingo-public/Anamnesis_Logo_Transparent.png",xe=x({name:"Anamnesis",components:{Navigation:Q,Standings:bs,MatchResults:Fs,Playoffs:Oe},mounted(){document.body.style.background="linear-gradient(182deg,rgba(10, 10, 10, 1) 0%, rgba(0, 0, 0, 1) 25%, rgba(0, 46, 42, 1) 100%)"},beforeUnmount(){document.body.style.background="#0d1321"}}),De={class:"main-container"};function Ve(m,o,g,_,c,f){const u=F("Navigation"),t=F("Playoffs"),i=F("Standings"),h=F("MatchResults");return r(),l("div",null,[T(u),e("div",De,[o[0]||(o[0]=e("div",{class:"top-image-container"},[e("img",{src:Fe,class:"logo"})],-1)),T(t),T(i),T(h)])])}const Qe=z(xe,[["render",Ve],["__scopeId","data-v-61c490ed"]]);export{Qe as default};
