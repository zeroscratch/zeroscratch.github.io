import{d as S,r as f,o as d,c as v,a as e,F as _,b as C,t as l,_ as T,e as M,f as W,g as $,n as w,h as q,i as k,w as R,M as z,T as I,I as x,Y as A,D as N,H as E,j as L,k as F,l as V}from"./index-prbFPIMC.js";const H="/data/crucibleStandings.json";async function J(){return fetch(H).then(m=>m.json()).then(m=>{for(let r=0;r<m.CruciblePlayers.length;r++){var i=m.CruciblePlayers[r].wins,h=m.CruciblePlayers[r].wins+m.CruciblePlayers[r].losses;m.CruciblePlayers[r].games=h;var y=Y(i,h);m.CruciblePlayers[r].wr=y;var c=m.CruciblePlayers[r].opponentWins,o=m.CruciblePlayers[r].opponentLoss;m.CruciblePlayers[r].recordStrength=c/(o+c)}return m.CruciblePlayers.sort((r,u)=>{if(u.wins!==r.wins)return u.wins-r.wins;const p=Number(r.wr.substring(0,r.wr.length-1)),n=Number(u.wr.substring(0,u.wr.length-1));return n!==p?n-p:u.recordStrength-r.recordStrength}).forEach((r,u)=>{r.standing=u+1}),m})}function Y(m,i){if(m===0||i===0)return"0%";{var h=m/i*100;const c=`${Math.round(h)}%`;return String(c)}}const D={class:"table-container"},G={class:"table-wrapper"},j={class:"horizontal-lines-table"},K=S({__name:"CrucibleTable",props:{CruciblePlayers:{}},setup(m){const i=f(["Standing","Player","Wins","Losses","Games","WR"]),h=f(["standing","name","wins","losses","games","wr"]);return(y,c)=>(d(),v("div",D,[e("div",G,[c[0]||(c[0]=e("h2",{class:"redmanes-header"},"The Crucible",-1)),e("table",j,[e("thead",null,[e("tr",null,[(d(!0),v(_,null,C(i.value,(o,r)=>(d(),v("th",{key:"table1-header-"+r},l(o),1))),128))])]),e("tbody",null,[(d(!0),v(_,null,C(y.CruciblePlayers,(o,r)=>(d(),v("tr",{key:"table1-row-rednames"+r},[(d(!0),v(_,null,C(h.value,u=>(d(),v("td",null,l(o[u]),1))),256))]))),128))])])])]))}}),O=T(K,[["__scopeId","data-v-7d1f5af4"]]),U=async()=>{const m="/data/normalizedResults.json";try{const i=await fetch(m);if(!i.ok)throw new Error(`Failed to fetch stats: ${i.statusText}`);const h=await i.json();if(!h.crucible)throw new Error("Crucible data not found.");return{matches:h.crucible.flatMap(c=>c.matches.map(o=>({...o,week:c.week})))}}catch(i){throw console.error(i),new Error("Failed to load Crucible stats. Please try again later.")}},Q={class:"container"},X={key:0,class:"error"},Z={class:"table-container"},ee={class:"results-table"},se={class:"table-caption"},te={class:"week-button-group"},ne=["onClick"],ie={rowspan:2},re={rowspan:2},oe={rowspan:2},ae=["src"],le=S({__name:"CrucibleResultsTable",setup(m){const i=f({matches:[]}),h=f(!1),y=f(void 0),c=f(null),o=f(null),r=a=>{y.value=a,h.value=!0},u=a=>a==="Bingo"||a==="Majority"?"highlight-green":a==="Lost"?"highlight-red":"",p=M(()=>{const a=new Set(i.value.matches.map(t=>t.week));return Array.from(a).sort((t,s)=>t-s)}),n=M(()=>o.value!==null?i.value.matches.filter(a=>a.week===o.value):i.value.matches);return W(async()=>{try{i.value=await U();const a=p.value;a.length>0&&(o.value=a[8])}catch(a){c.value=a.message}}),(a,t)=>(d(),v("div",Q,[c.value?(d(),v("div",X,l(c.value),1)):$("",!0),e("div",Z,[e("table",ee,[e("caption",se,[e("div",te,[(d(!0),v(_,null,C(p.value,s=>(d(),v("button",{key:s,class:w(["week-button",{active:o.value===s}]),onClick:b=>o.value=s}," Week "+l(s),11,ne))),128)),e("button",{class:w(["week-button",{active:o.value===null}]),onClick:t[0]||(t[0]=s=>o.value=null)}," All Weeks ",2)])]),t[2]||(t[2]=e("thead",null,[e("tr",null,[e("th",null,"Game"),e("th",null,"Player"),e("th",null,"Score"),e("th",null,"Win Condition"),e("th",null,"Match Time"),e("th",null,"Board")])],-1)),e("tbody",null,[(d(!0),v(_,null,C(n.value,(s,b)=>(d(),v(_,{key:b},[e("tr",{class:w({"new-game-row":b===0||n.value[b-1].gameId!==s.gameId})},[e("td",ie,l(s.gameId),1),e("td",{class:w(u(s.player1.outcome))},l(s.player1.name),3),e("td",{class:w(u(s.player1.outcome))},l(s.player1.score),3),e("td",{class:w(u(s.player1.outcome))},l(s.player1.outcome),3),e("td",re,l(s.matchTime),1),e("td",oe,[s.imageLink?(d(),q(x,{key:0,onClick:P=>r(s.imageLink),class:"marika-eye"},null,8,["onClick"])):$("",!0)])],2),e("tr",null,[e("td",{class:w(u(s.player2.outcome))},l(s.player2.name),3),e("td",{class:w(u(s.player2.outcome))},l(s.player2.score),3),e("td",{class:w(u(s.player2.outcome))},l(s.player2.outcome),3)])],64))),128))])])]),(d(),q(I,{to:"body"},[k(z,{show:h.value,onClose:t[1]||(t[1]=s=>h.value=!1)},{default:R(()=>[e("img",{src:y.value,alt:"Board Image",style:{"max-width":"100%",height:"auto"}},null,8,ae)]),_:1},8,["show"])]))]))}}),ce=T(le,[["__scopeId","data-v-abc76e15"]]),de=async()=>{const m="/data/crucibleSquareStats.json";try{const i=await fetch(m);if(!i.ok)throw new Error(`Failed to fetch challenge records: ${i.statusText}`);const h=await i.json();return{records:Object.entries(h).map(([c,o])=>({name:c,completed:o.Completed,appeared:o.Appeared,ratio:o.Ratio,appearance:o.Appearance}))}}catch(i){throw console.error(i),new Error("Failed to load challenge records. Please try again later.")}},ue={class:"container"},me={key:0,class:"error"},ve={key:1,class:"table-container"},pe={class:"results-table"},we={class:"left-column"},he=S({__name:"CrucibleSquareStatsTable",setup(m){const i=f({records:[]}),h=f(null),y=f("name"),c=f("asc");W(async()=>{let u=73;try{const p=await de();i.value.records=p.records.map(n=>{const a=n.appeared>0?Number((n.completed/n.appeared*100).toFixed(0)):0,t=Number((n.appeared/u*100).toFixed(0));return{...n,ratio:a,appearance:t}}),i.value.records.sort((n,a)=>n.name.localeCompare(a.name))}catch(p){h.value=p.message}});const o=u=>{y.value===u?c.value=c.value==="asc"?"desc":"asc":(y.value=u,c.value="desc"),i.value.records.sort((p,n)=>{let a=parseFloat(p[u]),t=parseFloat(n[u]);return c.value==="asc"?a-t:t-a})},r=()=>{y.value==="name"?c.value=c.value==="asc"?"desc":"asc":(y.value="name",c.value="desc"),i.value.records.sort((u,p)=>{const n=u.name.toLowerCase(),a=p.name.toLowerCase();return c.value==="asc"?n.localeCompare(a):a.localeCompare(n)})};return(u,p)=>(d(),v("div",ue,[h.value?(d(),v("div",me,l(h.value),1)):(d(),v("div",ve,[e("table",pe,[e("thead",null,[e("tr",null,[e("th",{onClick:r,class:"sortable"},"Square Name ⬍"),e("th",{onClick:p[0]||(p[0]=n=>o("completed")),class:"sortable"},"Completed ⬍"),e("th",{onClick:p[1]||(p[1]=n=>o("appeared")),class:"sortable"},"Appeared ⬍"),e("th",{onClick:p[2]||(p[2]=n=>o("ratio")),class:"sortable"},"Completion % ⬍"),e("th",{onClick:p[3]||(p[3]=n=>o("appearance")),class:"sortable"},"Appearance % ⬍")])]),e("tbody",null,[(d(!0),v(_,null,C(i.value.records,(n,a)=>(d(),v("tr",{key:a},[e("td",we,l(n.name),1),e("td",null,l(n.completed),1),e("td",null,l(n.appeared),1),e("td",null,l(n.ratio)+"%",1),e("td",null,l(n.appearance)+"%",1)]))),128))])])]))]))}}),ye=T(he,[["__scopeId","data-v-1d6799f8"]]),fe={class:"bracket-container"},_e={class:"wrapper"},be={class:"item"},ge={class:"item-childrens"},ke={class:"item-child"},Ce={class:"item"},$e={class:"item-childrens"},Le={class:"item-child"},Te={class:"item"},qe={class:"item-child"},Se={class:"item"},Pe={class:"item-childrens"},Be={class:"wrapper"},Me={class:"item"},We={class:"item-childrens"},Re={class:"item-child"},ze={class:"item"},Ie={class:"item-childrens"},xe={class:"item-child"},Ae={class:"item"},Ne={class:"item-child"},Ee={class:"item"},Fe={class:"item-childrens"},Ve={key:0,class:"match-details"},He={class:"game-info"},Je={class:"player"},Ye={class:"player"},De={class:"outcome"},Ge={key:0},je={key:1},Ke={key:0,class:"icon-row"},Oe=["href"],Ue=["src"],Qe=S({__name:"CruciblePlayoffBracketWinners",setup(m){const i=f(!1),h=f(void 0),y=f({"winners-finals":[{gameid:1,player1:{name:"Snowy",score:0,outcome:"",division:"1"},player2:{name:"Malte",score:0,outcome:"",division:"6"},matchTime:"00:00:00",vodLink:"",imageLink:""}],"grand-finals":[{gameid:1,player1:{name:"TBD",score:0,outcome:"",division:""},player2:{name:"TBD",score:0,outcome:"",division:""},matchTime:"00:00:00",vodLink:"",imageLink:""}],"winners-semis-1":[{gameid:1,player1:{name:"Snowy",score:13,outcome:"win",division:"1"},player2:{name:"Jerzounek",score:8,outcome:"loss",division:"3"},matchTime:"01:37:31",vodLink:"https://www.twitch.tv/videos/2439148805?t=00h19m22s",imageLink:"/img/crucible/snowy-v-jerz-playoffs.png"}],"winners-semis-2":[{gameid:1,player1:{name:"Cronys",score:11,outcome:"loss",division:"2"},player2:{name:"Malte",score:13,outcome:"win",division:"6"},matchTime:"01:25:11",vodLink:"https://www.twitch.tv/videos/2435522534?t=00h15m54s",imageLink:"/img/crucible/cronys-v-malte-playoff.png"}],"winner-quarters-1":[{gameid:1,player1:{name:"Snowy",score:13,outcome:"win",division:"1"},player2:{name:"Lorian",score:10,outcome:"loss",division:"8"},matchTime:"01:32:06",vodLink:"https://www.twitch.tv/videos/2430947463?t=06h30m37s",imageLink:"/img/crucible/snowy-v-lorian-playoff.png"}],"winner-quarters-2":[{gameid:1,player1:{name:"Jerzounek",score:0,outcome:"win",division:"3"},player2:{name:"Harv",score:0,outcome:"",division:"5"},matchTime:"00:00:00",vodLink:"",imageLink:""}],"winner-quarters-3":[{gameid:1,player1:{name:"Cronys",score:13,outcome:"win",division:"2"},player2:{name:"Doitz",score:12,outcome:"loss",division:"7"},matchTime:"01:39:22",vodLink:"https://www.twitch.tv/videos/2426753608?t=03h44m01s",imageLink:"/img/crucible/cronys-v-doitz-playoffs.png"}],"winner-quarters-4":[{gameid:1,player1:{name:"Loeless",score:7,outcome:"loss",division:"4"},player2:{name:"Malte",score:13,outcome:"win",division:"6"},matchTime:"01:14:34",vodLink:"https://www.twitch.tv/videos/2430947463?t=00h24m11s",imageLink:"/img/crucible/loe-v-malte-playoffs.png"}],"losers-round1-1":[{gameid:1,player1:{name:"Lorian",score:8,outcome:"win",division:"8"},player2:{name:"Harv",score:4,outcome:"loss",division:"5"},matchTime:"00:59:26",vodLink:"",imageLink:"/img/crucible/lorian-v-harv-playoff.png"}],"losers-round1-2":[{gameid:1,player1:{name:"Loeless",score:11,outcome:"loss",division:"4"},player2:{name:"Doitz",score:13,outcome:"win",division:"7"},matchTime:"01:40:23",vodLink:"https://www.twitch.tv/videos/2436420000?t=04h44m46s",imageLink:"/img/crucible/doitz-v-loe.png"}],"losers-quarters-1":[{gameid:1,player1:{name:"Cronys",score:7,outcome:"win",division:"2"},player2:{name:"Lorian",score:4,outcome:"loss",division:"8"},matchTime:"00:46:49",vodLink:"https://www.twitch.tv/videos/2445154357?t=00h18m48s",imageLink:"/img/crucible/cronys-v-lorian-playoff.png"}],"losers-quarters-2":[{gameid:1,player1:{name:"Jerzounek",score:13,outcome:"win",division:"3"},player2:{name:"Doitz",score:8,outcome:"loss",division:"7"},matchTime:"00:00:00",vodLink:"",imageLink:""}],"losers-semis":[{gameid:1,player1:{name:"Cronys",score:0,outcome:"",division:""},player2:{name:"Jerzounek",score:0,outcome:"",division:""},matchTime:"00:00:00",vodLink:"",imageLink:""}],"losers-finals":[{gameid:1,player1:{name:"TBD",score:0,outcome:"",division:""},player2:{name:"TBD",score:0,outcome:"",division:""},matchTime:"00:00:00",vodLink:"",imageLink:""}]}),c=f([]);function o(a){c.value=y.value[a]}function r(a){var s;const t=(s=y.value[a])==null?void 0:s[0];return t?`${t.player1.name} vs ${t.player2.name}`:"TBD"}const u=a=>{h.value=a,i.value=!0},p=a=>{const{player1:t,player2:s}=a;return t.outcome==="win"?{"first-win":t.division==="1","second-win":t.division==="2","third-win":t.division==="3","fourth-win":t.division==="4","fifth-win":t.division==="5","sixth-win":t.division==="6","seventh-win":t.division==="7","eighth-win":t.division==="8"}:s.outcome==="win"?{"first-win":s.division==="1","second-win":s.division==="2","third-win":s.division==="3","fourth-win":s.division==="4","fifth-win":s.division==="5","sixth-win":s.division==="6","seventh-win":s.division==="7","eighth-win":s.division==="8"}:{}};function n(a){const t=y.value[a];if(!t||t.length===0)return"";let s=0,b=0;for(const B of t)B.player1.outcome==="win"&&s++,B.player2.outcome==="win"&&b++;const P=s>b?"player1":b>s?"player2":null;if(!P)return"";const g=P==="player1"?t[0].player1.name.trim().toLowerCase():t[0].player2.name.trim().toLowerCase();return g==="snowy"?"first-win":g==="cronys"?"second-win":g==="jerzounek"?"third-win":g==="loeless"?"fourth-win":g==="harv"?"fifth-win":g==="malte"?"sixth-win":g==="doitz"?"seventh-win":g==="lorian"?"eighth-win":"bg-neutral"}return(a,t)=>(d(),v(_,null,[e("div",fe,[e("div",_e,[e("div",be,[e("div",{class:"item-parent",onClick:t[0]||(t[0]=s=>o("grand-finals"))},[e("p",{class:w(n("grand-finals"))},l(r("grand-finals")),3)]),e("div",{class:"item-parent",onClick:t[1]||(t[1]=s=>o("winners-finals"))},[e("p",{class:w(n("winners-finals"))},l(r("winners-finals")),3)]),e("div",ge,[e("div",ke,[e("div",Ce,[e("div",{class:"item-parent",onClick:t[2]||(t[2]=s=>o("winners-semis-1"))},[e("p",{class:w(n("winners-semis-1"))},l(r("winners-semis-1")),3)]),e("div",$e,[e("div",Le,[e("div",Te,[e("div",{class:"item-parent no-parent-connector",onClick:t[3]||(t[3]=s=>o("winner-quarters-1"))},[e("p",{class:w(n("winner-quarters-1"))},l(r("winner-quarters-1")),3)])])]),e("div",{class:"item-child",onClick:t[4]||(t[4]=s=>o("winner-quarters-2"))},[e("p",{class:w(n("winner-quarters-2"))},l(r("winner-quarters-2")),3)])])])]),e("div",qe,[e("div",Se,[e("div",{class:"item-parent",onClick:t[5]||(t[5]=s=>o("winners-semis-2"))},[e("p",{class:w(n("winners-semis-2"))},l(r("winners-semis-2")),3)]),e("div",Pe,[e("div",{class:"item-child",onClick:t[6]||(t[6]=s=>o("winner-quarters-3"))},[e("p",{class:w(n("winner-quarters-3"))},l(r("winner-quarters-3")),3)]),e("div",{class:"item-child",onClick:t[7]||(t[7]=s=>o("winner-quarters-4"))},[e("p",{class:w(n("winner-quarters-4"))},l(r("winner-quarters-4")),3)])])])])])])]),e("div",Be,[e("div",Me,[e("div",{class:"item-parent",onClick:t[8]||(t[8]=s=>o("losers-finals"))},[e("p",{class:w(n("losers-finals"))},l(r("losers-finals")),3)]),e("div",{class:"item-parent",onClick:t[9]||(t[9]=s=>o("losers-semis"))},[e("p",{class:w(n("losers-semis"))},l(r("losers-semis")),3)]),e("div",We,[e("div",Re,[e("div",ze,[e("div",{class:"item-parent",onClick:t[10]||(t[10]=s=>o("losers-quarters-1"))},[e("p",{class:w(n("losers-quarters-1"))},l(r("losers-quarters-1")),3)]),e("div",Ie,[e("div",xe,[e("div",Ae,[e("div",{class:"item-parent no-parent-connector",onClick:t[11]||(t[11]=s=>o("losers-round1-1"))},[e("p",{class:w(n("losers-round1-1"))},l(r("losers-round1-1")),3)])])])])])]),e("div",Ne,[e("div",Ee,[e("div",{class:"item-parent",onClick:t[12]||(t[12]=s=>o("losers-quarters-2"))},[e("p",{class:w(n("losers-quarters-2"))},l(r("losers-quarters-2")),3)]),e("div",Fe,[e("div",{class:"item-child",onClick:t[13]||(t[13]=s=>o("losers-round1-2"))},[e("p",{class:w(n("losers-round1-2"))},l(r("losers-round1-2")),3)])])])])])])]),c.value?(d(),v("div",Ve,[t[15]||(t[15]=e("h2",null,"Match Details",-1)),(d(!0),v(_,null,C(c.value,s=>(d(),v("div",{class:w(["game-card",p(s)]),key:s.gameid},[e("div",He,[e("div",Je,l(s.player1.name)+" ("+l(s.player1.division)+") - "+l(s.player1.score),1),e("div",Ye,l(s.player2.name)+" ("+l(s.player2.division)+") - "+l(s.player2.score),1),e("div",De,[s.player1.outcome==="win"||s.player2.outcome==="win"?(d(),v("span",Ge," Winner: "+l(s.player1.outcome==="win"?s.player1.name:s.player2.name),1)):(d(),v("span",je," Winner: TBD "))]),s.imageLink||s.vodLink?(d(),v("div",Ke,[s.imageLink?(d(),q(x,{key:0,onClick:b=>u(s.imageLink),class:"marika-eye"},null,8,["onClick"])):$("",!0),s.vodLink?(d(),v("a",{key:1,href:s.vodLink,target:"_blank",class:"no-hover"},[k(A)],8,Oe)):$("",!0)])):$("",!0)])],2))),128))])):$("",!0)]),(d(),q(I,{to:"body"},[k(z,{show:i.value,onClose:t[14]||(t[14]=s=>i.value=!1)},{default:R(()=>[e("img",{src:h.value,alt:"Board Image",style:{"max-width":"100%",height:"auto"}},null,8,Ue)]),_:1},8,["show"])]))],64))}}),Xe=T(Qe,[["__scopeId","data-v-c4402c9e"]]),Ze={name:"CrucibleView",components:{CrucibleTable:O,Divider:N,HeaderView:E,CrucibleResultsTable:ce,CrucibleSquareStatsTable:ye,CruciblePlayoffBracketWinners:Xe},data(){return{table:{cruciblePlayers:{CruciblePlayers:[]}}}},created(){J().then(m=>{console.log(m),this.table.cruciblePlayers=m})}},es={class:"main-container"},ss={class:"table-container"};function ts(m,i,h,y,c,o){const r=L("HeaderView"),u=L("CruciblePlayoffBracketWinners"),p=L("CrucibleTable"),n=L("CrucibleResultsTable"),a=L("CrucibleSquareStatsTable");return d(),v(_,null,[k(r),e("div",es,[i[2]||(i[2]=e("div",{class:"top-image-container"},[e("img",{src:F,alt:"Stars Ending",class:"grayscale-image"}),e("img",{src:V,alt:"Logo",class:"logo-image"})],-1)),i[3]||(i[3]=e("h1",{class:"header-2"},"Crucible Playoff Bracket",-1)),k(u,{class:"bracket-section"}),i[4]||(i[4]=e("h1",{class:"header"},"The Crucible Standings",-1)),e("div",ss,[k(p,{CruciblePlayers:c.table.cruciblePlayers.CruciblePlayers},null,8,["CruciblePlayers"])]),e("div",null,[i[0]||(i[0]=e("h1",null,"Crucible Results",-1)),k(n)]),e("div",null,[i[1]||(i[1]=e("h1",null,"Crucible Square Stats",-1)),k(a)])])],64)}const is=T(Ze,[["render",ts],["__scopeId","data-v-32b3e901"]]);export{is as default};
