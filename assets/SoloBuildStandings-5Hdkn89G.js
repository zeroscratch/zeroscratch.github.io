function v(c,u,f){const l={};return c.forEach(r=>{const w=r.wins+r.losses,h=u-w,y=r.wins,e=r.wins+h;if(c.filter(o=>{if(o.playerid===r.playerid)return!1;const s=u-(o.wins+o.losses);return o.wins+s>y}).length<f){l[r.playerid]="yes";return}if(c.filter(o=>o.playerid===r.playerid?!1:o.wins>e).length>=f){l[r.playerid]="no";return}l[r.playerid]="maybe"}),l}function m(c,u,f=[],l=[],r=[]){const{matches:w,individualMaxGamesPlayed:h,playoffSlots:y}=c,e={};function t(s){if(e[s])return;const n=u[s];n&&(e[s]={id:s,displayName:n.displayName,wins:0,losses:0,squares:0,lines:0,h2h:{}})}w.forEach(s=>{const[n,a]=s.participants,i=s.winner,q=n.id===i?a.id:n.id;t(n.id),t(a.id),!(!e[i]||!e[q])&&(e[i].wins++,e[q].losses++,e[n.id].squares+=n.score,e[a.id].squares+=a.score,s.method==="Bingo"&&e[i].lines++,e[i].h2h[q]=!0)}),f.forEach(s=>{t(s.winner),t(s.loser),!(!e[s.winner]||!e[s.loser])&&(e[s.winner].wins++,e[s.loser].losses++,e[s.winner].squares+=s.squaresAwarded,s.countsAsLine&&e[s.winner].lines++,e[s.winner].h2h[s.loser]=!0)}),l.forEach(s=>{t(s.receiver),e[s.receiver]&&(e[s.receiver].lines+=s.linesAwarded)}),r.forEach(s=>{t(s.receiver),e[s.receiver]&&(e[s.receiver].losses+=s.gamesLost,e[s.receiver].squares-=s.squaresLost,e[s.receiver].lines-=s.linesLost)});const d=Object.values(e).map(s=>{const n=s.wins+s.losses,a=n>0?(s.wins/n*100).toFixed(1):"0.0",i=u[s.id];return{playerid:s.id,displayName:s.displayName,wins:s.wins,losses:s.losses,record:`${s.wins}-${s.losses}`,gamesPlayed:n,WR:a,squares:s.squares,lines:s.lines,h2h:s.h2h,Playoffs:"maybe",nickname:i==null?void 0:i.nickname,twitch:i==null?void 0:i.twitch,profilePic:i==null?void 0:i.profilePic}});d.sort((s,n)=>n.wins!==s.wins?n.wins-s.wins:s.losses!==n.losses?s.losses-n.losses:s.h2h[n.playerid]?-1:n.h2h[s.playerid]?1:n.lines!==s.lines?n.lines-s.lines:n.squares!==s.squares?n.squares-s.squares:0);const o=v(d,h,y);return d.forEach(s=>{s.Playoffs=o[s.playerid]}),d}export{m as b};
