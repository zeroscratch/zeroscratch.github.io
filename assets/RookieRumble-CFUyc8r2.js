import{_ as v,m as I,r as g,f as y,j as k,o as u,c as d,a as e,F as b,b as R,t as c,i as _,g as f,d as $,M as L,I as A,e as M,n as p,h as C,w as D,T as E,N as S}from"./index-DDmXxXwF.js";const W="/data/RookieRumbleData/rookieRumbleStandings.json";async function j(){const t=await(await fetch(W)).json(),m=Object.entries(t).map(([i,o])=>{const h=o.wins,r=o.losses,l=h+r;return{...o,name:i,games:l,wr:B(h,l)}});return m.sort((i,o)=>{if(o.wins!==i.wins)return o.wins-i.wins;const h=parseInt(i.wr),r=parseInt(o.wr);return r!==h?r-h:o.victory.includes(i.name)?o.wins-i.wins:o.lines!==i.lines?o.lines-i.lines:o.squares-i.squares}).forEach((i,o)=>{i.standing=o+1}),m}function B(s,t){if(t===0)return"0%";const m=s/t*100;return`${Math.round(m)}%`}const U={name:"RookieRumbleTable",components:{TwitchIcon:I},setup(){const s=g([]);return y(async()=>{s.value=await j()}),{players:s}}},N={class:"table-container"},P=["href"];function F(s,t,m,i,o,h){const r=k("TwitchIcon");return u(),d("div",N,[e("table",null,[t[0]||(t[0]=e("thead",null,[e("tr",null,[e("th",null,"Standing"),e("th",null,"Player"),e("th",null,"Wins"),e("th",null,"Losses"),e("th",null,"WR"),e("th",null,"Games"),e("th",null,"Squares"),e("th",null,"Lines"),e("th",null,"Twitch")])],-1)),e("tbody",null,[(u(!0),d(b,null,R(i.players,l=>(u(),d("tr",{key:l.name},[e("td",null,c(l.standing),1),e("td",null,c(l.name),1),e("td",null,c(l.wins),1),e("td",null,c(l.losses),1),e("td",null,c(l.wr),1),e("td",null,c(l.games),1),e("td",null,c(l.squares),1),e("td",null,c(l.lines),1),e("td",null,[l.twitch?(u(),d("a",{key:0,href:l.twitch,class:"twitch-link"},[_(r,{class:"icon"})],8,P)):f("",!0)])]))),128))])])])}const q=v(U,[["render",F],["__scopeId","data-v-c13bff33"]]);async function V(){const s="/data/RookieRumbleData/rookieRumbleMatchResults.json";try{const t=await fetch(s);if(!t.ok)throw new Error(`Failed to fetch stats: ${t.statusText}`);const m=await t.json();if(!Array.isArray(m))throw new Error("Invalid format: expected an array of weeks.");return{matches:m.flatMap(o=>o.matches.map(h=>({...h,week:o.week})))}}catch(t){throw console.error(t),new Error("Failed to load Rookie Rumble Match Results. Please try again later.")}}const G=$({name:"RookieRumbleResultsTable",components:{Modal:L,IconMarikasEye:A},setup(){const s=g({matches:[]}),t=g(!1),m=g(null),i=g(null),o=g(null),h=a=>{m.value=a,t.value=!0},r=a=>a==="Bingo"?"highlight-green":a==="Lost"?"highlight-red":"",l=M(()=>{const a=new Set(s.value.matches.map(w=>w.week));return Array.from(a).sort((w,T)=>w-T)}),n=M(()=>o.value!==null?s.value.matches.filter(a=>a.week===o.value):s.value.matches);return y(async()=>{try{s.value=await V();const a=l.value;a.length>0&&(o.value=a[a.length-1])}catch(a){i.value=a.message}}),{currentResults:s,showModal:t,modalImage:m,errorMessage:i,selectedWeek:o,weeks:l,filteredMatches:n,openModal:h,getCellClass:r}}}),H={class:"container"},O={key:0,class:"error"},z={class:"table-container"},Y={class:"results-table"},Z={class:"table-caption"},J={class:"week-button-group"},K=["onClick"],Q={rowspan:2},X={rowspan:2},x={rowspan:2},ee=["src"];function se(s,t,m,i,o,h){const r=k("IconMarikasEye"),l=k("Modal");return u(),d("div",H,[s.errorMessage?(u(),d("div",O,c(s.errorMessage),1)):f("",!0),e("div",z,[e("table",Y,[e("caption",Z,[e("div",J,[(u(!0),d(b,null,R(s.weeks,n=>(u(),d("button",{key:n,class:p(["week-button",{active:s.selectedWeek===n}]),onClick:a=>s.selectedWeek=n}," Week "+c(n),11,K))),128)),e("button",{class:p(["week-button",{active:s.selectedWeek===null}]),onClick:t[0]||(t[0]=n=>s.selectedWeek=null)}," All Weeks ",2)])]),t[2]||(t[2]=e("thead",null,[e("tr",null,[e("th",null,"Game"),e("th",null,"Player"),e("th",null,"Score"),e("th",null,"Outcome"),e("th",null,"Time"),e("th",null,"Board")])],-1)),e("tbody",null,[(u(!0),d(b,null,R(s.filteredMatches,(n,a)=>(u(),d(b,{key:a},[e("tr",{class:p({"new-game-row":a===0||s.filteredMatches[a-1].gameId!==n.gameId})},[e("td",Q,c(n.gameId),1),e("td",{class:p(s.getCellClass(n.player1.outcome))},c(n.player1.name),3),e("td",{class:p(s.getCellClass(n.player1.outcome))},c(n.player1.score),3),e("td",{class:p(s.getCellClass(n.player1.outcome))},c(n.player1.outcome),3),e("td",X,c(n.matchTime),1),e("td",x,[n.imageLink?(u(),C(r,{key:0,onClick:w=>s.openModal(n.imageLink),class:"marika-eye"},null,8,["onClick"])):f("",!0)])],2),e("tr",null,[e("td",{class:p(s.getCellClass(n.player2.outcome))},c(n.player2.name),3),e("td",{class:p(s.getCellClass(n.player2.outcome))},c(n.player2.score),3),e("td",{class:p(s.getCellClass(n.player2.outcome))},c(n.player2.outcome),3)])],64))),128))])])]),(u(),C(E,{to:"body"},[_(l,{show:s.showModal,onClose:t[1]||(t[1]=n=>s.showModal=!1)},{default:D(()=>[e("img",{src:s.modalImage,alt:"Board",style:{"max-width":"100%",height:"auto"}},null,8,ee)]),_:1},8,["show"])]))])}const te=v(G,[["render",se],["__scopeId","data-v-7271ab63"]]),oe=$({name:"UpcomingMatchCards",setup(){const s=g([]),t=g(null),m=async()=>{try{const o=await fetch("/data/RookieRumbleData/rookieRumbleUpcomingMatches.json");if(!o.ok)throw new Error(`Failed to fetch: ${o.statusText}`);const h=await o.json(),r=new Date;s.value=h.map(l=>{const n=new Date(l.scheduledAt),a=new Date(r.getTime()-2*60*60*1e3),w=n<=r&&n>=a;return{...l,isLive:w}}).filter(l=>{const n=new Date(l.scheduledAt),a=new Date(r.getTime()-2*60*60*1e3);return n>a})}catch(o){t.value=o.message}},i=o=>new Date(o).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZoneName:"short"});return y(m),{matches:s,errorMessage:t,formatDate:i}}}),ne={class:"upcoming-matches"},le={key:0,class:"error"},ae={class:"match-grid"},re={class:"players"},ie={class:"player"},ce={class:"player"},ue={class:"scheduled"},de={key:0,class:"type"},me={key:1,class:"live-badge"};function he(s,t,m,i,o,h){return u(),d("div",ne,[s.errorMessage?(u(),d("div",le,c(s.errorMessage),1)):f("",!0),e("div",ae,[(u(!0),d(b,null,R(s.matches.slice(0,3),(r,l)=>(u(),d("div",{key:l,class:p(["match-card",{live:r.isLive}])},[e("h3",null,c(r.title),1),e("div",re,[e("span",ie,c(r.firstPlayer),1),t[0]||(t[0]=e("span",{class:"vs"},"vs",-1)),e("span",ce,c(r.secondPlayer),1)]),e("div",ue,c(s.formatDate(r.scheduledAt)),1),r.matchType===2?(u(),d("div",de,"Best of 3")):f("",!0),r.isLive?(u(),d("div",me,"LIVE")):f("",!0)],2))),128))])])}const pe=v(oe,[["render",he],["__scopeId","data-v-509a8d9a"]]),ge="/rookie-rumble-public/the-erdtree-elden-ring-thumb.jpg",ke="/rookie-rumble-public/Rookie_Rumble_2_Logo.png",we=$({name:"RookieRumble",components:{RookieRumbleTable:q,Navigation:S,RookieRumbleResultsTable:te,RookieRumbleUpcomingMatches:pe},mounted(){document.body.style.backgroundColor="#10002b"},beforeUnmount(){document.body.style.backgroundColor="#0d1321"}}),_e={class:"main-container"};function fe(s,t,m,i,o,h){const r=k("Navigation"),l=k("RookieRumbleUpcomingMatches"),n=k("RookieRumbleTable"),a=k("RookieRumbleResultsTable");return u(),d("div",null,[_(r),e("div",_e,[t[0]||(t[0]=e("div",{class:"top-image-container"},[e("img",{src:ge,class:"background-img"}),e("img",{src:ke,class:"logo"})],-1)),t[1]||(t[1]=e("h1",{class:"Title"},"Upcoming Matches",-1)),_(l),t[2]||(t[2]=e("h1",{class:"Title"},"Rookie Rumble Standings",-1)),_(n),t[3]||(t[3]=e("h1",{class:"Title"},"Rookie Rumble Match Results",-1)),_(a)])])}const Re=v(we,[["render",fe],["__scopeId","data-v-a930fd78"]]);export{Re as default};
