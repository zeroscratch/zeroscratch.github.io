import{d as S,r as f,o as d,c as v,a as e,F as g,b as C,t as l,_ as T,e as W,f as B,g as L,n as w,h as q,i as k,w as z,M as R,T as I,I as x,Y as N,D as A,N as E,j as F,k as V,l as $}from"./index--r_v0M65.js";const H="/data/crucibleStandings.json";async function J(){return fetch(H).then(m=>m.json()).then(m=>{for(let o=0;o<m.CruciblePlayers.length;o++){var n=m.CruciblePlayers[o].wins,h=m.CruciblePlayers[o].wins+m.CruciblePlayers[o].losses;m.CruciblePlayers[o].games=h;var y=Y(n,h);m.CruciblePlayers[o].wr=y;var c=m.CruciblePlayers[o].opponentWins,r=m.CruciblePlayers[o].opponentLoss;m.CruciblePlayers[o].recordStrength=c/(r+c)}return m.CruciblePlayers.sort((o,u)=>{if(u.wins!==o.wins)return u.wins-o.wins;const p=Number(o.wr.substring(0,o.wr.length-1)),i=Number(u.wr.substring(0,u.wr.length-1));return i!==p?i-p:u.recordStrength-o.recordStrength}).forEach((o,u)=>{o.standing=u+1}),m})}function Y(m,n){if(m===0||n===0)return"0%";{var h=m/n*100;const c=`${Math.round(h)}%`;return String(c)}}const j={class:"table-container"},G={class:"table-wrapper"},K={class:"horizontal-lines-table"},O=S({__name:"CrucibleTable",props:{CruciblePlayers:{}},setup(m){const n=f(["Standing","Player","Wins","Losses","Games","WR"]),h=f(["standing","name","wins","losses","games","wr"]);return(y,c)=>(d(),v("div",j,[e("div",G,[c[0]||(c[0]=e("h2",{class:"redmanes-header"},"The Crucible",-1)),e("table",K,[e("thead",null,[e("tr",null,[(d(!0),v(g,null,C(n.value,(r,o)=>(d(),v("th",{key:"table1-header-"+o},l(r),1))),128))])]),e("tbody",null,[(d(!0),v(g,null,C(y.CruciblePlayers,(r,o)=>(d(),v("tr",{key:"table1-row-rednames"+o},[(d(!0),v(g,null,C(h.value,u=>(d(),v("td",null,l(r[u]),1))),256))]))),128))])])])]))}}),U=T(O,[["__scopeId","data-v-7d1f5af4"]]),Q=async()=>{const m="/data/normalizedResults.json";try{const n=await fetch(m);if(!n.ok)throw new Error(`Failed to fetch stats: ${n.statusText}`);const h=await n.json();if(!h.crucible)throw new Error("Crucible data not found.");return{matches:h.crucible.flatMap(c=>c.matches.map(r=>({...r,week:c.week})))}}catch(n){throw console.error(n),new Error("Failed to load Crucible stats. Please try again later.")}},X={class:"container"},Z={key:0,class:"error"},D={class:"table-container"},ee={class:"results-table"},se={class:"table-caption"},te={class:"week-button-group"},ie=["onClick"],ne={rowspan:2},oe={rowspan:2},re={rowspan:2},ae=["src"],le=S({__name:"CrucibleResultsTable",setup(m){const n=f({matches:[]}),h=f(!1),y=f(void 0),c=f(null),r=f(null),o=a=>{y.value=a,h.value=!0},u=a=>a==="Bingo"||a==="Majority"?"highlight-green":a==="Lost"?"highlight-red":"",p=W(()=>{const a=new Set(n.value.matches.map(t=>t.week));return Array.from(a).sort((t,s)=>t-s)}),i=W(()=>r.value!==null?n.value.matches.filter(a=>a.week===r.value):n.value.matches);return B(async()=>{try{n.value=await Q();const a=p.value;a.length>0&&(r.value=a[8])}catch(a){c.value=a.message}}),(a,t)=>(d(),v("div",X,[c.value?(d(),v("div",Z,l(c.value),1)):L("",!0),e("div",D,[e("table",ee,[e("caption",se,[e("div",te,[(d(!0),v(g,null,C(p.value,s=>(d(),v("button",{key:s,class:w(["week-button",{active:r.value===s}]),onClick:b=>r.value=s}," Week "+l(s),11,ie))),128)),e("button",{class:w(["week-button",{active:r.value===null}]),onClick:t[0]||(t[0]=s=>r.value=null)}," All Weeks ",2)])]),t[2]||(t[2]=e("thead",null,[e("tr",null,[e("th",null,"Game"),e("th",null,"Player"),e("th",null,"Score"),e("th",null,"Win Condition"),e("th",null,"Match Time"),e("th",null,"Board")])],-1)),e("tbody",null,[(d(!0),v(g,null,C(i.value,(s,b)=>(d(),v(g,{key:b},[e("tr",{class:w({"new-game-row":b===0||i.value[b-1].gameId!==s.gameId})},[e("td",ne,l(s.gameId),1),e("td",{class:w(u(s.player1.outcome))},l(s.player1.name),3),e("td",{class:w(u(s.player1.outcome))},l(s.player1.score),3),e("td",{class:w(u(s.player1.outcome))},l(s.player1.outcome),3),e("td",oe,l(s.matchTime),1),e("td",re,[s.imageLink?(d(),q(x,{key:0,onClick:P=>o(s.imageLink),class:"marika-eye"},null,8,["onClick"])):L("",!0)])],2),e("tr",null,[e("td",{class:w(u(s.player2.outcome))},l(s.player2.name),3),e("td",{class:w(u(s.player2.outcome))},l(s.player2.score),3),e("td",{class:w(u(s.player2.outcome))},l(s.player2.outcome),3)])],64))),128))])])]),(d(),q(I,{to:"body"},[k(R,{show:h.value,onClose:t[1]||(t[1]=s=>h.value=!1)},{default:z(()=>[e("img",{src:y.value,alt:"Board Image",style:{"max-width":"100%",height:"auto"}},null,8,ae)]),_:1},8,["show"])]))]))}}),ce=T(le,[["__scopeId","data-v-abc76e15"]]),de=async()=>{const m="/data/crucibleSquareStats.json";try{const n=await fetch(m);if(!n.ok)throw new Error(`Failed to fetch challenge records: ${n.statusText}`);const h=await n.json();return{records:Object.entries(h).map(([c,r])=>({name:c,completed:r.Completed,appeared:r.Appeared,ratio:r.Ratio,appearance:r.Appearance}))}}catch(n){throw console.error(n),new Error("Failed to load challenge records. Please try again later.")}},ue={class:"container"},me={key:0,class:"error"},ve={key:1,class:"table-container"},pe={class:"results-table"},we={class:"left-column"},he=S({__name:"CrucibleSquareStatsTable",setup(m){const n=f({records:[]}),h=f(null),y=f("name"),c=f("asc");B(async()=>{let u=73;try{const p=await de();n.value.records=p.records.map(i=>{const a=i.appeared>0?Number((i.completed/i.appeared*100).toFixed(0)):0,t=Number((i.appeared/u*100).toFixed(0));return{...i,ratio:a,appearance:t}}),n.value.records.sort((i,a)=>i.name.localeCompare(a.name))}catch(p){h.value=p.message}});const r=u=>{y.value===u?c.value=c.value==="asc"?"desc":"asc":(y.value=u,c.value="desc"),n.value.records.sort((p,i)=>{let a=parseFloat(p[u]),t=parseFloat(i[u]);return c.value==="asc"?a-t:t-a})},o=()=>{y.value==="name"?c.value=c.value==="asc"?"desc":"asc":(y.value="name",c.value="desc"),n.value.records.sort((u,p)=>{const i=u.name.toLowerCase(),a=p.name.toLowerCase();return c.value==="asc"?i.localeCompare(a):a.localeCompare(i)})};return(u,p)=>(d(),v("div",ue,[h.value?(d(),v("div",me,l(h.value),1)):(d(),v("div",ve,[e("table",pe,[e("thead",null,[e("tr",null,[e("th",{onClick:o,class:"sortable"},"Square Name ⬍"),e("th",{onClick:p[0]||(p[0]=i=>r("completed")),class:"sortable"},"Completed ⬍"),e("th",{onClick:p[1]||(p[1]=i=>r("appeared")),class:"sortable"},"Appeared ⬍"),e("th",{onClick:p[2]||(p[2]=i=>r("ratio")),class:"sortable"},"Completion % ⬍"),e("th",{onClick:p[3]||(p[3]=i=>r("appearance")),class:"sortable"},"Appearance % ⬍")])]),e("tbody",null,[(d(!0),v(g,null,C(n.value.records,(i,a)=>(d(),v("tr",{key:a},[e("td",we,l(i.name),1),e("td",null,l(i.completed),1),e("td",null,l(i.appeared),1),e("td",null,l(i.ratio)+"%",1),e("td",null,l(i.appearance)+"%",1)]))),128))])])]))]))}}),ye=T(he,[["__scopeId","data-v-1d6799f8"]]),fe={class:"bracket-container"},ge={class:"wrapper"},be={class:"item"},_e={class:"item-childrens"},ke={class:"item-child"},Ce={class:"item"},Le={class:"item-childrens"},$e={class:"item-child"},Te={class:"item"},qe={class:"item-child"},Se={class:"item"},Pe={class:"item-childrens"},Me={class:"wrapper"},We={class:"item"},Be={class:"item-childrens"},ze={class:"item-child"},Re={class:"item"},Ie={class:"item-childrens"},xe={class:"item-child"},Ne={class:"item"},Ae={class:"item-child"},Ee={class:"item"},Fe={class:"item-childrens"},Ve={key:0,class:"match-details"},He={class:"game-info"},Je={class:"player"},Ye={class:"player"},je={class:"outcome"},Ge={key:0},Ke={key:1},Oe={key:0,class:"icon-row"},Ue=["href"],Qe=["src"],Xe=S({__name:"CruciblePlayoffBracketWinners",setup(m){const n=f(!1),h=f(void 0),y=f({"winners-finals":[{gameid:1,player1:{name:"Snowy",score:9,outcome:"loss",division:"1"},player2:{name:"Malte",score:13,outcome:"win",division:"6"},matchTime:"01:14:39",vodLink:"https://www.twitch.tv/videos/2449254687?t=04h23m28s",imageLink:"/img/crucible/malte-v-snowy-playoff.png"}],"grand-finals":[{gameid:1,player1:{name:"Malte",score:13,outcome:"win",division:"6"},player2:{name:"Cronys",score:10,outcome:"loss",division:"2"},matchTime:"01:20:05",vodLink:"https://www.twitch.tv/videos/2461296099?t=00h18m59s",imageLink:"/img/crucible/malte-v-cronys-playoff-finals-1.png"},{gameid:2,player1:{name:"Malte",score:11,outcome:"loss",division:"6"},player2:{name:"Cronys",score:13,outcome:"win",division:"2"},matchTime:"01:24:47",vodLink:"https://www.twitch.tv/videos/2461296099?t=02h03m49s",imageLink:"/img/crucible/malte-v-cronys-playoff-finals-2.png"},{gameid:3,player1:{name:"Malte",score:9,outcome:"loss",division:"6"},player2:{name:"Cronys",score:13,outcome:"win",division:"2"},matchTime:"01:16:32",vodLink:"https://www.twitch.tv/videos/2462198109?t=00h22m47s",imageLink:"/img/crucible/malte-v-cronys-playoff-finals-3.png"},{gameid:4,player1:{name:"Malte",score:6,outcome:"loss",division:"6"},player2:{name:"Cronys",score:6,outcome:"win",division:"2"},matchTime:"01:02:17",vodLink:"https://www.twitch.tv/videos/2462198109?t=02h06m30s",imageLink:"/img/crucible/malte-v-cronys-playoff-finals-4.png"}],"winners-semis-1":[{gameid:1,player1:{name:"Snowy",score:13,outcome:"win",division:"1"},player2:{name:"Jerzounek",score:8,outcome:"loss",division:"3"},matchTime:"01:37:31",vodLink:"https://www.twitch.tv/videos/2439148805?t=00h19m22s",imageLink:"/img/crucible/snowy-v-jerz-playoffs.png"}],"winners-semis-2":[{gameid:1,player1:{name:"Cronys",score:11,outcome:"loss",division:"2"},player2:{name:"Malte",score:13,outcome:"win",division:"6"},matchTime:"01:25:11",vodLink:"https://www.twitch.tv/videos/2435522534?t=00h15m54s",imageLink:"/img/crucible/cronys-v-malte-playoff.png"}],"winner-quarters-1":[{gameid:1,player1:{name:"Snowy",score:13,outcome:"win",division:"1"},player2:{name:"Lorian",score:10,outcome:"loss",division:"8"},matchTime:"01:32:06",vodLink:"https://www.twitch.tv/videos/2430947463?t=06h30m37s",imageLink:"/img/crucible/snowy-v-lorian-playoff.png"}],"winner-quarters-2":[{gameid:1,player1:{name:"Jerzounek",score:0,outcome:"win",division:"3"},player2:{name:"Harv",score:0,outcome:"",division:"5"},matchTime:"00:00:00",vodLink:"",imageLink:""}],"winner-quarters-3":[{gameid:1,player1:{name:"Cronys",score:13,outcome:"win",division:"2"},player2:{name:"Doitz",score:12,outcome:"loss",division:"7"},matchTime:"01:39:22",vodLink:"https://www.twitch.tv/videos/2426753608?t=03h44m01s",imageLink:"/img/crucible/cronys-v-doitz-playoffs.png"}],"winner-quarters-4":[{gameid:1,player1:{name:"Loeless",score:7,outcome:"loss",division:"4"},player2:{name:"Malte",score:13,outcome:"win",division:"6"},matchTime:"01:14:34",vodLink:"https://www.twitch.tv/videos/2430947463?t=00h24m11s",imageLink:"/img/crucible/loe-v-malte-playoffs.png"}],"losers-round1-1":[{gameid:1,player1:{name:"Lorian",score:8,outcome:"win",division:"8"},player2:{name:"Harv",score:4,outcome:"loss",division:"5"},matchTime:"00:59:26",vodLink:"",imageLink:"/img/crucible/lorian-v-harv-playoff.png"}],"losers-round1-2":[{gameid:1,player1:{name:"Loeless",score:11,outcome:"loss",division:"4"},player2:{name:"Doitz",score:13,outcome:"win",division:"7"},matchTime:"01:40:23",vodLink:"https://www.twitch.tv/videos/2436420000?t=04h44m46s",imageLink:"/img/crucible/doitz-v-loe.png"}],"losers-quarters-1":[{gameid:1,player1:{name:"Cronys",score:7,outcome:"win",division:"2"},player2:{name:"Lorian",score:4,outcome:"loss",division:"8"},matchTime:"00:46:49",vodLink:"https://www.twitch.tv/videos/2445154357?t=00h18m48s",imageLink:"/img/crucible/cronys-v-lorian-playoff.png"}],"losers-quarters-2":[{gameid:1,player1:{name:"Jerzounek",score:13,outcome:"win",division:"3"},player2:{name:"Doitz",score:8,outcome:"loss",division:"7"},matchTime:"00:00:00",vodLink:"",imageLink:""}],"losers-semis":[{gameid:1,player1:{name:"Cronys",score:13,outcome:"win",division:"2"},player2:{name:"Jerzounek",score:6,outcome:"loss",division:"3"},matchTime:"01:10:52",vodLink:"https://www.twitch.tv/videos/2451685607?t=09h41m25s",imageLink:"/img/crucible/cronys-v-jerz-playoff.png"}],"losers-finals":[{gameid:1,player1:{name:"Snowy",score:11,outcome:"loss",division:"1"},player2:{name:"Cronys",score:12,outcome:"win",division:"2"},matchTime:"01:38:40",vodLink:"https://www.twitch.tv/videos/2453585105?t=03h16m54s",imageLink:"/img/crucible/cronys-v-snowy-playoffs.png"}]}),c=f([]);function r(a){c.value=y.value[a]}function o(a){var s;const t=(s=y.value[a])==null?void 0:s[0];return t?`${t.player1.name} vs ${t.player2.name}`:"TBD"}const u=a=>{h.value=a,n.value=!0},p=a=>{const{player1:t,player2:s}=a;return t.outcome==="win"?{"first-win":t.division==="1","second-win":t.division==="2","third-win":t.division==="3","fourth-win":t.division==="4","fifth-win":t.division==="5","sixth-win":t.division==="6","seventh-win":t.division==="7","eighth-win":t.division==="8"}:s.outcome==="win"?{"first-win":s.division==="1","second-win":s.division==="2","third-win":s.division==="3","fourth-win":s.division==="4","fifth-win":s.division==="5","sixth-win":s.division==="6","seventh-win":s.division==="7","eighth-win":s.division==="8"}:{}};function i(a){const t=y.value[a];if(!t||t.length===0)return"";let s=0,b=0;for(const M of t)M.player1.outcome==="win"&&s++,M.player2.outcome==="win"&&b++;const P=s>b?"player1":b>s?"player2":null;if(!P)return"";const _=P==="player1"?t[0].player1.name.trim().toLowerCase():t[0].player2.name.trim().toLowerCase();return _==="snowy"?"first-win":_==="cronys"?"second-win":_==="jerzounek"?"third-win":_==="loeless"?"fourth-win":_==="harv"?"fifth-win":_==="malte"?"sixth-win":_==="doitz"?"seventh-win":_==="lorian"?"eighth-win":"bg-neutral"}return(a,t)=>(d(),v(g,null,[e("div",fe,[e("div",ge,[e("div",be,[e("div",{class:"item-parent",onClick:t[0]||(t[0]=s=>r("grand-finals"))},[e("p",{class:w(i("grand-finals"))},l(o("grand-finals")),3)]),e("div",{class:"item-parent",onClick:t[1]||(t[1]=s=>r("winners-finals"))},[e("p",{class:w(i("winners-finals"))},l(o("winners-finals")),3)]),e("div",_e,[e("div",ke,[e("div",Ce,[e("div",{class:"item-parent",onClick:t[2]||(t[2]=s=>r("winners-semis-1"))},[e("p",{class:w(i("winners-semis-1"))},l(o("winners-semis-1")),3)]),e("div",Le,[e("div",$e,[e("div",Te,[e("div",{class:"item-parent no-parent-connector",onClick:t[3]||(t[3]=s=>r("winner-quarters-1"))},[e("p",{class:w(i("winner-quarters-1"))},l(o("winner-quarters-1")),3)])])]),e("div",{class:"item-child",onClick:t[4]||(t[4]=s=>r("winner-quarters-2"))},[e("p",{class:w(i("winner-quarters-2"))},l(o("winner-quarters-2")),3)])])])]),e("div",qe,[e("div",Se,[e("div",{class:"item-parent",onClick:t[5]||(t[5]=s=>r("winners-semis-2"))},[e("p",{class:w(i("winners-semis-2"))},l(o("winners-semis-2")),3)]),e("div",Pe,[e("div",{class:"item-child",onClick:t[6]||(t[6]=s=>r("winner-quarters-3"))},[e("p",{class:w(i("winner-quarters-3"))},l(o("winner-quarters-3")),3)]),e("div",{class:"item-child",onClick:t[7]||(t[7]=s=>r("winner-quarters-4"))},[e("p",{class:w(i("winner-quarters-4"))},l(o("winner-quarters-4")),3)])])])])])])]),e("div",Me,[e("div",We,[e("div",{class:"item-parent",onClick:t[8]||(t[8]=s=>r("losers-finals"))},[e("p",{class:w(i("losers-finals"))},l(o("losers-finals")),3)]),e("div",{class:"item-parent",onClick:t[9]||(t[9]=s=>r("losers-semis"))},[e("p",{class:w(i("losers-semis"))},l(o("losers-semis")),3)]),e("div",Be,[e("div",ze,[e("div",Re,[e("div",{class:"item-parent",onClick:t[10]||(t[10]=s=>r("losers-quarters-1"))},[e("p",{class:w(i("losers-quarters-1"))},l(o("losers-quarters-1")),3)]),e("div",Ie,[e("div",xe,[e("div",Ne,[e("div",{class:"item-parent no-parent-connector",onClick:t[11]||(t[11]=s=>r("losers-round1-1"))},[e("p",{class:w(i("losers-round1-1"))},l(o("losers-round1-1")),3)])])])])])]),e("div",Ae,[e("div",Ee,[e("div",{class:"item-parent",onClick:t[12]||(t[12]=s=>r("losers-quarters-2"))},[e("p",{class:w(i("losers-quarters-2"))},l(o("losers-quarters-2")),3)]),e("div",Fe,[e("div",{class:"item-child",onClick:t[13]||(t[13]=s=>r("losers-round1-2"))},[e("p",{class:w(i("losers-round1-2"))},l(o("losers-round1-2")),3)])])])])])])]),c.value?(d(),v("div",Ve,[t[15]||(t[15]=e("h2",null,"Match Details",-1)),(d(!0),v(g,null,C(c.value,s=>(d(),v("div",{class:w(["game-card",p(s)]),key:s.gameid},[e("div",He,[e("div",Je,l(s.player1.name)+" ("+l(s.player1.division)+") - "+l(s.player1.score),1),e("div",Ye,l(s.player2.name)+" ("+l(s.player2.division)+") - "+l(s.player2.score),1),e("div",je,[s.player1.outcome==="win"||s.player2.outcome==="win"?(d(),v("span",Ge," Winner: "+l(s.player1.outcome==="win"?s.player1.name:s.player2.name),1)):(d(),v("span",Ke," Winner: TBD "))]),s.imageLink||s.vodLink?(d(),v("div",Oe,[s.imageLink?(d(),q(x,{key:0,onClick:b=>u(s.imageLink),class:"marika-eye"},null,8,["onClick"])):L("",!0),s.vodLink?(d(),v("a",{key:1,href:s.vodLink,target:"_blank",class:"no-hover"},[k(N)],8,Ue)):L("",!0)])):L("",!0)])],2))),128))])):L("",!0)]),(d(),q(I,{to:"body"},[k(R,{show:n.value,onClose:t[14]||(t[14]=s=>n.value=!1)},{default:z(()=>[e("img",{src:h.value,alt:"Board Image",style:{"max-width":"100%",height:"auto"}},null,8,Qe)]),_:1},8,["show"])]))],64))}}),Ze=T(Xe,[["__scopeId","data-v-9203566a"]]),De={name:"CrucibleView",components:{CrucibleTable:U,Divider:A,HeaderView:E,CrucibleResultsTable:ce,CrucibleSquareStatsTable:ye,CruciblePlayoffBracketWinners:Ze},data(){return{table:{cruciblePlayers:{CruciblePlayers:[]}}}},created(){J().then(m=>{console.log(m),this.table.cruciblePlayers=m})}},es={class:"main-container"},ss={class:"table-container"};function ts(m,n,h,y,c,r){const o=$("HeaderView"),u=$("CruciblePlayoffBracketWinners"),p=$("CrucibleTable"),i=$("CrucibleResultsTable"),a=$("CrucibleSquareStatsTable");return d(),v(g,null,[k(o),e("div",es,[n[2]||(n[2]=e("div",{class:"top-image-container"},[e("img",{src:F,alt:"Stars Ending",class:"grayscale-image"}),e("img",{src:V,alt:"Logo",class:"logo-image"})],-1)),n[3]||(n[3]=e("h1",{class:"header-2"},"Crucible Playoff Bracket",-1)),k(u,{class:"bracket-section"}),n[4]||(n[4]=e("h1",{class:"header"},"The Crucible Standings",-1)),e("div",ss,[k(p,{CruciblePlayers:c.table.cruciblePlayers.CruciblePlayers},null,8,["CruciblePlayers"])]),e("div",null,[n[0]||(n[0]=e("h1",null,"Crucible Results",-1)),k(i)]),e("div",null,[n[1]||(n[1]=e("h1",null,"Crucible Square Stats",-1)),k(a)])])],64)}const ns=T(De,[["render",ts],["__scopeId","data-v-32b3e901"]]);export{ns as default};
