import{d as S,r as v,o as c,c as d,a as e,F as y,b as h,t as b,_ as k,e as $,f as M,g as T,n as m,h as R,i as w,w as L,M as I,T as W,I as E,D as V,H as B,j as f,k as x,l as A}from"./index-lnWzIJZc.js";const F="/data/crucibleStandings.json";async function H(){return fetch(F).then(t=>t.json()).then(t=>{for(let r=0;r<t.CruciblePlayers.length;r++){var l=t.CruciblePlayers[r].wins,u=t.CruciblePlayers[r].wins+t.CruciblePlayers[r].losses;t.CruciblePlayers[r].games=u;var p=N(l,u);t.CruciblePlayers[r].wr=p;var a=t.CruciblePlayers[r].opponentWins,n=t.CruciblePlayers[r].opponentLoss;t.CruciblePlayers[r].recordStrength=a/(n+a)}return t.CruciblePlayers.sort((r,o)=>o.wins!==r.wins?o.wins-r.wins:o.recordStrength-r.recordStrength).forEach((r,o)=>r.standing=o+1),t})}function N(t,l){if(t===0||l===0)return"0%";{var u=t/l*100;const a=`${Math.round(u)}%`;return String(a)}}const z={class:"table-container"},G={class:"table-wrapper"},U={class:"horizontal-lines-table"},Y=S({__name:"CrucibleTable",props:{CruciblePlayers:{}},setup(t){const l=v(["Standing","Player","Wins","Losses","Games","WR"]),u=v(["standing","name","wins","losses","games","wr"]);return(p,a)=>(c(),d("div",z,[e("div",G,[a[0]||(a[0]=e("h2",{class:"redmanes-header"},"The Crucible",-1)),e("table",U,[e("thead",null,[e("tr",null,[(c(!0),d(y,null,h(l.value,(n,r)=>(c(),d("th",{key:"table1-header-"+r},b(n),1))),128))])]),e("tbody",null,[(c(!0),d(y,null,h(p.CruciblePlayers,(n,r)=>(c(),d("tr",{key:"table1-row-rednames"+r},[(c(!0),d(y,null,h(u.value,o=>(c(),d("td",null,b(n[o]),1))),256))]))),128))])])])]))}}),q=k(Y,[["__scopeId","data-v-7d1f5af4"]]),J=async()=>{const t="/data/normalizedResults2.json";try{const l=await fetch(t);if(!l.ok)throw new Error(`Failed to fetch stats: ${l.statusText}`);const u=await l.json();if(!u.crucible)throw new Error("Crucible data not found.");return{matches:u.crucible.flatMap(a=>a.matches.map(n=>({...n,week:a.week})))}}catch(l){throw console.error(l),new Error("Failed to load Crucible stats. Please try again later.")}},K={class:"container"},Q={key:0,class:"error"},X={class:"table-container"},Z={class:"results-table"},O={class:"table-caption"},j={class:"week-button-group"},D=["onClick"],ee={rowspan:2},se={rowspan:2},te={rowspan:2},le=["src"],re=S({__name:"CrucibleResultsTable2",setup(t){const l=v({matches:[]}),u=v(!1),p=v(void 0),a=v(null),n=v(null),r=i=>{p.value=i,u.value=!0},o=i=>i==="Bingo"||i==="Majority"?"highlight-green":i==="Lost"?"highlight-red":"",g=$(()=>{const i=new Set(l.value.matches.map(_=>_.week));return Array.from(i).sort((_,s)=>_-s)}),P=$(()=>n.value!==null?l.value.matches.filter(i=>i.week===n.value):l.value.matches);return M(async()=>{try{l.value=await J();const i=g.value;i.length>0&&(n.value=i[0])}catch(i){a.value=i.message}}),(i,_)=>(c(),d("div",K,[a.value?(c(),d("div",Q,b(a.value),1)):T("",!0),e("div",X,[e("table",Z,[e("caption",O,[e("div",j,[(c(!0),d(y,null,h(g.value,s=>(c(),d("button",{key:s,class:m(["week-button",{active:n.value===s}]),onClick:C=>n.value=s}," Week "+b(s),11,D))),128)),e("button",{class:m(["week-button",{active:n.value===null}]),onClick:_[0]||(_[0]=s=>n.value=null)}," All Weeks ",2)])]),_[2]||(_[2]=e("thead",null,[e("tr",null,[e("th",null,"Game"),e("th",null,"Player"),e("th",null,"Score"),e("th",null,"Win Condition"),e("th",null,"Match Time"),e("th",null,"Board")])],-1)),e("tbody",null,[(c(!0),d(y,null,h(P.value,(s,C)=>(c(),d(y,{key:C},[e("tr",{class:m({"new-game-row":C===0||P.value[C-1].gameId!==s.gameId})},[e("td",ee,b(s.gameId),1),e("td",{class:m(o(s.player1.outcome))},b(s.player1.name),3),e("td",{class:m(o(s.player1.outcome))},b(s.player1.score),3),e("td",{class:m(o(s.player1.outcome))},b(s.player1.outcome),3),e("td",se,b(s.matchTime),1),e("td",te,[s.imageLink?(c(),R(E,{key:0,onClick:ue=>r(s.imageLink),class:"marika-eye"},null,8,["onClick"])):T("",!0)])],2),e("tr",null,[e("td",{class:m(o(s.player2.outcome))},b(s.player2.name),3),e("td",{class:m(o(s.player2.outcome))},b(s.player2.score),3),e("td",{class:m(o(s.player2.outcome))},b(s.player2.outcome),3)])],64))),128))])])]),(c(),R(W,{to:"body"},[w(I,{show:u.value,onClose:_[1]||(_[1]=s=>u.value=!1)},{default:L(()=>[e("img",{src:p.value,alt:"Board Image",style:{"max-width":"100%",height:"auto"}},null,8,le)]),_:1},8,["show"])]))]))}}),ae=k(re,[["__scopeId","data-v-c07ed3b7"]]),ne={name:"CrucibleView",components:{CrucibleTable:q,Divider:V,HeaderView:B,CrucibleResultsTable:ae},data(){return{table:{cruciblePlayers:{CruciblePlayers:[]}}}},created(){H().then(t=>{console.log(t),this.table.cruciblePlayers=t})}},oe={class:"main-container"},ce={class:"table-container"};function ie(t,l,u,p,a,n){const r=f("HeaderView"),o=f("CrucibleTable"),g=f("CrucibleResultsTable");return c(),d(y,null,[w(r),e("div",oe,[l[1]||(l[1]=e("div",{class:"top-image-container"},[e("img",{src:x,alt:"Stars Ending",class:"grayscale-image"}),e("img",{src:A,alt:"Logo",class:"logo-image"})],-1)),l[2]||(l[2]=e("h1",{class:"header"},"The Crucible Standings",-1)),e("div",ce,[w(o,{CruciblePlayers:a.table.cruciblePlayers.CruciblePlayers},null,8,["CruciblePlayers"])]),e("div",null,[l[0]||(l[0]=e("h1",null,"Crucible Results",-1)),w(g)])])],64)}const be=k(ne,[["render",ie],["__scopeId","data-v-c6476cb5"]]);export{be as default};
