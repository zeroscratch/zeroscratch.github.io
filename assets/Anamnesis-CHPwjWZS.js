import{N as P}from"./HeaderGPT-Cvq2ZtAl.js";import{T as R}from"./twitch-icon-CQJ4KPAX.js";import{b as W}from"./SoloBuildStandings-5Hdkn89G.js";import{d as b,r as p,g as S,c as i,a,t as d,F as _,B as j,b as y,n as k,u as I,p as g,e as h,o as c,_ as $,D as A,m as B,f as w}from"./index-DEImVSSb.js";import"./elden_squares-BChk0GbN.js";/* empty css                                                                  */const F={class:"standings-wrapper"},T={key:0,class:"loading"},V={key:1,class:"error"},q={class:"standings-list"},E={class:"col-rank-number"},D={class:"col-player"},O={class:"player-name"},z=["href"],U={class:"col-record-spacing"},G={class:"col-wr"},J={class:"col-games"},H={class:"col-squares"},K={class:"col-lines"},Q=b({__name:"StandingsAnamnesis",setup(o){const n=p([]),v=p(!0),r=p(null);async function t(l){const s=await fetch(l);if(!s.ok)throw new Error(`Failed to fetch ${l} (${s.status})`);return await s.json()}return S(async()=>{v.value=!0,r.value=null;try{const l=await t("/data/ScadubingoData/anamnesis/matches.json"),s=await t("/data/entries/players.json");let e=[],m=[];const f=[{receiver:"psiphicode",gamesLost:3,squaresLost:0,linesLost:0},{receiver:"blaze",gamesLost:3,squaresLost:0,linesLost:0}];n.value=W(l,s,e,m,f)}catch(l){console.error(l),r.value=(l==null?void 0:l.message)??"Unknown error",n.value=[]}finally{v.value=!1}}),(l,s)=>(c(),i("div",F,[s[1]||(s[1]=a("h1",{class:"title"},"Anamnesis Standings",-1)),v.value?(c(),i("p",T,"Loading…")):r.value?(c(),i("p",V,d(r.value),1)):(c(),i(_,{key:2},[s[0]||(s[0]=j('<div class="standings-header" data-v-24905ccf><div class="col-rank" data-v-24905ccf>Rank</div><div class="col-player" data-v-24905ccf>Player</div><div class="col-record" data-v-24905ccf>Record</div><div class="col-wr" data-v-24905ccf>WR%</div><div class="col-games" data-v-24905ccf>GP</div><div class="col-squares" data-v-24905ccf>Squares</div><div class="col-lines" data-v-24905ccf>Lines</div></div>',1)),a("div",q,[(c(!0),i(_,null,y(n.value,(e,m)=>(c(),i("div",{key:e.playerid,class:k(["team-card",{"playoff-yes":e.Playoffs==="yes","playoff-no":e.Playoffs==="no","playoff-maybe":e.Playoffs==="maybe"}])},[a("div",E,d(m+1),1),a("div",D,[a("h2",O,[I(d(e.nickname?`${e.displayName}`:e.displayName)+" ",1),e.twitch?(c(),i("a",{key:0,href:e.twitch,class:"twitch-link",target:"_blank",rel:"noreferrer"},[h(R,{class:"icon"})],8,z)):g("",!0)])]),a("div",U,d(e.record),1),a("div",G,d(e.WR)+"%",1),a("div",J,d(e.gamesPlayed),1),a("div",H,d(e.squares),1),a("div",K,d(e.lines),1)],2))),128))])],64))]))}}),X=$(Q,[["__scopeId","data-v-24905ccf"]]);function Y(o,n){const v={};Object.values(n).forEach(t=>{v[t.id]=t.displayName});const r={};return o.forEach(t=>{var m,f;r[t.week]||(r[t.week]={week:t.week,matches:[]});const[l,s]=t.participants,e=t.winner;r[t.week].matches.push({gameId:t.id,player1:{name:v[l.id]??String(l.id),score:l.score,outcome:l.id===e?t.method:"Lost"},player2:{name:v[s.id]??String(s.id),score:s.score,outcome:s.id===e?t.method:"Lost"},matchTime:t.duration,vodLink:(m=t.media)==null?void 0:m.vod,imageLink:(f=t.media)==null?void 0:f.image})}),Object.values(r).sort((t,l)=>t.week-l.week)}const Z=b({name:"AnamnesisResults",setup(){const o=p([]),n=p(2),v=p(!1),r=p(null),t=[{label:"Week 1",value:1},{label:"Week 2",value:2},{label:"All Weeks",value:"all"}];S(async()=>{try{const[u,M]=await Promise.all([fetch("/data/ScadubingoData/anamnesis/matches.json"),fetch("/data/entries/players.json")]);if(!u.ok)throw new Error("Failed to load matches.json");if(!M.ok)throw new Error("Failed to load players.json");const L=await u.json(),C=await M.json(),N=C.players??C;o.value=Y(L.matches??L,N)}catch(u){console.error("Failed to load Anamnesis Match Results:",u)}});const l=B(()=>n.value==="all"?o.value:o.value.filter(u=>u.week===n.value));return{selectedWeek:n,weekOptions:t,filteredWeeks:l,openLink:u=>{window.open(u,"_blank")},openImageModal:u=>{r.value=u,v.value=!0},closeModal:()=>{v.value=!1,r.value=null},getPlayerClass:u=>u==="Bingo"||u==="Majority"?"winner":u==="Lost"?"loser":"",showModal:v,modalImage:r}}}),x={class:"match-results-container"},ee={class:"week-selector"},se=["onClick"],ae={class:"week-title"},oe={class:"matches-list"},te={class:"match-line"},ne={class:"score-line"},le={class:"match-details"},ie={class:"match-buttons"},ce=["onClick"],re=["onClick"],de={key:0,class:"no-results"},ue={class:"modal-content"},ve=["src"];function me(o,n,v,r,t,l){return c(),i("div",x,[n[4]||(n[4]=a("h2",{class:"title"},"Anamnesis Match Results",-1)),a("div",ee,[(c(!0),i(_,null,y(o.weekOptions,s=>(c(),i("button",{key:s.value,onClick:e=>o.selectedWeek=s.value,class:k(["week-button",{active:o.selectedWeek===s.value}])},d(s.label),11,se))),128))]),(c(!0),i(_,null,y(o.filteredWeeks,s=>(c(),i("div",{key:s.week,class:"week-block"},[a("h3",ae,"Week "+d(s.week),1),a("div",oe,[(c(!0),i(_,null,y(s.matches,e=>(c(),i("div",{key:e.gameId,class:"match-card"},[a("div",te,[a("span",{class:k(["player-name",o.getPlayerClass(e.player1.outcome)])},d(e.player1.name),3),n[2]||(n[2]=a("span",{class:"vs-text"},"vs",-1)),a("span",{class:k(["player-name",o.getPlayerClass(e.player2.outcome)])},d(e.player2.name),3)]),a("div",ne,[a("span",{class:k(["player-score",o.getPlayerClass(e.player1.outcome)])},d(e.player1.score),3),n[3]||(n[3]=a("span",{class:"dash"}," - ",-1)),a("span",{class:k(["player-score",o.getPlayerClass(e.player2.outcome)])},d(e.player2.score),3)]),a("div",le,[a("p",null,"Match Time: "+d(e.matchTime),1)]),a("div",ie,[e.imageLink?(c(),i("button",{key:0,class:"match-button",onClick:m=>o.openImageModal(e.imageLink)}," View Board ",8,ce)):g("",!0),e.vodLink?(c(),i("button",{key:1,class:"match-button",onClick:m=>o.openLink(e.vodLink)}," Watch VOD ",8,re)):g("",!0)])]))),128))])]))),128)),o.filteredWeeks.length===0?(c(),i("div",de," No match data available for this week. ")):g("",!0),o.showModal?(c(),i("div",{key:1,class:"modal-overlay",onClick:n[1]||(n[1]=A((...s)=>o.closeModal&&o.closeModal(...s),["self"]))},[a("div",ue,[a("button",{class:"close-button",onClick:n[0]||(n[0]=(...s)=>o.closeModal&&o.closeModal(...s))},"✕"),a("img",{src:o.modalImage,alt:"Match Board",class:"modal-image"},null,8,ve)])])):g("",!0)])}const pe=$(Z,[["render",me],["__scopeId","data-v-892c4297"]]),ke="/scadubingo-public/Anamnesis_Logo_Transparent.png",fe=b({name:"Anamnesis",components:{Navigation:P,Standings:X,MatchResults:pe},mounted(){document.body.style.background="linear-gradient(182deg,rgba(10, 10, 10, 1) 0%, rgba(0, 0, 0, 1) 25%, rgba(0, 46, 42, 1) 100%)"},beforeUnmount(){document.body.style.background="#0d1321"}}),ge={class:"main-container"};function _e(o,n,v,r,t,l){const s=w("Navigation"),e=w("Standings"),m=w("MatchResults");return c(),i("div",null,[h(s),a("div",ge,[n[0]||(n[0]=a("div",{class:"top-image-container"},[a("img",{src:ke,class:"logo"})],-1)),h(e),h(m)])])}const Le=$(fe,[["render",_e],["__scopeId","data-v-893b92c7"]]);export{Le as default};
