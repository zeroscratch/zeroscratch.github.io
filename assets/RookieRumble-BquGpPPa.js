import{_,m as I,r as f,f as C,j as v,o as m,c as p,a as e,F as b,b as w,n as h,t as r,i as k,g as y,d as M,M as L,I as A,e as S,h as T,w as j,T as D,q as P,N as q}from"./index-BGmmL2Ed.js";const E="/data/RookieRumbleData/rookieRumbleStandings.json";async function W(){const t=await(await fetch(E)).json(),d=Object.entries(t).map(([c,a])=>{const u=a.wins,n=a.losses,l=u+n;return{...a,name:c,games:l,wr:B(u,l)}});return d.sort((c,a)=>{if(a.wins!==c.wins)return a.wins-c.wins;const u=parseInt(c.wr),n=parseInt(a.wr);return n!==u?n-u:a.victory.includes(c.name)?a.wins-c.wins:a.lines!==c.lines?a.lines-c.lines:a.squares-c.squares}).forEach((c,a)=>{c.standing=a+1}),d}function B(s,t){if(t===0)return"0%";const d=s/t*100;return`${Math.round(d)}%`}const F={name:"RookieRumbleTable",components:{TwitchIcon:I},setup(){const s=f([]),t=d=>d==="yes"?"qualified-yes":d==="maybe"?"qualified-maybe":"qualified-no";return C(async()=>{s.value=await W()}),{players:s,getQualificationClass:t}}},N={class:"table-container"},U=["href"];function V(s,t,d,c,a,u){const n=v("TwitchIcon");return m(),p("div",N,[e("table",null,[t[0]||(t[0]=e("thead",null,[e("tr",null,[e("th",null,"Standing"),e("th",null,"Player"),e("th",null,"Wins"),e("th",null,"Losses"),e("th",null,"WR"),e("th",null,"Games"),e("th",null,"Squares"),e("th",null,"Lines"),e("th",null,"Twitch")])],-1)),e("tbody",null,[(m(!0),p(b,null,w(c.players,l=>(m(),p("tr",{key:l.name,class:h(c.getQualificationClass(l.qualified))},[e("td",null,r(l.standing),1),e("td",null,r(l.name),1),e("td",null,r(l.wins),1),e("td",null,r(l.losses),1),e("td",null,r(l.wr),1),e("td",null,r(l.games),1),e("td",null,r(l.squares),1),e("td",null,r(l.lines),1),e("td",null,[l.twitch?(m(),p("a",{key:0,href:l.twitch,class:"twitch-link"},[k(n,{class:"icon"})],8,U)):y("",!0)])],2))),128))])])])}const G=_(F,[["render",V],["__scopeId","data-v-16a76517"]]);async function K(){const s="/data/RookieRumbleData/rookieRumbleMatchResults.json";try{const t=await fetch(s);if(!t.ok)throw new Error(`Failed to fetch stats: ${t.statusText}`);const d=await t.json();if(!Array.isArray(d))throw new Error("Invalid format: expected an array of weeks.");return{matches:d.flatMap(a=>a.matches.map(u=>({...u,week:a.week})))}}catch(t){throw console.error(t),new Error("Failed to load Rookie Rumble Match Results. Please try again later.")}}const O=M({name:"RookieRumbleResultsTable",components:{Modal:L,IconMarikasEye:A},setup(){const s=f({matches:[]}),t=f(!1),d=f(null),c=f(null),a=f(null),u=i=>{d.value=i,t.value=!0},n=i=>i==="Bingo"||i==="Majority"?"highlight-green":i==="Lost"?"highlight-red":"",l=S(()=>{const i=new Set(s.value.matches.map(g=>g.week));return Array.from(i).sort((g,R)=>g-R)}),o=S(()=>a.value!==null?s.value.matches.filter(i=>i.week===a.value):s.value.matches);return C(async()=>{try{s.value=await K();const i=l.value;i.length>0&&(a.value=i[i.length-1])}catch(i){c.value=i.message}}),{currentResults:s,showModal:t,modalImage:d,errorMessage:c,selectedWeek:a,weeks:l,filteredMatches:o,openModal:u,getCellClass:n}}}),Q={class:"container"},H={key:0,class:"error"},z={class:"table-container"},Y={class:"results-table"},Z={class:"table-caption"},J={class:"week-button-group"},X=["onClick"],x={rowspan:2},ee={rowspan:2},te={rowspan:2},se=["src"];function oe(s,t,d,c,a,u){const n=v("IconMarikasEye"),l=v("Modal");return m(),p("div",Q,[s.errorMessage?(m(),p("div",H,r(s.errorMessage),1)):y("",!0),e("div",z,[e("table",Y,[e("caption",Z,[e("div",J,[(m(!0),p(b,null,w(s.weeks,o=>(m(),p("button",{key:o,class:h(["week-button",{active:s.selectedWeek===o}]),onClick:i=>s.selectedWeek=o}," Week "+r(o),11,X))),128)),e("button",{class:h(["week-button",{active:s.selectedWeek===null}]),onClick:t[0]||(t[0]=o=>s.selectedWeek=null)}," All Weeks ",2)])]),t[2]||(t[2]=e("thead",null,[e("tr",null,[e("th",null,"Game"),e("th",null,"Player"),e("th",null,"Score"),e("th",null,"Outcome"),e("th",null,"Time"),e("th",null,"Board")])],-1)),e("tbody",null,[(m(!0),p(b,null,w(s.filteredMatches,(o,i)=>(m(),p(b,{key:i},[e("tr",{class:h({"new-game-row":i===0||s.filteredMatches[i-1].gameId!==o.gameId})},[e("td",x,r(o.gameId),1),e("td",{class:h(s.getCellClass(o.player1.outcome))},r(o.player1.name),3),e("td",{class:h(s.getCellClass(o.player1.outcome))},r(o.player1.score),3),e("td",{class:h(s.getCellClass(o.player1.outcome))},r(o.player1.outcome),3),e("td",ee,r(o.matchTime),1),e("td",te,[o.imageLink?(m(),T(n,{key:0,onClick:g=>s.openModal(o.imageLink),class:"marika-eye"},null,8,["onClick"])):y("",!0)])],2),e("tr",null,[e("td",{class:h(s.getCellClass(o.player2.outcome))},r(o.player2.name),3),e("td",{class:h(s.getCellClass(o.player2.outcome))},r(o.player2.score),3),e("td",{class:h(s.getCellClass(o.player2.outcome))},r(o.player2.outcome),3)])],64))),128))])])]),(m(),T(D,{to:"body"},[k(l,{show:s.showModal,onClose:t[1]||(t[1]=o=>s.showModal=!1)},{default:j(()=>[e("img",{src:s.modalImage,alt:"Board",style:{"max-width":"100%",height:"auto"}},null,8,se)]),_:1},8,["show"])]))])}const ne=_(O,[["render",oe],["__scopeId","data-v-40f2a17e"]]),ae=M({name:"UpcomingMatchCards",setup(){const s=f([]),t=f(null),d=async()=>{try{const a=await fetch("/data/RookieRumbleData/rookieRumbleUpcomingMatches.json");if(!a.ok)throw new Error(`Failed to fetch: ${a.statusText}`);const u=await a.json(),n=new Date;s.value=u.map(l=>{const o=new Date(l.scheduledAt),i=new Date(n.getTime()-2*60*60*1e3),g=o<=n&&o>=i;return{...l,isLive:g}}).filter(l=>{const o=new Date(l.scheduledAt),i=new Date(n.getTime()-2*60*60*1e3);return o>i})}catch(a){t.value=a.message}},c=a=>new Date(a).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZoneName:"short"});return C(d),{matches:s,errorMessage:t,formatDate:c}}}),le={class:"upcoming-matches"},re={key:0,class:"error"},ie={class:"match-grid"},ce={class:"players"},ue={class:"player"},de={class:"player"},me={class:"scheduled"},pe={class:"referee"},he={key:0,class:"type"},fe={key:1,class:"live-badge"};function ge(s,t,d,c,a,u){return m(),p("div",le,[s.errorMessage?(m(),p("div",re,r(s.errorMessage),1)):y("",!0),e("div",ie,[(m(!0),p(b,null,w(s.matches.slice(0,3),(n,l)=>(m(),p("div",{key:l,class:h(["match-card",{live:n.isLive}])},[e("h3",null,r(n.title),1),e("div",ce,[e("span",ue,r(n.firstPlayer),1),t[0]||(t[0]=e("span",{class:"vs"},"vs",-1)),e("span",de,r(n.secondPlayer),1)]),e("div",me,r(s.formatDate(n.scheduledAt)),1),e("div",pe," Match Referee: "+r(n.ref),1),n.matchType===2?(m(),p("div",he,"Best of 3")):y("",!0),n.isLive?(m(),p("div",fe,"LIVE")):y("",!0)],2))),128))])])}const ve=_(ae,[["render",ge],["__scopeId","data-v-fb61dc65"]]),ke=M({name:"RookieRumbleSquareStats",setup(){const s=f([]),t=f("name"),d=f("asc"),c=S(()=>[...s.value].sort((u,n)=>{const l=d.value==="asc"?1:-1,o=t.value;return typeof u[o]=="string"?u[o].localeCompare(n[o])*l:(parseFloat(u[o])-parseFloat(n[o]))*l}));C(async()=>{try{const n=await(await fetch("/data/RookieRumbleData/rookieRumbleSquareStats.json")).json(),l=Object.entries(n),o=42;s.value=l.map(([i,g])=>{const R=g.Completed||0,$=g.Appeared||0;return{name:i,completed:R,appeared:$,completedPercentage:$>0?(R/$*100).toFixed(1):"0.0",appearedPercentage:o>0?($/o*100).toFixed(1):"0.0"}})}catch(u){console.error("Error loading square stats:",u)}});function a(u){t.value===u?d.value=d.value==="asc"?"desc":"asc":(t.value=u,d.value="desc")}return{sortedSquares:c,changeSort:a,sortKey:t,sortDirection:d}}}),be={class:"stats-table-container"},ye={class:"square-stats-table"};function _e(s,t,d,c,a,u){return m(),p("div",be,[e("table",ye,[e("thead",null,[e("tr",null,[e("th",{onClick:t[0]||(t[0]=n=>s.changeSort("name"))},"Square ▲▼"),e("th",{onClick:t[1]||(t[1]=n=>s.changeSort("completed"))},"Completed ▲▼"),e("th",{onClick:t[2]||(t[2]=n=>s.changeSort("appeared"))},"Appeared ▲▼"),e("th",{onClick:t[3]||(t[3]=n=>s.changeSort("completedPercentage"))},"Completed % ▲▼"),e("th",{onClick:t[4]||(t[4]=n=>s.changeSort("appearedPercentage"))},"Appeared % ▲▼")])]),e("tbody",null,[(m(!0),p(b,null,w(s.sortedSquares,(n,l)=>(m(),p("tr",{key:l},[e("td",null,r(n.name),1),e("td",null,r(n.completed),1),e("td",null,r(n.appeared),1),e("td",null,r(n.completedPercentage)+"%",1),e("td",null,r(n.appearedPercentage)+"%",1)]))),128))])])])}const we=_(ke,[["render",_e],["__scopeId","data-v-deedb2b1"]]),Re={},$e={class:"key-container"};function Ce(s,t){return m(),p("div",$e,t[0]||(t[0]=[P('<div class="key-item" data-v-e295915b><div class="box green" data-v-e295915b></div><span class="label" data-v-e295915b>Qualified for Playoffs</span></div><div class="key-item" data-v-e295915b><div class="box red" data-v-e295915b></div><span class="label" data-v-e295915b>Eliminated from Playoffs</span></div>',2)]))}const Me=_(Re,[["render",Ce],["__scopeId","data-v-e295915b"]]),Se="/rookie-rumble-public/the-erdtree-elden-ring-thumb.jpg",Te="/rookie-rumble-public/Rookie_Rumble_2_Logo.png",Ie=M({name:"RookieRumble",components:{RookieRumbleTable:G,Navigation:q,RookieRumbleResultsTable:ne,RookieRumbleUpcomingMatches:ve,RookieRumbleSquareStats:we,playoffKey:Me},mounted(){document.body.style.backgroundColor="#10002b"},beforeUnmount(){document.body.style.backgroundColor="#0d1321"}}),Le={class:"main-container"};function Ae(s,t,d,c,a,u){const n=v("Navigation"),l=v("RookieRumbleTable"),o=v("playoffKey"),i=v("RookieRumbleResultsTable");return m(),p("div",null,[k(n),e("div",Le,[t[0]||(t[0]=e("div",{class:"top-image-container"},[e("img",{src:Se,class:"background-img"}),e("img",{src:Te,class:"logo"})],-1)),t[1]||(t[1]=e("h1",{class:"Title"},"Rookie Rumble Standings",-1)),k(l),k(o),t[2]||(t[2]=e("h1",{class:"Title"},"Rookie Rumble Match Results",-1)),k(i)])])}const De=_(Ie,[["render",Ae],["__scopeId","data-v-8ebc2360"]]);export{De as default};
