import{d as P,r as p,o as a,c as o,a as e,F as m,b as g,t as d,_ as f,e as k,f as v,g as h,w as T,M as R,T as $,n as _,I,h as L,D as M,H as E,i as w,j as S,k as V}from"./index-B1ANzVBf.js";const B="/data/crucibleStandings.json";async function W(){return fetch(B).then(l=>l.json()).then(l=>{for(let r=0;r<l.CruciblePlayers.length;r++){var s=l.CruciblePlayers[r].wins,n=l.CruciblePlayers[r].wins+l.CruciblePlayers[r].losses;l.CruciblePlayers[r].games=n;var b=x(s,n);l.CruciblePlayers[r].wr=b}return Object.keys(l).forEach(()=>{l.CruciblePlayers.sort((r,u)=>u.wins-r.wins||r.losses-u.losses).forEach((r,u)=>r.standing=u+1)}),l})}function x(l,s){if(l===0||s===0)return"0%";{var n=l/s*100;const r=`${Math.round(n)}%`;return String(r)}}const F={class:"table-container"},H={class:"table-wrapper"},N={class:"horizontal-lines-table"},z=P({__name:"CrucibleTable",props:{CruciblePlayers:{}},setup(l){const s=p(["Standing","Player","Wins","Losses","Games","WR"]),n=p(["standing","name","wins","losses","games","wr"]);return(b,r)=>(a(),o("div",F,[e("div",H,[r[0]||(r[0]=e("h2",{class:"redmanes-header"},"The Crucible",-1)),e("table",N,[e("thead",null,[e("tr",null,[(a(!0),o(m,null,g(s.value,(u,i)=>(a(),o("th",{key:"table1-header-"+i},d(u),1))),128))])]),e("tbody",null,[(a(!0),o(m,null,g(b.CruciblePlayers,(u,i)=>(a(),o("tr",{key:"table1-row-rednames"+i},[(a(!0),o(m,null,g(n.value,c=>(a(),o("td",null,d(u[c]),1))),256))]))),128))])])])]))}}),A=f(z,[["__scopeId","data-v-7d1f5af4"]]),G=async()=>{const l="/data/normalizedResults.json";try{const s=await fetch(l);if(!s.ok)throw new Error(`Failed to fetch stats: ${s.statusText}`);const n=await s.json();if(!n.crucible)throw new Error("Crucible data not found.");return{matches:n.crucible}}catch(s){throw console.error(s),new Error("Failed to load Crucible stats. Please try again later.")}},O={class:"container"},U={key:0,class:"error"},Y={key:1,class:"table-container"},q={class:"results-table",border:"0"},J={rowspan:2},K={rowspan:2},Q={rowspan:2},X=["src"],Z=P({__name:"CrucibleResultsTable",setup(l){const s=p({matches:[]}),n=p(!1),b=p(void 0),r=p(null),u=c=>{b.value=c,n.value=!0},i=c=>c==="Bingo"||c==="Majority"?"highlight-green":c==="Lost"?"highlight-red":"";return k(async()=>{try{s.value=await G()}catch(c){r.value=c.message}}),(c,y)=>(a(),o("div",O,[r.value?(a(),o("div",U,d(r.value),1)):(a(),o("div",Y,[e("table",q,[y[1]||(y[1]=e("thead",null,[e("tr",null,[e("th",null,"Game"),e("th",null,"Player"),e("th",null,"Score"),e("th",null,"Win Condition"),e("th",null,"Match Time"),e("th",null,"Board")])],-1)),e("tbody",null,[(a(!0),o(m,null,g(s.value.matches,(t,C)=>(a(),o(m,{key:C},[e("tr",{class:_({"new-game-row":C===0||s.value.matches[C-1].gameId!==t.gameId})},[e("td",J,d(t.gameId),1),e("td",{class:_(i(t.player1.outcome))},d(t.player1.name),3),e("td",{class:_(i(t.player1.outcome))},d(t.player1.score),3),e("td",{class:_(i(t.player1.outcome))},d(t.player1.outcome),3),e("td",K,d(t.matchTime),1),e("td",Q,[t.imageLink?(a(),v(I,{key:0,onClick:le=>u(t.imageLink)},null,8,["onClick"])):L("",!0)])],2),e("tr",null,[e("td",{class:_(i(t.player2.outcome))},d(t.player2.name),3),e("td",{class:_(i(t.player2.outcome))},d(t.player2.score),3),e("td",{class:_(i(t.player2.outcome))},d(t.player2.outcome),3)])],64))),128))])])])),(a(),v($,{to:"body"},[h(R,{show:n.value,onClose:y[0]||(y[0]=t=>n.value=!1)},{default:T(()=>[e("img",{src:b.value,alt:"Board Image",style:{"max-width":"100%",height:"auto"}},null,8,X)]),_:1},8,["show"])]))]))}}),j=f(Z,[["__scopeId","data-v-22552334"]]),D={name:"CrucibleView",components:{CrucibleTable:A,Divider:M,HeaderView:E,CrucibleResultsTable:j},data(){return{table:{cruciblePlayers:{CruciblePlayers:[]}}}},created(){W().then(l=>{console.log(l),this.table.cruciblePlayers=l})}},ee={class:"main-container"},se={class:"table-container"};function re(l,s,n,b,r,u){const i=w("HeaderView"),c=w("CrucibleTable"),y=w("CrucibleResultsTable");return a(),o(m,null,[h(i),e("div",ee,[s[1]||(s[1]=e("div",{class:"top-image-container"},[e("img",{src:S,alt:"Stars Ending",class:"grayscale-image"}),e("img",{src:V,alt:"Logo",class:"logo-image"})],-1)),s[2]||(s[2]=e("h1",{class:"header"},"The Crucible Standings",-1)),e("div",se,[h(c,{CruciblePlayers:r.table.cruciblePlayers.CruciblePlayers},null,8,["CruciblePlayers"])]),e("div",null,[s[0]||(s[0]=e("h1",null,"Crucible Results",-1)),h(y)])])],64)}const ae=f(D,[["render",re],["__scopeId","data-v-31592bca"]]);export{ae as default};
