import{N as Q}from"./HeaderGPT-Da_QBPnq.js";import{T as G}from"./twitch-icon-DRyETAAZ.js";import{d as F,r as P,g as H,c as l,a as e,t as d,F as C,B as X,b as A,n as M,u as B,p as $,e as W,o as r,_ as z,D as Z,m as K,A as j,z as O,f as V}from"./index-BhbHZpHQ.js";import{l as ss,f as es,a as as,i as Y,b as J,g as ts}from"./ess3BuildPlayoffs-CwWSUyFB.js";import{b as ns}from"./SoloBuildStandings-DTpAlalr.js";import{I as os}from"./IconMarikasEye-D9SqQPqr.js";import"./elden_squares-BChk0GbN.js";/* empty css                                                                  */function is(m,o,g){const _={};return m.forEach(c=>{const h=c.wins+c.losses,u=o-h,a=c.wins,i=c.wins+u;if(m.filter(k=>{if(k.playerId===c.playerId)return!1;const b=o-(k.wins+k.losses);return k.wins+b>=a}).length<g){_[c.playerId]="yes";return}if(m.filter(k=>k.playerId===c.playerId?!1:k.wins>i).length>=g){_[c.playerId]="no";return}_[c.playerId]="maybe"}),_}function ls(m,o,g=[],_=[],c=[]){const{matches:h,individualMaxGamesPlayed:u,playoffSlots:a}=m,i={};function f(s){if(i[s])return;const t=o[s];t&&(i[s]={id:s,displayName:t.displayName,wins:0,losses:0,squares:0,lines:0,h2h:{},gamesRemoved:0})}const y={};function k(s,t){y[s]??(y[s]={}),y[s][t]=(y[s][t]??0)+1}h.forEach(s=>{const[t,v]=s.participants,p=s.winner,n=t.id===p?v.id:t.id;f(t.id),f(v.id),!(!i[p]||!i[n])&&(k(t.id,v.id),k(v.id,t.id),i[p].wins++,i[n].losses++,i[t.id].squares+=t.score,i[v.id].squares+=v.score,s.method==="Bingo"&&i[p].lines++,i[p].h2h[n]=!0)}),g.forEach(s=>{f(s.winner),f(s.loser),!(!i[s.winner]||!i[s.loser])&&(k(s.winner,s.loser),k(s.loser,s.winner),i[s.winner].wins++,i[s.loser].losses++,i[s.winner].squares+=s.squaresAwarded,s.countsAsLine&&i[s.winner].lines++,i[s.winner].h2h[s.loser]=!0)}),_.forEach(s=>{f(s.receiver),i[s.receiver]&&(i[s.receiver].lines+=s.linesAwarded)}),c.forEach(s=>{if(f(s.receiver),!i[s.receiver])return;const t=Number(s.gamesRemoved??0)||0;i[s.receiver].gamesRemoved+=t,i[s.receiver].wins-=s.gamesWon,i[s.receiver].losses+=s.gamesLost,i[s.receiver].squares-=s.squaresLost,i[s.receiver].lines-=s.linesLost});const b=Object.values(i).map(s=>{const t=s.wins+s.losses,v=Math.max(0,t-(s.gamesRemoved||0)),p=v>0?(s.wins/v*100).toFixed(1):"0.0",n=o[s.id];return{playerId:s.id,displayName:s.displayName,wins:s.wins,losses:s.losses,record:`${s.wins}-${s.losses}`,gamesPlayed:v,WR:p,squares:s.squares,lines:s.lines,h2h:s.h2h,Playoffs:"maybe",nickname:n==null?void 0:n.nickname,twitch:n==null?void 0:n.twitch,profilePic:n==null?void 0:n.profilePic,SoS:"0.0"}}),I={};b.forEach(s=>I[s.playerId]={wins:s.wins,losses:s.losses});function R(s,t){const v=s+t;return v>0?s/v:0}if(b.forEach(s=>{const t=y[s.playerId]??{};let v=0,p=0;for(const w in t){const L=w,N=t[L],S=I[L];if(!S)continue;const T=R(S.wins,S.losses);v+=N,p+=T*N}const n=v>0?p/v*100:0;s.SoS=n.toFixed(1)}),b.sort((s,t)=>{if(t.wins!==s.wins)return t.wins-s.wins;if(s.losses!==t.losses)return s.losses-t.losses;if(s.h2h[t.playerId]&&!t.h2h[s.playerId])return-1;if(t.h2h[s.playerId]&&!s.h2h[t.playerId])return 1;const v=Number(s.SoS)||0,p=Number(t.SoS)||0;return v!==p?p-v:t.lines!==s.lines?t.lines-s.lines:t.squares!==s.squares?t.squares-s.squares:0}),b.every(s=>s.gamesPlayed>=u))return b.forEach((s,t)=>{s.Playoffs=t<a?"yes":"no"}),b;const x=is(b,u,a);b.forEach(s=>{s.Playoffs=x[s.playerId]});let q=0;for(const s of b)s.Playoffs==="yes"&&(q++,q>a&&(s.Playoffs="maybe"));return b}const rs={class:"standings-wrapper"},cs={key:0,class:"loading"},ds={key:1,class:"error"},us={class:"standings-list"},vs={class:"col-rank-number"},ms={class:"col-player"},ps={class:"player-name"},fs=["href"],hs={class:"col-record-spacing"},_s={class:"col-wr"},ys={class:"col-games"},ws={class:"col-squares"},gs={class:"col-lines"},ks=F({__name:"StandingsAnamnesis",setup(m){const o=P([]),g=P(!0),_=P(null);async function c(h){const u=await fetch(h);if(!u.ok)throw new Error(`Failed to fetch ${h} (${u.status})`);return await u.json()}return H(async()=>{g.value=!0,_.value=null;try{const h=await c("/data/ScadubingoData/anamnesis/matches.json"),u=await c("/data/entries/players.json");let a=[],i=[];const f=[{receiver:"psiphicode",gamesRemoved:0,gamesWon:0,gamesLost:4,squaresLost:0,linesLost:0},{receiver:"blaze",gamesRemoved:0,gamesWon:0,gamesLost:4,squaresLost:0,linesLost:0},{receiver:"jxxman",gamesRemoved:0,gamesWon:0,gamesLost:0,squaresLost:0,linesLost:0},{receiver:"thomas",gamesRemoved:0,gamesWon:1,gamesLost:1,squaresLost:0,linesLost:0}];o.value=ls(h,u,a,i,f)}catch(h){console.error(h),_.value=(h==null?void 0:h.message)??"Unknown error",o.value=[]}finally{g.value=!1}}),(h,u)=>(r(),l("div",rs,[u[1]||(u[1]=e("h1",{class:"title"},"Anamnesis Standings",-1)),g.value?(r(),l("p",cs,"Loadingâ€¦")):_.value?(r(),l("p",ds,d(_.value),1)):(r(),l(C,{key:2},[u[0]||(u[0]=X('<div class="standings-header" data-v-3a68f0fc><div class="col-rank" data-v-3a68f0fc>Rank</div><div class="col-player" data-v-3a68f0fc>Player</div><div class="col-record" data-v-3a68f0fc>Record</div><div class="col-wr" data-v-3a68f0fc>WR%</div><div class="col-games" data-v-3a68f0fc>GP</div><div class="col-squares" data-v-3a68f0fc>Squares</div><div class="col-lines" data-v-3a68f0fc>Lines</div></div>',1)),e("div",us,[(r(!0),l(C,null,A(o.value,(a,i)=>(r(),l("div",{key:a.playerId,class:M(["team-card",{"playoff-yes":a.Playoffs==="yes","playoff-no":a.Playoffs==="no","playoff-maybe":a.Playoffs==="maybe"}])},[e("div",vs,d(i+1),1),e("div",ms,[e("h2",ps,[B(d(a.nickname?`${a.displayName}`:a.displayName)+" ",1),a.twitch?(r(),l("a",{key:0,href:a.twitch,class:"twitch-link",target:"_blank",rel:"noreferrer"},[W(G,{class:"icon"})],8,fs)):$("",!0)])]),e("div",hs,d(a.record),1),e("div",_s,d(a.WR)+"%",1),e("div",ys,d(a.gamesPlayed),1),e("div",ws,d(a.squares),1),e("div",gs,d(a.lines),1)],2))),128))])],64))]))}}),bs=z(ks,[["__scopeId","data-v-3a68f0fc"]]);function $s(m,o){const g={};Object.values(o).forEach(c=>{g[c.id]=c.displayName});const _={};return m.forEach(c=>{var i,f;_[c.week]||(_[c.week]={week:c.week,matches:[]});const[h,u]=c.participants,a=c.winner;_[c.week].matches.push({gameId:c.id,player1:{name:g[h.id]??String(h.id),score:h.score,outcome:h.id===a?c.method:"Lost"},player2:{name:g[u.id]??String(u.id),score:u.score,outcome:u.id===a?c.method:"Lost"},matchTime:c.duration,vodLink:(i=c.media)==null?void 0:i.vod,imageLink:(f=c.media)==null?void 0:f.image})}),Object.values(_).sort((c,h)=>c.week-h.week)}const Ss=F({name:"AnamnesisResults",setup(){const m=P([]),o=P(3),g=P(!1),_=P(null),c=[{label:"Week 1",value:1},{label:"Week 2",value:2},{label:"Week 3",value:3},{label:"All Weeks",value:"all"}];H(async()=>{try{const[y,k]=await Promise.all([fetch("/data/ScadubingoData/anamnesis/matches.json"),fetch("/data/entries/players.json")]);if(!y.ok)throw new Error("Failed to load matches.json");if(!k.ok)throw new Error("Failed to load players.json");const b=await y.json(),I=await k.json(),R=I.players??I;m.value=$s(b.matches??b,R)}catch(y){console.error("Failed to load Anamnesis Match Results:",y)}});const h=K(()=>o.value==="all"?m.value:m.value.filter(y=>y.week===o.value));return{selectedWeek:o,weekOptions:c,filteredWeeks:h,openLink:y=>{window.open(y,"_blank")},openImageModal:y=>{_.value=y,g.value=!0},closeModal:()=>{g.value=!1,_.value=null},getPlayerClass:y=>y==="Bingo"||y==="Majority"?"winner":y==="Lost"?"loser":"",showModal:g,modalImage:_}}}),Ms={class:"match-results-container"},Ps={class:"week-selector"},Ls=["onClick"],Ns={class:"week-title"},Cs={class:"matches-list"},Is={class:"match-line"},Rs={class:"score-line"},As={class:"match-details"},Ts={class:"match-buttons"},Ws=["onClick"],qs=["onClick"],Es={key:0,class:"no-results"},Bs={class:"modal-content"},js=["src"];function Os(m,o,g,_,c,h){return r(),l("div",Ms,[o[4]||(o[4]=e("h2",{class:"title"},"Anamnesis Match Results",-1)),e("div",Ps,[(r(!0),l(C,null,A(m.weekOptions,u=>(r(),l("button",{key:u.value,onClick:a=>m.selectedWeek=u.value,class:M(["week-button",{active:m.selectedWeek===u.value}])},d(u.label),11,Ls))),128))]),(r(!0),l(C,null,A(m.filteredWeeks,u=>(r(),l("div",{key:u.week,class:"week-block"},[e("h3",Ns,"Week "+d(u.week),1),e("div",Cs,[(r(!0),l(C,null,A(u.matches,a=>(r(),l("div",{key:a.gameId,class:"match-card"},[e("div",Is,[e("span",{class:M(["player-name",m.getPlayerClass(a.player1.outcome)])},d(a.player1.name),3),o[2]||(o[2]=e("span",{class:"vs-text"},"vs",-1)),e("span",{class:M(["player-name",m.getPlayerClass(a.player2.outcome)])},d(a.player2.name),3)]),e("div",Rs,[e("span",{class:M(["player-score",m.getPlayerClass(a.player1.outcome)])},d(a.player1.score),3),o[3]||(o[3]=e("span",{class:"dash"}," - ",-1)),e("span",{class:M(["player-score",m.getPlayerClass(a.player2.outcome)])},d(a.player2.score),3)]),e("div",As,[e("p",null,"Match Time: "+d(a.matchTime),1)]),e("div",Ts,[a.imageLink?(r(),l("button",{key:0,class:"match-button",onClick:i=>m.openImageModal(a.imageLink)}," View Board ",8,Ws)):$("",!0),a.vodLink?(r(),l("button",{key:1,class:"match-button",onClick:i=>m.openLink(a.vodLink)}," Watch VOD ",8,qs)):$("",!0)])]))),128))])]))),128)),m.filteredWeeks.length===0?(r(),l("div",Es," No match data available for this week. ")):$("",!0),m.showModal?(r(),l("div",{key:1,class:"modal-overlay",onClick:o[1]||(o[1]=Z((...u)=>m.closeModal&&m.closeModal(...u),["self"]))},[e("div",Bs,[e("button",{class:"close-button",onClick:o[0]||(o[0]=(...u)=>m.closeModal&&m.closeModal(...u))},"âœ•"),e("img",{src:m.modalImage,alt:"Match Board",class:"modal-image"},null,8,js)])])):$("",!0)])}const Fs=z(Ss,[["render",Os],["__scopeId","data-v-c4826ac8"]]),xs={class:"team-colors"},Ds={class:"status-bar"},Vs={key:0},Gs={key:1},Hs={key:2},zs={key:0,class:"next-match-pill"},Us={class:"round-tag-bar"},Ys={class:"round-pill"},Js={class:"round-subtitle"},Zs={class:"series-pill-row"},Ks=["onClick"],Qs={class:"layout"},Xs={class:"teams-column"},se={class:"team-card-header"},ee={class:"team-title"},ae={key:0,class:"winner-crown"},te={class:"team-stats-grid"},ne={class:"team-stat"},oe={class:"team-stat"},ie={class:"team-stat"},le={class:"twitch-links"},re=["href"],ce={class:"twitch-text"},de={class:"center-column"},ue={class:"series-header"},ve={class:"bo3-title"},me={class:"is-match-ongoing"},pe={class:"series-outcome"},fe={key:0,class:"series-winner-banner"},he={key:1},_e={class:"bo3-scoreboard"},ye={class:"team-score side left"},we={class:"label"},ge={class:"score"},ke={class:"game-dots"},be={class:"team-score side right"},$e={class:"score"},Se={class:"label"},Me={class:"games-list"},Pe={class:"game-box-header"},Le={class:"game-title"},Ne={key:0,class:"game-time"},Ce={class:"game-media"},Ie=["onClick"],Re=["href"],Ae={class:"scores"},Te={class:"outcome-text"},We={class:"modal-content"},qe=["src"],Ee="/data/ScadubingoData/anamnesis/playoffs.json",Be="/data/ScadubingoData/anamnesis/matches.json",je="/data/entries/players.json",Oe=F({__name:"PlayoffsAnamnesis",setup(m){const o=P([]),g=P({}),_=P(!1),c=P("");function h(s){s&&(c.value=s,_.value=!0)}function u(){_.value=!1,c.value=""}const a=P(0);function i(s){a.value=s}H(async()=>{const s=await ss(Ee);o.value=es(s),a.value=as(o.value);const[t,v]=await Promise.all([fetch(Be).then(w=>w.json()),fetch(je).then(w=>w.json())]),p=ns(t,v),n={};p.forEach(w=>n[w.playerId]=w),g.value=n});function f(s){return g.value[s]??null}function y(s){var t;return s.series.winner?((t=f(s.series.winner))==null?void 0:t.displayName)??"":""}function k(s){var p,n;const[t,v]=s.series.participants;return`${s.round} â€” ${((p=f(t))==null?void 0:p.displayName)??t} vs ${((n=f(v))==null?void 0:n.displayName)??v}`}function b(s){if(typeof s!="string")return`Game ${s}`;const t=s.match(/-G(\d+)$/i);return t?`Game ${t[1]}`:s}function I(s){const t=ts(s);return t?t.toLocaleString(void 0,{month:"short",day:"2-digit",hour:"numeric",minute:"2-digit",timeZoneName:"short"}):""}function R(s){return s?`var(--${s}, var(--team-unknown))`:"var(--team-unknown)"}function U(s,t){const v=s.series.games[t];if(!v||!v.winner)return{background:"#222",borderColor:"#555",opacity:.35};const p=R(v.winner);return{background:`color-mix(in srgb, ${p} 35%, #000 65%)`,borderColor:p,boxShadow:`0 0 12px ${p}`,opacity:1}}const x=K(()=>{var N,S;const s=o.value[a.value];if(!s)return"";const[t,v]=s.series.participants,p=s.series.winsByTeam[t]??0,n=s.series.winsByTeam[v]??0,w=((N=f(t))==null?void 0:N.displayName)??t,L=((S=f(v))==null?void 0:S.displayName)??v;return p===0&&n===0?"Series not started":s.series.winner?"MATCH COMPLETED":p===n?`Series tied ${p}-${n}`:p>n?`${w} leads ${p}-${n}`:`${L} leads ${n}-${p}`});function q(s){const t=f(s);return t?{name:t.displayName,twitch:t.twitch}:null}return(s,t)=>{var v,p;return r(),l(C,null,[e("div",xs,[o.value.length?(r(),l("div",{key:0,class:"match-wrapper",style:j({"--team-color":R(o.value[a.value].series.winner)})},[e("div",Ds,[e("div",{class:M(["status-pill",{live:O(J)(o.value[a.value]),finished:O(Y)(o.value[a.value])}])},[O(J)(o.value[a.value])?(r(),l("span",Vs,"LIVE")):O(Y)(o.value[a.value])?(r(),l("span",Gs," Completed Series")):(r(),l("span",Hs,"UPCOMING"))],2),I(o.value[a.value])?(r(),l("p",zs," Next Match: "+d(I(o.value[a.value])),1)):$("",!0)]),e("div",Us,[e("span",Ys,d(o.value[a.value].round),1),e("p",null,d(o.value[a.value].tag),1),e("span",Js," Best of "+d(o.value[a.value].series.bestOf),1)]),e("div",Zs,[(r(!0),l(C,null,A(o.value,(n,w)=>(r(),l("button",{key:n.series.id,class:M(["series-pill",{active:w===a.value}]),onClick:L=>i(w)},d(k(n)),11,Ks))),128))]),e("div",Qs,[e("div",Xs,[(r(!0),l(C,null,A(o.value[a.value].series.participants,n=>{var w,L,N,S,T,D,E;return r(),l("div",{key:n,class:M(["team-card-inner",{"winner-glow":o.value[a.value].series.winner===n}]),style:j({"--team-color":R(n)})},[e("div",se,[e("h2",ee,[B(d(((w=f(n))==null?void 0:w.displayName)??n)+" ",1),o.value[a.value].series.winner===n?(r(),l("span",ae,"ðŸ‘‘")):$("",!0)])]),e("div",te,[e("p",ne,[t[0]||(t[0]=e("span",null,"Record",-1)),e("strong",null,d(((L=f(n))==null?void 0:L.record)??"â€”"),1)]),e("p",oe,[t[1]||(t[1]=e("span",null,"Squares",-1)),e("strong",null,d(((N=f(n))==null?void 0:N.squares)??"â€”"),1)]),e("p",ie,[t[2]||(t[2]=e("span",null,"Lines",-1)),e("strong",null,d(((S=f(n))==null?void 0:S.lines)??"â€”"),1)])]),e("div",le,[(T=q(n))!=null&&T.twitch?(r(),l("a",{key:0,href:(D=q(n))==null?void 0:D.twitch,target:"_blank",class:"twitch-link"},[W(G,{class:"twitch-icon"}),e("span",ce,d((E=q(n))==null?void 0:E.name),1)],8,re)):$("",!0)])],6)}),128))]),e("div",de,[e("div",ue,[e("h3",ve,"BEST OF "+d(o.value[a.value].series.bestOf),1),e("p",me,d(x.value),1),e("p",pe,[o.value[a.value].series.winner?(r(),l("span",fe,[t[3]||(t[3]=e("span",{class:"crown-icon"},"ðŸ‘‘",-1)),B(" "+d(y(o.value[a.value]))+" wins the series! ",1)])):(r(),l("span",he,"Series in progress"))])]),e("div",_e,[e("div",ye,[e("span",we,d((v=f(o.value[a.value].series.participants[0]))==null?void 0:v.displayName),1),e("span",ge,d(o.value[a.value].series.winsByTeam[o.value[a.value].series.participants[0]]??0),1)]),e("div",ke,[(r(!0),l(C,null,A(o.value[a.value].series.bestOf,n=>{var w;return r(),l("div",{key:"dot-"+n,class:M(["game-dot",{"not-played":!((w=o.value[a.value].series.games[n-1])!=null&&w.winner)}]),style:j(U(o.value[a.value],n-1))},d(n),7)}),128))]),e("div",be,[e("span",$e,d(o.value[a.value].series.winsByTeam[o.value[a.value].series.participants[1]]??0),1),e("span",Se,d((p=f(o.value[a.value].series.participants[1]))==null?void 0:p.displayName),1)])]),e("div",Me,[(r(!0),l(C,null,A(o.value[a.value].series.games,n=>{var w,L,N,S,T;return r(),l("div",{key:n.id,class:"game-box",style:j({"--team-color":R(n.winner)})},[e("div",Pe,[e("h4",Le,d(b(n.id)),1),n.duration?(r(),l("span",Ne," â± "+d(n.duration),1)):$("",!0)]),e("div",Ce,[(w=n.media)!=null&&w.image?(r(),l("button",{key:0,class:"image-button",onClick:D=>{var E;return h((E=n.media)==null?void 0:E.image)}},[W(os,{class:"marika-eye"})],8,Ie)):$("",!0),(L=n.media)!=null&&L.vod?(r(),l("a",{key:1,class:"vod-button",href:(N=n.media)==null?void 0:N.vod,target:"_blank"},[W(G,{class:"youtube-icon"})],8,Re)):$("",!0)]),e("div",Ae,[e("p",{class:M({winner:n.winner===n.participants[0].id})},[B(d(((S=f(n.participants[0].id))==null?void 0:S.displayName)??n.participants[0].id)+" â€” ",1),e("strong",null,d(n.participants[0].score),1)],2),e("p",{class:M({winner:n.winner===n.participants[1].id})},[B(d(((T=f(n.participants[1].id))==null?void 0:T.displayName)??n.participants[1].id)+" â€” ",1),e("strong",null,d(n.participants[1].score),1)],2)]),e("p",Te,d(n.method??"No result yet"),1)],4)}),128))])])])],4)):$("",!0)]),_.value?(r(),l("div",{key:0,class:"modal-overlay",onClick:Z(u,["self"])},[e("div",We,[e("button",{class:"close-button",onClick:u},"âœ•"),e("img",{src:c.value,alt:"Match Board",class:"modal-image"},null,8,qe)])])):$("",!0)],64)}}}),Fe="/scadubingo-public/Anamnesis_Logo_Transparent.png",xe=F({name:"Anamnesis",components:{Navigation:Q,Standings:bs,MatchResults:Fs,Playoffs:Oe},mounted(){document.body.style.background="linear-gradient(182deg,rgba(10, 10, 10, 1) 0%, rgba(0, 0, 0, 1) 25%, rgba(0, 46, 42, 1) 100%)"},beforeUnmount(){document.body.style.background="#0d1321"}}),De={class:"main-container"};function Ve(m,o,g,_,c,h){const u=V("Navigation"),a=V("Standings"),i=V("MatchResults");return r(),l("div",null,[W(u),e("div",De,[o[0]||(o[0]=e("div",{class:"top-image-container"},[e("img",{src:Fe,class:"logo"})],-1)),W(a),W(i)])])}const Qe=z(xe,[["render",Ve],["__scopeId","data-v-94155bda"]]);export{Qe as default};
