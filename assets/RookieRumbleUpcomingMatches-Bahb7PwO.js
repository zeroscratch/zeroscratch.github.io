import{_ as v,m as T,r as p,f as $,j as _,o as u,c as d,a as e,F as k,b as y,t as r,i as b,g,d as C,M as L,I as A,e as R,n as w,h as M,w as D,T as E}from"./index-2R4GvVmy.js";const W="/data/RookieRumbleData/rookieRumbleStandings.json";async function j(){const o=await(await fetch(W)).json(),h=Object.entries(o).map(([c,t])=>{const m=t.wins,i=t.losses,a=m+i;return{...t,name:c,games:a,wr:S(m,a)}});return h.sort((c,t)=>{if(t.wins!==c.wins)return t.wins-c.wins;const m=parseInt(c.wr),i=parseInt(t.wr);return i!==m?i-m:t.victory.includes(c.name)?t.wins-c.wins:t.lines!==c.lines?t.lines-c.lines:t.squares-c.squares}).forEach((c,t)=>{c.standing=t+1}),h}function S(s,o){if(o===0)return"0%";const h=s/o*100;return`${Math.round(h)}%`}const B={name:"RookieRumbleTable",components:{TwitchIcon:T},setup(){const s=p([]);return $(async()=>{s.value=await j()}),{players:s}}},P={class:"table-container"},F=["href"];function U(s,o,h,c,t,m){const i=_("TwitchIcon");return u(),d("div",P,[e("table",null,[o[0]||(o[0]=e("thead",null,[e("tr",null,[e("th",null,"Standing"),e("th",null,"Player"),e("th",null,"Wins"),e("th",null,"Losses"),e("th",null,"WR"),e("th",null,"Games"),e("th",null,"Squares"),e("th",null,"Lines"),e("th",null,"Twitch")])],-1)),e("tbody",null,[(u(!0),d(k,null,y(c.players,a=>(u(),d("tr",{key:a.name},[e("td",null,r(a.standing),1),e("td",null,r(a.name),1),e("td",null,r(a.wins),1),e("td",null,r(a.losses),1),e("td",null,r(a.wr),1),e("td",null,r(a.games),1),e("td",null,r(a.squares),1),e("td",null,r(a.lines),1),e("td",null,[a.twitch?(u(),d("a",{key:0,href:a.twitch,class:"twitch-link"},[b(i,{class:"icon"})],8,F)):g("",!0)])]))),128))])])])}const me=v(B,[["render",U],["__scopeId","data-v-7236a3fd"]]);async function q(){const s="/data/RookieRumbleData/rookieRumbleMatchResults.json";try{const o=await fetch(s);if(!o.ok)throw new Error(`Failed to fetch stats: ${o.statusText}`);const h=await o.json();if(!Array.isArray(h))throw new Error("Invalid format: expected an array of weeks.");return{matches:h.flatMap(t=>t.matches.map(m=>({...m,week:t.week})))}}catch(o){throw console.error(o),new Error("Failed to load Rookie Rumble Match Results. Please try again later.")}}const N=C({name:"RookieRumbleResultsTable",components:{Modal:L,IconMarikasEye:A},setup(){const s=p({matches:[]}),o=p(!1),h=p(null),c=p(null),t=p(null),m=l=>{h.value=l,o.value=!0},i=l=>l==="Bingo"||l==="Majority"?"highlight-green":l==="Lost"?"highlight-red":"",a=R(()=>{const l=new Set(s.value.matches.map(f=>f.week));return Array.from(l).sort((f,I)=>f-I)}),n=R(()=>t.value!==null?s.value.matches.filter(l=>l.week===t.value):s.value.matches);return $(async()=>{try{s.value=await q();const l=a.value;l.length>0&&(t.value=l[l.length-1])}catch(l){c.value=l.message}}),{currentResults:s,showModal:o,modalImage:h,errorMessage:c,selectedWeek:t,weeks:a,filteredMatches:n,openModal:m,getCellClass:i}}}),V={class:"container"},G={key:0,class:"error"},H={class:"table-container"},O={class:"results-table"},z={class:"table-caption"},Y={class:"week-button-group"},Z=["onClick"],J={rowspan:2},K={rowspan:2},Q={rowspan:2},X=["src"];function x(s,o,h,c,t,m){const i=_("IconMarikasEye"),a=_("Modal");return u(),d("div",V,[s.errorMessage?(u(),d("div",G,r(s.errorMessage),1)):g("",!0),e("div",H,[e("table",O,[e("caption",z,[e("div",Y,[(u(!0),d(k,null,y(s.weeks,n=>(u(),d("button",{key:n,class:w(["week-button",{active:s.selectedWeek===n}]),onClick:l=>s.selectedWeek=n}," Week "+r(n),11,Z))),128)),e("button",{class:w(["week-button",{active:s.selectedWeek===null}]),onClick:o[0]||(o[0]=n=>s.selectedWeek=null)}," All Weeks ",2)])]),o[2]||(o[2]=e("thead",null,[e("tr",null,[e("th",null,"Game"),e("th",null,"Player"),e("th",null,"Score"),e("th",null,"Outcome"),e("th",null,"Time"),e("th",null,"Board")])],-1)),e("tbody",null,[(u(!0),d(k,null,y(s.filteredMatches,(n,l)=>(u(),d(k,{key:l},[e("tr",{class:w({"new-game-row":l===0||s.filteredMatches[l-1].gameId!==n.gameId})},[e("td",J,r(n.gameId),1),e("td",{class:w(s.getCellClass(n.player1.outcome))},r(n.player1.name),3),e("td",{class:w(s.getCellClass(n.player1.outcome))},r(n.player1.score),3),e("td",{class:w(s.getCellClass(n.player1.outcome))},r(n.player1.outcome),3),e("td",K,r(n.matchTime),1),e("td",Q,[n.imageLink?(u(),M(i,{key:0,onClick:f=>s.openModal(n.imageLink),class:"marika-eye"},null,8,["onClick"])):g("",!0)])],2),e("tr",null,[e("td",{class:w(s.getCellClass(n.player2.outcome))},r(n.player2.name),3),e("td",{class:w(s.getCellClass(n.player2.outcome))},r(n.player2.score),3),e("td",{class:w(s.getCellClass(n.player2.outcome))},r(n.player2.outcome),3)])],64))),128))])])]),(u(),M(E,{to:"body"},[b(a,{show:s.showModal,onClose:o[1]||(o[1]=n=>s.showModal=!1)},{default:D(()=>[e("img",{src:s.modalImage,alt:"Board",style:{"max-width":"100%",height:"auto"}},null,8,X)]),_:1},8,["show"])]))])}const we=v(N,[["render",x],["__scopeId","data-v-a562e2d4"]]),ee=C({name:"UpcomingMatchCards",setup(){const s=p([]),o=p(null),h=async()=>{try{const t=await fetch("/data/RookieRumbleData/rookieRumbleUpcomingMatches.json");if(!t.ok)throw new Error(`Failed to fetch: ${t.statusText}`);const m=await t.json(),i=new Date;s.value=m.map(a=>{const n=new Date(a.scheduledAt),l=new Date(i.getTime()-2*60*60*1e3),f=n<=i&&n>=l;return{...a,isLive:f}}).filter(a=>{const n=new Date(a.scheduledAt),l=new Date(i.getTime()-2*60*60*1e3);return n>l})}catch(t){o.value=t.message}},c=t=>new Date(t).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0,timeZoneName:"short"});return $(h),{matches:s,errorMessage:o,formatDate:c}}}),se={class:"upcoming-matches"},te={key:0,class:"error"},ne={class:"match-grid"},oe={class:"players"},ae={class:"player"},le={class:"player"},re={class:"scheduled"},ie={class:"referee"},ce={key:0,class:"type"},ue={key:1,class:"live-badge"};function de(s,o,h,c,t,m){return u(),d("div",se,[s.errorMessage?(u(),d("div",te,r(s.errorMessage),1)):g("",!0),e("div",ne,[(u(!0),d(k,null,y(s.matches.slice(0,3),(i,a)=>(u(),d("div",{key:a,class:w(["match-card",{live:i.isLive}])},[e("h3",null,r(i.title),1),e("div",oe,[e("span",ae,r(i.firstPlayer),1),o[0]||(o[0]=e("span",{class:"vs"},"vs",-1)),e("span",le,r(i.secondPlayer),1)]),e("div",re,r(s.formatDate(i.scheduledAt)),1),e("div",ie," Match Referee: "+r(i.ref),1),i.matchType===2?(u(),d("div",ce,"Best of 3")):g("",!0),i.isLive?(u(),d("div",ue,"LIVE")):g("",!0)],2))),128))])])}const pe=v(ee,[["render",de],["__scopeId","data-v-8d4fa7b5"]]);export{me as R,we as a,pe as b};
