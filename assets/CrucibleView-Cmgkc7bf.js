import{d as B,r as _,o as d,c as v,a as e,F as f,b as C,t as l,_ as T,e as M,f as W,g as $,n as h,h as q,i as g,w as R,M as I,T as x,I as A,Y as N,D as z,H as E,j as L,k as F,l as D}from"./index-BW82TgIA.js";const V="/data/crucibleStandings.json";async function H(){return fetch(V).then(m=>m.json()).then(m=>{for(let r=0;r<m.CruciblePlayers.length;r++){var i=m.CruciblePlayers[r].wins,w=m.CruciblePlayers[r].wins+m.CruciblePlayers[r].losses;m.CruciblePlayers[r].games=w;var y=Y(i,w);m.CruciblePlayers[r].wr=y;var c=m.CruciblePlayers[r].opponentWins,o=m.CruciblePlayers[r].opponentLoss;m.CruciblePlayers[r].recordStrength=c/(o+c)}return m.CruciblePlayers.sort((r,u)=>{if(u.wins!==r.wins)return u.wins-r.wins;const p=Number(r.wr.substring(0,r.wr.length-1)),t=Number(u.wr.substring(0,u.wr.length-1));return t!==p?t-p:u.recordStrength-r.recordStrength}).forEach((r,u)=>{r.standing=u+1}),m})}function Y(m,i){if(m===0||i===0)return"0%";{var w=m/i*100;const c=`${Math.round(w)}%`;return String(c)}}const G={class:"table-container"},J={class:"table-wrapper"},K={class:"horizontal-lines-table"},O=B({__name:"CrucibleTable",props:{CruciblePlayers:{}},setup(m){const i=_(["Standing","Player","Wins","Losses","Games","WR"]),w=_(["standing","name","wins","losses","games","wr"]);return(y,c)=>(d(),v("div",G,[e("div",J,[c[0]||(c[0]=e("h2",{class:"redmanes-header"},"The Crucible",-1)),e("table",K,[e("thead",null,[e("tr",null,[(d(!0),v(f,null,C(i.value,(o,r)=>(d(),v("th",{key:"table1-header-"+r},l(o),1))),128))])]),e("tbody",null,[(d(!0),v(f,null,C(y.CruciblePlayers,(o,r)=>(d(),v("tr",{key:"table1-row-rednames"+r},[(d(!0),v(f,null,C(w.value,u=>(d(),v("td",null,l(o[u]),1))),256))]))),128))])])])]))}}),U=T(O,[["__scopeId","data-v-7d1f5af4"]]),j=async()=>{const m="/data/normalizedResults.json";try{const i=await fetch(m);if(!i.ok)throw new Error(`Failed to fetch stats: ${i.statusText}`);const w=await i.json();if(!w.crucible)throw new Error("Crucible data not found.");return{matches:w.crucible.flatMap(c=>c.matches.map(o=>({...o,week:c.week})))}}catch(i){throw console.error(i),new Error("Failed to load Crucible stats. Please try again later.")}},Q={class:"container"},X={key:0,class:"error"},Z={class:"table-container"},ee={class:"results-table"},se={class:"table-caption"},ne={class:"week-button-group"},te=["onClick"],ie={rowspan:2},re={rowspan:2},oe={rowspan:2},ae=["src"],le=B({__name:"CrucibleResultsTable",setup(m){const i=_({matches:[]}),w=_(!1),y=_(void 0),c=_(null),o=_(null),r=a=>{y.value=a,w.value=!0},u=a=>a==="Bingo"||a==="Majority"?"highlight-green":a==="Lost"?"highlight-red":"",p=M(()=>{const a=new Set(i.value.matches.map(n=>n.week));return Array.from(a).sort((n,s)=>n-s)}),t=M(()=>o.value!==null?i.value.matches.filter(a=>a.week===o.value):i.value.matches);return W(async()=>{try{i.value=await j();const a=p.value;a.length>0&&(o.value=a[8])}catch(a){c.value=a.message}}),(a,n)=>(d(),v("div",Q,[c.value?(d(),v("div",X,l(c.value),1)):$("",!0),e("div",Z,[e("table",ee,[e("caption",se,[e("div",ne,[(d(!0),v(f,null,C(p.value,s=>(d(),v("button",{key:s,class:h(["week-button",{active:o.value===s}]),onClick:b=>o.value=s}," Week "+l(s),11,te))),128)),e("button",{class:h(["week-button",{active:o.value===null}]),onClick:n[0]||(n[0]=s=>o.value=null)}," All Weeks ",2)])]),n[2]||(n[2]=e("thead",null,[e("tr",null,[e("th",null,"Game"),e("th",null,"Player"),e("th",null,"Score"),e("th",null,"Win Condition"),e("th",null,"Match Time"),e("th",null,"Board")])],-1)),e("tbody",null,[(d(!0),v(f,null,C(t.value,(s,b)=>(d(),v(f,{key:b},[e("tr",{class:h({"new-game-row":b===0||t.value[b-1].gameId!==s.gameId})},[e("td",ie,l(s.gameId),1),e("td",{class:h(u(s.player1.outcome))},l(s.player1.name),3),e("td",{class:h(u(s.player1.outcome))},l(s.player1.score),3),e("td",{class:h(u(s.player1.outcome))},l(s.player1.outcome),3),e("td",re,l(s.matchTime),1),e("td",oe,[s.imageLink?(d(),q(A,{key:0,onClick:S=>r(s.imageLink),class:"marika-eye"},null,8,["onClick"])):$("",!0)])],2),e("tr",null,[e("td",{class:h(u(s.player2.outcome))},l(s.player2.name),3),e("td",{class:h(u(s.player2.outcome))},l(s.player2.score),3),e("td",{class:h(u(s.player2.outcome))},l(s.player2.outcome),3)])],64))),128))])])]),(d(),q(x,{to:"body"},[g(I,{show:w.value,onClose:n[1]||(n[1]=s=>w.value=!1)},{default:R(()=>[e("img",{src:y.value,alt:"Board Image",style:{"max-width":"100%",height:"auto"}},null,8,ae)]),_:1},8,["show"])]))]))}}),ce=T(le,[["__scopeId","data-v-abc76e15"]]),de=async()=>{const m="/data/crucibleSquareStats.json";try{const i=await fetch(m);if(!i.ok)throw new Error(`Failed to fetch challenge records: ${i.statusText}`);const w=await i.json();return{records:Object.entries(w).map(([c,o])=>({name:c,completed:o.Completed,appeared:o.Appeared,ratio:o.Ratio,appearance:o.Appearance}))}}catch(i){throw console.error(i),new Error("Failed to load challenge records. Please try again later.")}},ue={class:"container"},me={key:0,class:"error"},ve={key:1,class:"table-container"},pe={class:"results-table"},he={class:"left-column"},we=B({__name:"CrucibleSquareStatsTable",setup(m){const i=_({records:[]}),w=_(null),y=_("name"),c=_("asc");W(async()=>{let u=73;try{const p=await de();i.value.records=p.records.map(t=>{const a=t.appeared>0?Number((t.completed/t.appeared*100).toFixed(0)):0,n=Number((t.appeared/u*100).toFixed(0));return{...t,ratio:a,appearance:n}}),i.value.records.sort((t,a)=>t.name.localeCompare(a.name))}catch(p){w.value=p.message}});const o=u=>{y.value===u?c.value=c.value==="asc"?"desc":"asc":(y.value=u,c.value="desc"),i.value.records.sort((p,t)=>{let a=parseFloat(p[u]),n=parseFloat(t[u]);return c.value==="asc"?a-n:n-a})},r=()=>{y.value==="name"?c.value=c.value==="asc"?"desc":"asc":(y.value="name",c.value="desc"),i.value.records.sort((u,p)=>{const t=u.name.toLowerCase(),a=p.name.toLowerCase();return c.value==="asc"?t.localeCompare(a):a.localeCompare(t)})};return(u,p)=>(d(),v("div",ue,[w.value?(d(),v("div",me,l(w.value),1)):(d(),v("div",ve,[e("table",pe,[e("thead",null,[e("tr",null,[e("th",{onClick:r,class:"sortable"},"Square Name ⬍"),e("th",{onClick:p[0]||(p[0]=t=>o("completed")),class:"sortable"},"Completed ⬍"),e("th",{onClick:p[1]||(p[1]=t=>o("appeared")),class:"sortable"},"Appeared ⬍"),e("th",{onClick:p[2]||(p[2]=t=>o("ratio")),class:"sortable"},"Completion % ⬍"),e("th",{onClick:p[3]||(p[3]=t=>o("appearance")),class:"sortable"},"Appearance % ⬍")])]),e("tbody",null,[(d(!0),v(f,null,C(i.value.records,(t,a)=>(d(),v("tr",{key:a},[e("td",he,l(t.name),1),e("td",null,l(t.completed),1),e("td",null,l(t.appeared),1),e("td",null,l(t.ratio)+"%",1),e("td",null,l(t.appearance)+"%",1)]))),128))])])]))]))}}),ye=T(we,[["__scopeId","data-v-1d6799f8"]]),_e={class:"bracket-container"},fe={class:"wrapper"},be={class:"item"},ke={class:"item-childrens"},ge={class:"item-child"},Ce={class:"item"},$e={class:"item-childrens"},Le={class:"item-child"},Te={class:"item"},qe={class:"item-child"},Be={class:"item"},Se={class:"item-childrens"},Pe={class:"wrapper"},Me={class:"item"},We={class:"item-childrens"},Re={class:"item-child"},Ie={class:"item"},xe={class:"item-childrens"},Ae={class:"item-child"},Ne={class:"item"},ze={class:"item-child"},Ee={class:"item"},Fe={class:"item-childrens"},De={key:0,class:"match-details"},Ve={class:"game-info"},He={class:"player"},Ye={class:"player"},Ge={class:"outcome"},Je={key:0},Ke={key:1},Oe={key:0,class:"icon-row"},Ue=["href"],je=["src"],Qe=B({__name:"CruciblePlayoffBracketWinners",setup(m){const i=_(!1),w=_(void 0),y=_({"winners-finals":[{gameid:1,player1:{name:"TBD",score:0,outcome:"",division:""},player2:{name:"TBD",score:0,outcome:"",division:""},matchTime:"00:00:00",vodLink:"",imageLink:""}],"grand-finals":[{gameid:1,player1:{name:"TBD",score:0,outcome:"",division:""},player2:{name:"TBD",score:0,outcome:"",division:""},matchTime:"00:00:00",vodLink:"",imageLink:""}],"winners-semis-1":[{gameid:1,player1:{name:"Snowy",score:0,outcome:"",division:"1"},player2:{name:"Jerzounek",score:0,outcome:"",division:"3"},matchTime:"00:00:00",vodLink:"",imageLink:""}],"winners-semis-2":[{gameid:1,player1:{name:"Cronys",score:0,outcome:"",division:"2"},player2:{name:"Malte",score:0,outcome:"",division:"6"},matchTime:"00:00:00",vodLink:"",imageLink:""}],"winner-quarters-1":[{gameid:1,player1:{name:"Snowy",score:13,outcome:"win",division:"1"},player2:{name:"Lorian",score:5,outcome:"loss",division:"8"},matchTime:"01:32:06",vodLink:"https://www.twitch.tv/videos/2430947463?t=06h30m37s",imageLink:"/img/crucible/snowy-v-lorian-playoff.png"}],"winner-quarters-2":[{gameid:1,player1:{name:"Jerzounek",score:0,outcome:"win",division:"3"},player2:{name:"Harv",score:0,outcome:"",division:"5"},matchTime:"00:00:00",vodLink:"",imageLink:""}],"winner-quarters-3":[{gameid:1,player1:{name:"Cronys",score:13,outcome:"win",division:"2"},player2:{name:"Doitz",score:12,outcome:"loss",division:"7"},matchTime:"01:39:22",vodLink:"https://www.twitch.tv/videos/2426753608?t=03h44m01s",imageLink:"/img/crucible/cronys-v-doitz-playoffs.png"}],"winner-quarters-4":[{gameid:1,player1:{name:"Loeless",score:7,outcome:"loss",division:"4"},player2:{name:"Malte",score:13,outcome:"win",division:"6"},matchTime:"01:14:34",vodLink:"https://www.twitch.tv/videos/2430947463?t=00h24m11s",imageLink:"/img/crucible/loe-v-malte-playoffs.png"}],"losers-round1-1":[{gameid:1,player1:{name:"Lorian",score:0,outcome:"",division:"8"},player2:{name:"Harv",score:0,outcome:"",division:"5"},matchTime:"00:00:00",vodLink:"",imageLink:""}],"losers-round1-2":[{gameid:1,player1:{name:"Loeless",score:0,outcome:"",division:"4"},player2:{name:"Doitz",score:0,outcome:"",division:"7"},matchTime:"00:00:00",vodLink:"",imageLink:""}],"losers-quarters-1":[{gameid:1,player1:{name:"TBD",score:0,outcome:"",division:""},player2:{name:"TBD",score:0,outcome:"",division:""},matchTime:"00:00:00",vodLink:"",imageLink:""}],"losers-quarters-2":[{gameid:1,player1:{name:"TBD",score:0,outcome:"",division:""},player2:{name:"TBD",score:0,outcome:"",division:""},matchTime:"00:00:00",vodLink:"",imageLink:""}],"losers-semis":[{gameid:1,player1:{name:"TBD",score:0,outcome:"",division:""},player2:{name:"TBD",score:0,outcome:"",division:""},matchTime:"00:00:00",vodLink:"",imageLink:""}],"losers-finals":[{gameid:1,player1:{name:"TBD",score:0,outcome:"",division:""},player2:{name:"TBD",score:0,outcome:"",division:""},matchTime:"00:00:00",vodLink:"",imageLink:""}]}),c=_(null);function o(a){c.value=y.value[a]}function r(a){var s;const n=(s=y.value[a])==null?void 0:s[0];return n?`${n.player1.name} vs ${n.player2.name}`:"TBD"}const u=a=>{w.value=a,i.value=!0},p=a=>{const{player1:n,player2:s}=a;return n.outcome==="win"?{"first-win":n.division==="1","second-win":n.division==="2","third-win":n.division==="3","fourth-win":n.division==="4","fifth-win":n.division==="5","sixth-win":n.division==="6","seventh-win":n.division==="7","eighth-win":n.division==="8"}:s.outcome==="win"?{"first-win":s.division==="1","second-win":s.division==="2","third-win":s.division==="3","fourth-win":s.division==="4","fifth-win":s.division==="5","sixth-win":s.division==="6","seventh-win":s.division==="7","eighth-win":s.division==="8"}:{}};function t(a){const n=y.value[a];if(!n||n.length===0)return"";let s=0,b=0;for(const P of n)P.player1.outcome==="win"&&s++,P.player2.outcome==="win"&&b++;const S=s>b?"player1":b>s?"player2":null;if(!S)return"";const k=S==="player1"?n[0].player1.name.trim().toLowerCase():n[0].player2.name.trim().toLowerCase();return k==="snowy"?"first-win":k==="cronys"?"second-win":k==="jerzounek"?"third-win":k==="loeless"?"fourth-win":k==="harv"?"fifth-win":k==="malte"?"sixth-win":k==="doitz"?"seventh-win":k==="lorian"?"eighth-win":"bg-neutral"}return(a,n)=>(d(),v(f,null,[e("div",_e,[e("div",fe,[e("div",be,[e("div",{class:"item-parent",onClick:n[0]||(n[0]=s=>o("grand-finals"))},[e("p",{class:h(t("grand-finals"))},l(r("grand-finals")),3)]),e("div",{class:"item-parent",onClick:n[1]||(n[1]=s=>o("winners-finals"))},[e("p",{class:h(t("winners-finals"))},l(r("winners-finals")),3)]),e("div",ke,[e("div",ge,[e("div",Ce,[e("div",{class:"item-parent",onClick:n[2]||(n[2]=s=>o("winners-semis-1"))},[e("p",{class:h(t("winners-semis-1"))},l(r("winners-semis-1")),3)]),e("div",$e,[e("div",Le,[e("div",Te,[e("div",{class:"item-parent no-parent-connector",onClick:n[3]||(n[3]=s=>o("winner-quarters-1"))},[e("p",{class:h(t("winner-quarters-1"))},l(r("winner-quarters-1")),3)])])]),e("div",{class:"item-child",onClick:n[4]||(n[4]=s=>o("winner-quarters-2"))},[e("p",{class:h(t("winner-quarters-2"))},l(r("winner-quarters-2")),3)])])])]),e("div",qe,[e("div",Be,[e("div",{class:"item-parent",onClick:n[5]||(n[5]=s=>o("winners-semis-2"))},[e("p",{class:h(t("winners-semis-2"))},l(r("winners-semis-2")),3)]),e("div",Se,[e("div",{class:"item-child",onClick:n[6]||(n[6]=s=>o("winner-quarters-3"))},[e("p",{class:h(t("winner-quarters-3"))},l(r("winner-quarters-3")),3)]),e("div",{class:"item-child",onClick:n[7]||(n[7]=s=>o("winner-quarters-4"))},[e("p",{class:h(t("winner-quarters-4"))},l(r("winner-quarters-4")),3)])])])])])])]),e("div",Pe,[e("div",Me,[e("div",{class:"item-parent",onClick:n[8]||(n[8]=s=>o("losers-finals"))},[e("p",{class:h(t("losers-finals"))},l(r("losers-finals")),3)]),e("div",{class:"item-parent",onClick:n[9]||(n[9]=s=>o("losers-semis"))},[e("p",{class:h(t("losers-semis"))},l(r("losers-semis")),3)]),e("div",We,[e("div",Re,[e("div",Ie,[e("div",{class:"item-parent",onClick:n[10]||(n[10]=s=>o("losers-quarters-1"))},[e("p",{class:h(t("losers-quarters-1"))},l(r("losers-quarters-1")),3)]),e("div",xe,[e("div",Ae,[e("div",Ne,[e("div",{class:"item-parent no-parent-connector",onClick:n[11]||(n[11]=s=>o("losers-round1-1"))},[e("p",{class:h(t("losers-round1-1"))},l(r("losers-round1-1")),3)])])])])])]),e("div",ze,[e("div",Ee,[e("div",{class:"item-parent",onClick:n[12]||(n[12]=s=>o("losers-quarters-2"))},[e("p",{class:h(t("losers-quarters-2"))},l(r("losers-quarters-2")),3)]),e("div",Fe,[e("div",{class:"item-child",onClick:n[13]||(n[13]=s=>o("losers-round1-2"))},[e("p",{class:h(t("losers-round1-2"))},l(r("losers-round1-2")),3)])])])])])])]),c.value?(d(),v("div",De,[n[15]||(n[15]=e("h2",null,"Match Details",-1)),(d(!0),v(f,null,C(c.value,s=>(d(),v("div",{class:h(["game-card",p(s)]),key:s.gameid},[e("div",Ve,[e("div",He,l(s.player1.name)+" ("+l(s.player1.division)+") - "+l(s.player1.score),1),e("div",Ye,l(s.player2.name)+" ("+l(s.player2.division)+") - "+l(s.player2.score),1),e("div",Ge,[s.player1.outcome==="win"||s.player2.outcome==="win"?(d(),v("span",Je," Winner: "+l(s.player1.outcome==="win"?s.player1.name:s.player2.name),1)):(d(),v("span",Ke," Winner: TBD "))]),s.imageLink||s.vodLink?(d(),v("div",Oe,[s.imageLink?(d(),q(A,{key:0,onClick:b=>u(s.imageLink),class:"marika-eye"},null,8,["onClick"])):$("",!0),s.vodLink?(d(),v("a",{key:1,href:s.vodLink,target:"_blank",class:"no-hover"},[g(N)],8,Ue)):$("",!0)])):$("",!0)])],2))),128))])):$("",!0)]),(d(),q(x,{to:"body"},[g(I,{show:i.value,onClose:n[14]||(n[14]=s=>i.value=!1)},{default:R(()=>[e("img",{src:w.value,alt:"Board Image",style:{"max-width":"100%",height:"auto"}},null,8,je)]),_:1},8,["show"])]))],64))}}),Xe=T(Qe,[["__scopeId","data-v-fb619dce"]]),Ze={name:"CrucibleView",components:{CrucibleTable:U,Divider:z,HeaderView:E,CrucibleResultsTable:ce,CrucibleSquareStatsTable:ye,CruciblePlayoffBracketWinners:Xe},data(){return{table:{cruciblePlayers:{CruciblePlayers:[]}}}},created(){H().then(m=>{console.log(m),this.table.cruciblePlayers=m})}},es={class:"main-container"},ss={class:"table-container"};function ns(m,i,w,y,c,o){const r=L("HeaderView"),u=L("CruciblePlayoffBracketWinners"),p=L("CrucibleTable"),t=L("CrucibleResultsTable"),a=L("CrucibleSquareStatsTable");return d(),v(f,null,[g(r),e("div",es,[i[2]||(i[2]=e("div",{class:"top-image-container"},[e("img",{src:F,alt:"Stars Ending",class:"grayscale-image"}),e("img",{src:D,alt:"Logo",class:"logo-image"})],-1)),i[3]||(i[3]=e("h1",{class:"header-2"},"Crucible Playoff Bracket",-1)),g(u,{class:"bracket-section"}),i[4]||(i[4]=e("h1",{class:"header"},"The Crucible Standings",-1)),e("div",ss,[g(p,{CruciblePlayers:c.table.cruciblePlayers.CruciblePlayers},null,8,["CruciblePlayers"])]),e("div",null,[i[0]||(i[0]=e("h1",null,"Crucible Results",-1)),g(t)]),e("div",null,[i[1]||(i[1]=e("h1",null,"Crucible Square Stats",-1)),g(a)])])],64)}const is=T(Ze,[["render",ns],["__scopeId","data-v-32b3e901"]]);export{is as default};
