import{_ as lt,r as oe,E as Pe,e as qe,f as Be,G as Ue,B as vt,c as W,o as F,a as s,g as ae,t as U,z as ie,A as se,v as Z,n as ce,x as A,i as Ie,w as ht,m as pt,F as gt,b as mt,y as De,H as yt,d as bt,j as Ge,N as wt}from"./index-B8BMHuJL.js";function St(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var de={exports:{}},ze;function kt(){return ze||(ze=1,(function(u){var a=(function(o){var v=Object.prototype,c=v.hasOwnProperty,g=Object.defineProperty||function(r,e,n){r[e]=n.value},b,E=typeof Symbol=="function"?Symbol:{},O=E.iterator||"@@iterator",h=E.asyncIterator||"@@asyncIterator",w=E.toStringTag||"@@toStringTag";function S(r,e,n){return Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),r[e]}try{S({},"")}catch{S=function(e,n,d){return e[n]=d}}function x(r,e,n,d){var i=e&&e.prototype instanceof C?e:C,y=Object.create(i.prototype),M=new N(d||[]);return g(y,"_invoke",{value:f(r,n,M)}),y}o.wrap=x;function Y(r,e,n){try{return{type:"normal",arg:r.call(e,n)}}catch(d){return{type:"throw",arg:d}}}var Q="suspendedStart",R="suspendedYield",_="executing",D="completed",T={};function C(){}function I(){}function q(){}var X={};S(X,O,function(){return this});var re=Object.getPrototypeOf,H=re&&re(re(J([])));H&&H!==v&&c.call(H,O)&&(X=H);var G=q.prototype=C.prototype=Object.create(X);I.prototype=q,g(G,"constructor",{value:q,configurable:!0}),g(q,"constructor",{value:I,configurable:!0}),I.displayName=S(q,w,"GeneratorFunction");function ne(r){["next","throw","return"].forEach(function(e){S(r,e,function(n){return this._invoke(e,n)})})}o.isGeneratorFunction=function(r){var e=typeof r=="function"&&r.constructor;return e?e===I||(e.displayName||e.name)==="GeneratorFunction":!1},o.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,q):(r.__proto__=q,S(r,w,"GeneratorFunction")),r.prototype=Object.create(G),r},o.awrap=function(r){return{__await:r}};function ee(r,e){function n(y,M,$,B){var P=Y(r[y],r,M);if(P.type==="throw")B(P.arg);else{var p=P.arg,m=p.value;return m&&typeof m=="object"&&c.call(m,"__await")?e.resolve(m.__await).then(function(L){n("next",L,$,B)},function(L){n("throw",L,$,B)}):e.resolve(m).then(function(L){p.value=L,$(p)},function(L){return n("throw",L,$,B)})}}var d;function i(y,M){function $(){return new e(function(B,P){n(y,M,B,P)})}return d=d?d.then($,$):$()}g(this,"_invoke",{value:i})}ne(ee.prototype),S(ee.prototype,h,function(){return this}),o.AsyncIterator=ee,o.async=function(r,e,n,d,i){i===void 0&&(i=Promise);var y=new ee(x(r,e,n,d),i);return o.isGeneratorFunction(e)?y:y.next().then(function(M){return M.done?M.value:y.next()})};function f(r,e,n){var d=Q;return function(y,M){if(d===_)throw new Error("Generator is already running");if(d===D){if(y==="throw")throw M;return te()}for(n.method=y,n.arg=M;;){var $=n.delegate;if($){var B=t($,n);if(B){if(B===T)continue;return B}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(d===Q)throw d=D,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);d=_;var P=Y(r,e,n);if(P.type==="normal"){if(d=n.done?D:R,P.arg===T)continue;return{value:P.arg,done:n.done}}else P.type==="throw"&&(d=D,n.method="throw",n.arg=P.arg)}}}function t(r,e){var n=e.method,d=r.iterator[n];if(d===b)return e.delegate=null,n==="throw"&&r.iterator.return&&(e.method="return",e.arg=b,t(r,e),e.method==="throw")||n!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),T;var i=Y(d,r.iterator,e.arg);if(i.type==="throw")return e.method="throw",e.arg=i.arg,e.delegate=null,T;var y=i.arg;if(!y)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,T;if(y.done)e[r.resultName]=y.value,e.next=r.nextLoc,e.method!=="return"&&(e.method="next",e.arg=b);else return y;return e.delegate=null,T}ne(G),S(G,w,"Generator"),S(G,O,function(){return this}),S(G,"toString",function(){return"[object Generator]"});function l(r){var e={tryLoc:r[0]};1 in r&&(e.catchLoc=r[1]),2 in r&&(e.finallyLoc=r[2],e.afterLoc=r[3]),this.tryEntries.push(e)}function k(r){var e=r.completion||{};e.type="normal",delete e.arg,r.completion=e}function N(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(l,this),this.reset(!0)}o.keys=function(r){var e=Object(r),n=[];for(var d in e)n.push(d);return n.reverse(),function i(){for(;n.length;){var y=n.pop();if(y in e)return i.value=y,i.done=!1,i}return i.done=!0,i}};function J(r){if(r){var e=r[O];if(e)return e.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var n=-1,d=function i(){for(;++n<r.length;)if(c.call(r,n))return i.value=r[n],i.done=!1,i;return i.value=b,i.done=!0,i};return d.next=d}}return{next:te}}o.values=J;function te(){return{value:b,done:!0}}return N.prototype={constructor:N,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=b,this.done=!1,this.delegate=null,this.method="next",this.arg=b,this.tryEntries.forEach(k),!r)for(var e in this)e.charAt(0)==="t"&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=b)},stop:function(){this.done=!0;var r=this.tryEntries[0],e=r.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(B,P){return y.type="throw",y.arg=r,e.next=B,P&&(e.method="next",e.arg=b),!!P}for(var d=this.tryEntries.length-1;d>=0;--d){var i=this.tryEntries[d],y=i.completion;if(i.tryLoc==="root")return n("end");if(i.tryLoc<=this.prev){var M=c.call(i,"catchLoc"),$=c.call(i,"finallyLoc");if(M&&$){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(M){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else if($){if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(r,e){for(var n=this.tryEntries.length-1;n>=0;--n){var d=this.tryEntries[n];if(d.tryLoc<=this.prev&&c.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var i=d;break}}i&&(r==="break"||r==="continue")&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var y=i?i.completion:{};return y.type=r,y.arg=e,i?(this.method="next",this.next=i.finallyLoc,T):this.complete(y)},complete:function(r,e){if(r.type==="throw")throw r.arg;return r.type==="break"||r.type==="continue"?this.next=r.arg:r.type==="return"?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):r.type==="normal"&&e&&(this.next=e),T},finish:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===r)return this.complete(n.completion,n.afterLoc),k(n),T}},catch:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===r){var d=n.completion;if(d.type==="throw"){var i=d.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={iterator:J(r),resultName:e,nextLoc:n},this.method==="next"&&(this.arg=b),T}},o})(u.exports);try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}})(de)),de.exports}var fe,je;function Me(){return je||(je=1,fe=(u,a)=>`${u}-${a}-${Math.random().toString(16).slice(3,8)}`),fe}var ve,We;function ut(){if(We)return ve;We=1;const u=Me();let a=0;return ve=({id:o,action:v,payload:c={}})=>{let g=o;return typeof g>"u"&&(g=u("Job",a),a+=1),{id:g,action:v,payload:c}},ve}var le={},Fe;function $e(){if(Fe)return le;Fe=1;let u=!1;return le.logging=u,le.setLogging=a=>{u=a},le.log=(...a)=>u?console.log.apply(this,a):null,le}var he,xe;function Lt(){if(xe)return he;xe=1;const u=ut(),{log:a}=$e(),o=Me();let v=0;return he=()=>{const c=o("Scheduler",v),g={},b={};let E=[];v+=1;const O=()=>E.length,h=()=>Object.keys(g).length,w=()=>{if(E.length!==0){const R=Object.keys(g);for(let _=0;_<R.length;_+=1)if(typeof b[R[_]]>"u"){E[0](g[R[_]]);break}}},S=(R,_)=>new Promise((D,T)=>{const C=u({action:R,payload:_});E.push(async I=>{E.shift(),b[I.id]=C;try{D(await I[R].apply(this,[..._,C.id]))}catch(q){T(q)}finally{delete b[I.id],w()}}),a(`[${c}]: Add ${C.id} to JobQueue`),a(`[${c}]: JobQueue length=${E.length}`),w()});return{addWorker:R=>(g[R.id]=R,a(`[${c}]: Add ${R.id}`),a(`[${c}]: Number of workers=${h()}`),w(),R.id),addJob:async(R,..._)=>{if(h()===0)throw Error(`[${c}]: You need to have at least one worker before adding jobs`);return S(R,_)},terminate:async()=>{Object.keys(g).forEach(async R=>{await g[R].terminate()}),E=[]},getQueueLen:O,getNumWorkers:h}},he}function Rt(u){throw new Error('Could not dynamically require "'+u+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pe,Ke;function Et(){return Ke||(Ke=1,pe=u=>{const a={};return typeof WorkerGlobalScope<"u"?a.type="webworker":typeof document=="object"?a.type="browser":typeof process=="object"&&typeof Rt=="function"&&(a.type="node"),typeof u>"u"?a:a[u]}),pe}var ge,Ye;function Ot(){if(Ye)return ge;Ye=1;const a=Et()("type")==="browser"?o=>new URL(o,window.location.href).href:o=>o;return ge=o=>{const v={...o};return["corePath","workerPath","langPath"].forEach(c=>{o[c]&&(v[c]=a(v[c]))}),v},ge}var me,He;function ct(){return He||(He=1,me={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),me}const Ct="6.0.1",At={version:Ct};var ye,Je;function _t(){return Je||(Je=1,ye={workerBlobURL:!0,logger:()=>{}}),ye}var be,Ve;function Tt(){if(Ve)return be;Ve=1;const u=At.version;return be={..._t(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${u}/dist/worker.min.js`},be}var we,Ze;function Nt(){return Ze||(Ze=1,we=({workerPath:u,workerBlobURL:a})=>{let o;if(Blob&&URL&&a){const v=new Blob([`importScripts("${u}");`],{type:"application/javascript"});o=new Worker(URL.createObjectURL(v))}else o=new Worker(u);return o}),we}var Se,Qe;function It(){return Qe||(Qe=1,Se=u=>{u.terminate()}),Se}var ke,Xe;function Mt(){return Xe||(Xe=1,ke=(u,a)=>{u.onmessage=({data:o})=>{a(o)}}),ke}var Le,et;function $t(){return et||(et=1,Le=async(u,a)=>{u.postMessage(a)}),Le}var Re,tt;function Pt(){if(tt)return Re;tt=1;const u=o=>new Promise((v,c)=>{const g=new FileReader;g.onload=()=>{v(g.result)},g.onerror=({target:{error:{code:b}}})=>{c(Error(`File could not be read! Code=${b}`))},g.readAsArrayBuffer(o)}),a=async o=>{let v=o;if(typeof o>"u")return"undefined";if(typeof o=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(o)?v=atob(o.split(",")[1]).split("").map(c=>c.charCodeAt(0)):v=await(await fetch(o)).arrayBuffer();else if(typeof HTMLElement<"u"&&o instanceof HTMLElement)o.tagName==="IMG"&&(v=await a(o.src)),o.tagName==="VIDEO"&&(v=await a(o.poster)),o.tagName==="CANVAS"&&await new Promise(c=>{o.toBlob(async g=>{v=await u(g),c()})});else if(typeof OffscreenCanvas<"u"&&o instanceof OffscreenCanvas){const c=await o.convertToBlob();v=await u(c)}else(o instanceof File||o instanceof Blob)&&(v=await u(o));return new Uint8Array(v)};return Re=a,Re}var Ee,rt;function qt(){if(rt)return Ee;rt=1;const u=Tt(),a=Nt(),o=It(),v=Mt(),c=$t(),g=Pt();return Ee={defaultOptions:u,spawnWorker:a,terminateWorker:o,onMessage:v,send:c,loadImage:g},Ee}var Oe,nt;function dt(){if(nt)return Oe;nt=1;const u=Ot(),a=ut(),{log:o}=$e(),v=Me(),c=ct(),{defaultOptions:g,spawnWorker:b,terminateWorker:E,onMessage:O,loadImage:h,send:w}=qt();let S=0;return Oe=async(x="eng",Y=c.LSTM_ONLY,Q={},R={})=>{const _=v("Worker",S),{logger:D,errorHandler:T,...C}=u({...g,...Q}),I={},q=typeof x=="string"?x.split("+"):x;let X=Y,re=R;const H=[c.DEFAULT,c.LSTM_ONLY].includes(Y)&&!C.legacyCore;let G,ne;const ee=new Promise((p,m)=>{ne=p,G=m}),f=p=>{G(p.message)};let t=b(C);t.onerror=f,S+=1;const l=({id:p,action:m,payload:L})=>new Promise((z,j)=>{o(`[${_}]: Start ${p}, action=${m}`);const V=`${m}-${p}`;I[V]={resolve:z,reject:j},w(t,{workerId:_,jobId:p,action:m,payload:L})}),k=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),N=p=>l(a({id:p,action:"load",payload:{options:{lstmOnly:H,corePath:C.corePath,logging:C.logging}}})),J=(p,m,L)=>l(a({id:L,action:"FS",payload:{method:"writeFile",args:[p,m]}})),te=(p,m)=>l(a({id:m,action:"FS",payload:{method:"readFile",args:[p,{encoding:"utf8"}]}})),r=(p,m)=>l(a({id:m,action:"FS",payload:{method:"unlink",args:[p]}})),e=(p,m,L)=>l(a({id:L,action:"FS",payload:{method:p,args:m}})),n=(p,m)=>l(a({id:m,action:"loadLanguage",payload:{langs:p,options:{langPath:C.langPath,dataPath:C.dataPath,cachePath:C.cachePath,cacheMethod:C.cacheMethod,gzip:C.gzip,lstmOnly:[c.DEFAULT,c.LSTM_ONLY].includes(X)&&!C.legacyLang}}})),d=(p,m,L,z)=>l(a({id:z,action:"initialize",payload:{langs:p,oem:m,config:L}})),i=(p="eng",m,L,z)=>{if(H&&[c.TESSERACT_ONLY,c.TESSERACT_LSTM_COMBINED].includes(m))throw Error("Legacy model requested but code missing.");const j=m||X;X=j;const V=L||re;re=V;const ue=(typeof p=="string"?p.split("+"):p).filter(ft=>!q.includes(ft));return q.push(...ue),ue.length>0?n(ue,z).then(()=>d(p,j,V,z)):d(p,j,V,z)},y=(p={},m)=>l(a({id:m,action:"setParameters",payload:{params:p}})),M=async(p,m={},L={text:!0},z)=>l(a({id:z,action:"recognize",payload:{image:await h(p),options:m,output:L}})),$=async(p,m)=>{if(H)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return l(a({id:m,action:"detect",payload:{image:await h(p)}}))},B=async()=>(t!==null&&(E(t),t=null),Promise.resolve());O(t,({workerId:p,jobId:m,status:L,action:z,data:j})=>{const V=`${z}-${m}`;if(L==="resolve")o(`[${p}]: Complete ${m}`),I[V].resolve({jobId:m,data:j}),delete I[V];else if(L==="reject")if(I[V].reject(j),delete I[V],z==="load"&&G(j),T)T(j);else throw Error(j);else L==="progress"&&D({...j,userJobId:m})});const P={id:_,worker:t,load:k,writeText:J,readText:te,removeFile:r,FS:e,reinitialize:i,setParameters:y,recognize:M,detect:$,terminate:B};return N().then(()=>n(x)).then(()=>d(x,Y,R)).then(()=>ne(P)).catch(()=>{}),ee},Oe}var Ce,ot;function Bt(){if(ot)return Ce;ot=1;const u=dt();return Ce={recognize:async(v,c,g)=>{const b=await u(c,1,g);return b.recognize(v).finally(async()=>{await b.terminate()})},detect:async(v,c)=>{const g=await u("osd",0,c);return g.detect(v).finally(async()=>{await g.terminate()})}},Ce}var Ae,at;function Ut(){return at||(at=1,Ae={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),Ae}var _e,it;function Dt(){return it||(it=1,_e={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),_e}var Te,st;function Gt(){if(st)return Te;st=1,kt();const u=Lt(),a=dt(),o=Bt(),v=Ut(),c=ct(),g=Dt(),{setLogging:b}=$e();return Te={languages:v,OEM:c,PSM:g,createScheduler:u,createWorker:a,setLogging:b,...o},Te}var zt=Gt();const jt=St(zt),Wt={class:"bingo-page"},Ft={class:"info-panel"},xt={key:0,class:"ocr-status"},Kt={class:"team-config"},Yt={class:"team-selector"},Ht={class:"scoreboard"},Jt={class:"font-size-control"},Vt=["src"],Zt={class:"instructions-container"},Qt={key:0,class:"instructions"},Xt=["src"],er=["onClick","onWheel","onDblclick"],tr={key:0,class:"square-text"},rr=["onBlur","onKeydown"],K=5,Ne="bingoRefereeBoardState",nr={__name:"RefBoardGPT",setup(u){const a=oe(100),o=oe(null),v=oe(null),c=oe(!1),g=oe(0),b=oe(!1),E=oe(!1),O=oe(.85),h=Pe({red:{name:"Red Team",color:"#ff4c4c"},blue:{name:"Blue Team",color:"#4c8bff"}}),w=Pe(Array.from({length:K*K},()=>({redActive:!1,blueActive:!1,redCount:0,blueCount:0,text:"",editing:!1}))),S=()=>{localStorage.setItem(Ne,JSON.stringify({imageSrc:v.value,board:w,teams:h,fontSize:O.value}))},x=()=>{const f=localStorage.getItem(Ne);if(f)try{const t=JSON.parse(f);t.imageSrc&&(v.value=t.imageSrc),Array.isArray(t.board)&&t.board.forEach((l,k)=>Object.assign(w[k],l)),t.teams&&(h.red=Object.assign(h.red,t.teams.red||{}),h.blue=Object.assign(h.blue,t.teams.blue||{})),t.fontSize&&(O.value=t.fontSize)}catch(t){console.warn("Failed to load board state:",t)}},Y=()=>{confirm(`⚠️ This will completely erase all saved data — including OCR results, team names, colors, and current board progress.

Are you sure you want to reset everything?`)&&(localStorage.removeItem(Ne),o.value=null,v.value=null,Object.assign(h.red,{name:"Red Team",color:"#ff4c4c"}),Object.assign(h.blue,{name:"Blue Team",color:"#4c8bff"}),w.forEach(t=>{t.redActive=t.blueActive=!1,t.redCount=t.blueCount=0,t.text="",t.editing=!1}),alert(`✅ All persistent data has been cleared.
The board and team settings have been reset to defaults.`))},Q=()=>{const t=Math.min(window.innerWidth-320,window.innerHeight*.85);a.value=t/K};async function R(f){const t=f.target.files[0];if(!t)return;const l=URL.createObjectURL(t);v.value=l,await _(l),S()}async function _(f){b.value=!0,g.value=0;const t=new Image;t.src=f,await new Promise(n=>t.onload=n);const l=document.createElement("canvas"),k=l.getContext("2d");l.width=t.width,l.height=t.height,k.drawImage(t,0,0);const N=t.width/K,J=t.height/K,te=[];for(let n=0;n<K;n++)for(let d=0;d<K;d++){const i=document.createElement("canvas"),y=i.getContext("2d");i.width=N,i.height=J,y.filter="grayscale(1) contrast(180%) brightness(1.1)",y.drawImage(t,d*N,n*J,N,J,0,0,N,J),te.push(i.toDataURL("image/png"))}const r=4;let e=0;for(let n=0;n<te.length;n+=r)await Promise.all(te.slice(n,n+r).map((d,i)=>jt.recognize(d,"eng",{tessedit_char_whitelist:`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 ()-.,'"`}).then(({data:{text:y}})=>{w[n+i].text=y.replace(/\s+/g," ").trim()}).catch(()=>w[n+i].text="(unreadable)").finally(()=>{e++,g.value=Math.round(e/te.length*100),S()})));b.value=!1}const D=f=>o.value=o.value===f?null:f,T=f=>{if(!o.value)return;const t=w[f];o.value==="red"?t.redActive=!t.redActive:t.blueActive=!t.blueActive,S()},C=(f,t)=>{if(!o.value)return;f.preventDefault();const l=Math.sign(f.deltaY)*-1,k=w[t];o.value==="red"?k.redCount=Math.max(0,k.redCount+l):k.blueCount=Math.max(0,k.blueCount+l),S()},I=f=>w[f].editing=!0,q=(f,t)=>{w[f].text=t.target.innerText.trim(),w[f].editing=!1,S()},X=()=>{confirm(`This will clear all active colors and counters on the board, but keep your team names, colors, and OCR text intact.

Do you want to continue?`)&&(w.forEach(t=>{t.redActive=t.blueActive=!1,t.redCount=t.blueCount=0}),alert(`✅ Board squares have been reset.
Team settings and text remain unchanged.`),S())},re=qe(()=>w.filter(f=>f.redActive).length),H=qe(()=>w.filter(f=>f.blueActive).length),G=f=>{const t=h.red.color,l=h.blue.color;return f.redActive&&f.blueActive?`linear-gradient(135deg, ${t}55 50%, ${l}55 50%)`:f.redActive?`${t}55`:f.blueActive?`${l}55`:"transparent"};Be(()=>{x(),Q(),window.addEventListener("resize",Q)}),Ue(()=>window.removeEventListener("resize",Q)),vt([w,h],S,{deep:!0});const ne=f=>{const t=Math.min(Math.max(O.value+f,.6),3);O.value=parseFloat(t.toFixed(2)),S()},ee=f=>{(f.ctrlKey||f.metaKey)&&(f.key==="+"||f.key==="="?(f.preventDefault(),ne(.05)):f.key==="-"?(f.preventDefault(),ne(-.05)):f.key==="0"&&(f.preventDefault(),O.value=.85,S()))};return Be(()=>{window.addEventListener("keydown",ee)}),Ue(()=>{window.removeEventListener("keydown",ee)}),(f,t)=>(F(),W("div",Wt,[s("div",Ft,[t[15]||(t[15]=s("h2",{class:"title"},"Bingo Referee Board",-1)),s("input",{type:"file",accept:"image/*",onChange:R,class:"file-input"},null,32),b.value?(F(),W("div",xt,"🧠 Scanning "+U(g.value)+"%",1)):ae("",!0),s("div",Kt,[s("div",null,[t[11]||(t[11]=s("label",null,"Name:",-1)),ie(s("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>h.red.name=l),style:Z({borderColor:h.red.color})},null,4),[[se,h.red.name]]),ie(s("input",{type:"color","onUpdate:modelValue":t[1]||(t[1]=l=>h.red.color=l)},null,512),[[se,h.red.color]])]),s("div",null,[t[12]||(t[12]=s("label",null,"Name:",-1)),ie(s("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>h.blue.name=l),style:Z({borderColor:h.blue.color})},null,4),[[se,h.blue.name]]),ie(s("input",{type:"color","onUpdate:modelValue":t[3]||(t[3]=l=>h.blue.color=l)},null,512),[[se,h.blue.color]])])]),s("div",Yt,[s("button",{class:ce({active:o.value==="red"}),onClick:t[4]||(t[4]=l=>D("red")),style:Z({color:h.red.color,borderColor:h.red.color,boxShadow:o.value==="red"?`0 0 12px ${h.red.color}`:"none"})},U(h.red.name),7),s("button",{class:ce({active:o.value==="blue"}),onClick:t[5]||(t[5]=l=>D("blue")),style:Z({color:h.blue.color,borderColor:h.blue.color,boxShadow:o.value==="blue"?`0 0 12px ${h.blue.color}`:"none"})},U(h.blue.name),7),s("button",{class:ce([{active:o.value===null},"neutral"]),onClick:t[6]||(t[6]=l=>D(null))}," None ",2)]),s("div",Ht,[s("div",{style:Z({color:h.red.color})},"● "+U(h.red.name)+": "+U(re.value),5),s("div",{style:Z({color:h.blue.color})},"● "+U(h.blue.name)+": "+U(H.value),5)]),s("div",Jt,[t[13]||(t[13]=s("label",{for:"fontSize"},"Font Size",-1)),ie(s("input",{id:"fontSize",type:"range",min:"0.1",max:"3",step:"0.05","onUpdate:modelValue":t[7]||(t[7]=l=>O.value=l)},null,512),[[se,O.value,void 0,{number:!0}]]),s("span",null,U((O.value*100).toFixed(0))+"%",1)]),t[16]||(t[16]=s("p",{class:"font-size-tip"},[A("Use "),s("kbd",null,"Ctrl"),A(),s("kbd",null,"+"),A("/"),s("kbd",null,"-"),A(" or "),s("kbd",null,"Ctrl 0"),A(" to adjust quickly.")],-1)),s("div",{class:"control-buttons"},[s("button",{class:"reset-button",onClick:X},"🔄 Reset"),s("button",{class:"clear-button",onClick:Y},"🧹 Clear Data")]),v.value?(F(),W("div",{key:1,class:"thumb",onClick:t[8]||(t[8]=l=>c.value=!0)},[s("img",{src:v.value},null,8,Vt)])):ae("",!0),s("div",Zt,[s("button",{class:"toggle-instructions",onClick:t[9]||(t[9]=l=>E.value=!E.value)},U(E.value?"📖 Hide Instructions":"ℹ️ Show Instructions"),1),Ie(pt,{name:"fade"},{default:ht(()=>[E.value?(F(),W("div",Qt,t[14]||(t[14]=[s("h3",null,"How to Use",-1),s("ol",null,[s("li",null,[s("strong",null,"Upload the board image"),A(" (e.g., "),s("code",null,"board.png"),A(").")]),s("li",null,"Wait for OCR to fill in the 25 bingo squares automatically."),s("li",null,[s("strong",null,"Rename teams"),A(" and choose custom colors if desired.")]),s("li",null,[A("Select a team, then: "),s("ul",null,[s("li",null,[A("🖱️ "),s("strong",null,"Click"),A(" a square → mark it for that team.")]),s("li",null,[A("🖱️ "),s("strong",null,"Scroll"),A(" on a square → adjust its progress counter.")]),s("li",null,[A("🖱️ "),s("strong",null,"Double-click"),A(" a square → edit the square text manually.")])])]),s("li",null,[A("Use "),s("strong",null,"Reset"),A(" to clear colors and counters, or "),s("strong",null,"Clear Data"),A(" to wipe all saved info.")]),s("li",null,[A("Your board state is "),s("em",null,"automatically saved"),A(" between sessions.")])],-1)]))):ae("",!0)]),_:1})])]),c.value?(F(),W("div",{key:0,class:"image-popup",onClick:t[10]||(t[10]=l=>c.value=!1)},[s("img",{src:v.value},null,8,Xt)])):ae("",!0),s("div",{class:"board-wrapper",style:Z({width:`${a.value*K}px`,height:`${a.value*K}px`})},[(F(!0),W(gt,null,mt(w,(l,k)=>(F(),W("div",{key:k,class:"square-overlay",style:Z({width:`${a.value}px`,height:`${a.value}px`,left:`${k%K*a.value}px`,top:`${Math.floor(k/K)*a.value}px`,background:G(l),fontSize:`${O.value}em`}),onClick:N=>T(k),onWheel:N=>C(N,k),onDblclick:De(N=>I(k),["stop"])},[l.editing?(F(),W("div",{key:1,class:"square-text editable",contenteditable:"true",onBlur:N=>q(k,N),onKeydown:yt(De(N=>q(k,N),["prevent"]),["enter"])},U(l.text),41,rr)):(F(),W("div",tr,U(l.text||"…"),1)),l.redCount>0?(F(),W("div",{key:2,class:"counter",style:Z({color:h.red.color,left:"6px",fontSize:`${O.value*.65}em`})},U(l.redCount),5)):ae("",!0),l.blueCount>0?(F(),W("div",{key:3,class:"counter",style:Z({color:h.blue.color,right:"6px",fontSize:`${O.value*.65}em`})},U(l.blueCount),5)):ae("",!0)],44,er))),128))],4)]))}},or=lt(nr,[["__scopeId","data-v-6a6b087d"]]),ar=bt({name:"Bingo Ref",components:{Navigation:wt,Board:or},mounted(){document.body.style.background="linear-gradient(135deg, rgba(0, 4, 87, 1) 0%, rgba(91, 0, 107, 1) 100%)"},beforeUnmount(){document.body.style.background="#0d1321"}}),ir={class:"main-container"};function sr(u,a,o,v,c,g){const b=Ge("Navigation"),E=Ge("Board");return F(),W("div",null,[Ie(b),s("div",ir,[Ie(E)])])}const cr=lt(ar,[["render",sr],["__scopeId","data-v-2d2bc1a2"]]);export{cr as default};
