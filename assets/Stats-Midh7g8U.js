import{d as S,r as v,f as $,o as u,c as i,t as p,a as s,F as w,b as g,_ as h,i as C,j as b}from"./index-BkwJb2H9.js";import{C as k}from"./CrucibleSquareStatsTable-Ba29kW6I.js";const F=async()=>{const _="/data/goldenOrderSquareStats.json";try{const a=await fetch(_);if(!a.ok)throw new Error(`Failed to fetch challenge records: ${a.statusText}`);const c=await a.json();return{records:Object.entries(c).map(([o,n])=>({name:o,completed:n.Completed,appeared:n.Appeared,ratio:n.Ratio,appearance:n.Appearance}))}}catch(a){throw console.error(a),new Error("Failed to load challenge records. Please try again later.")}},x={class:"container"},y={key:0,class:"error"},A={key:1,class:"table-container"},B={class:"results-table"},N={class:"left-column"},q=S({__name:"GoldenOrderSquareStatsTable",setup(_){const a=v({records:[]}),c=v(null),d=v("name"),o=v("asc");$(async()=>{let r=16;try{const t=await F();a.value.records=t.records.map(e=>{const l=e.appeared>0?Number((e.completed/e.appeared*100).toFixed(0)):0,m=Number((e.appeared/r*100).toFixed(0));return{...e,ratio:l,appearance:m}}),a.value.records.sort((e,l)=>e.name.localeCompare(l.name))}catch(t){c.value=t.message}});const n=r=>{d.value===r?o.value=o.value==="asc"?"desc":"asc":(d.value=r,o.value="desc"),a.value.records.sort((t,e)=>{let l=parseFloat(t[r]),m=parseFloat(e[r]);return o.value==="asc"?l-m:m-l})},f=()=>{d.value==="name"?o.value=o.value==="asc"?"desc":"asc":(d.value="name",o.value="desc"),a.value.records.sort((r,t)=>{const e=r.name.toLowerCase(),l=t.name.toLowerCase();return o.value==="asc"?e.localeCompare(l):l.localeCompare(e)})};return(r,t)=>(u(),i("div",x,[c.value?(u(),i("div",y,p(c.value),1)):(u(),i("div",A,[s("table",B,[s("thead",null,[s("tr",null,[s("th",{onClick:f,class:"sortable"},"Square Name ⬍"),s("th",{onClick:t[0]||(t[0]=e=>n("completed")),class:"sortable"},"Completed ⬍"),s("th",{onClick:t[1]||(t[1]=e=>n("appeared")),class:"sortable"},"Appeared ⬍"),s("th",{onClick:t[2]||(t[2]=e=>n("ratio")),class:"sortable"},"Completion % ⬍"),s("th",{onClick:t[3]||(t[3]=e=>n("appearance")),class:"sortable"},"Appearance % ⬍")])]),s("tbody",null,[(u(!0),i(w,null,g(a.value.records,(e,l)=>(u(),i("tr",{key:l},[s("td",N,p(e.name),1),s("td",null,p(e.completed),1),s("td",null,p(e.appeared),1),s("td",null,p(e.ratio)+"%",1),s("td",null,p(e.appearance)+"%",1)]))),128))])])]))]))}}),O=h(q,[["__scopeId","data-v-046f68f5"]]),R={name:"Stats",components:{DeathsRecord:O,CrucibleStats:k}};function j(_,a,c,d,o,n){const f=b("DeathsRecord"),r=b("CrucibleStats");return u(),i("div",null,[a[0]||(a[0]=s("h1",null,"Golden Order",-1)),C(f),a[1]||(a[1]=s("h1",null,"Crucible",-1)),C(r)])}const L=h(R,[["render",j],["__scopeId","data-v-92e3df18"]]);export{L as default};
